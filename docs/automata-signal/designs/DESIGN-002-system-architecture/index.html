<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-automata-signal/designs/DESIGN-002-system-architecture" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">[DESIGN-002] 시스템 아키텍처 | Automata</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://AutomataOOO.github.io/automata_docs/docs/automata-signal/designs/DESIGN-002-system-architecture"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="[DESIGN-002] 시스템 아키텍처 | Automata"><meta data-rh="true" name="description" content="| 버전 | 날짜       | 변경 내용      |"><meta data-rh="true" property="og:description" content="| 버전 | 날짜       | 변경 내용      |"><link data-rh="true" rel="icon" href="/automata_docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://AutomataOOO.github.io/automata_docs/docs/automata-signal/designs/DESIGN-002-system-architecture"><link data-rh="true" rel="alternate" href="https://AutomataOOO.github.io/automata_docs/docs/automata-signal/designs/DESIGN-002-system-architecture" hreflang="en"><link data-rh="true" rel="alternate" href="https://AutomataOOO.github.io/automata_docs/docs/automata-signal/designs/DESIGN-002-system-architecture" hreflang="x-default"><link rel="stylesheet" href="/automata_docs/assets/css/styles.7e2963ca.css">
<script src="/automata_docs/assets/js/runtime~main.611a0b22.js" defer="defer"></script>
<script src="/automata_docs/assets/js/main.cae8a0e0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/automata_docs/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent__HuA" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/automata_docs/"><div class="navbar__logo"><img src="/automata_docs/img/logo.svg" alt="Automata Logo" class="themedComponent_Exct themedComponent--light_c3lc"><img src="/automata_docs/img/logo.svg" alt="Automata Logo" class="themedComponent_Exct themedComponent--dark_Ji9V"></div><b class="navbar__title text--truncate">Automata</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/automata_docs/docs/automata-signal/">Docs</a></div><div class="navbar__items navbar__items--right"><div class="toggle_OAgU colorModeToggle_zRe0"><button class="clean-btn toggleButton_aClM toggleButtonDisabled_GkIb" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_zzlY"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_Z832"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Cx4E"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_liLQ"><div class="docsWrapper_evXH"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_nZiY" type="button"></button><div class="docRoot_jKp6"><aside class="theme-doc-sidebar-container docSidebarContainer_wXyP"><div class="sidebarViewport_LQZ0"><div class="sidebar_T0dy"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_WBBB"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/automata_docs/docs/automata-signal/">[APP-001] Automata-Signal</a><button aria-label="Collapse sidebar category &#x27;[APP-001] Automata-Signal&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/automata_docs/docs/automata-signal/guides/GUIDE-001-getting-started">guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/automata_docs/docs/automata-signal/designs/DESIGN-001-architecture-overview">designs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/automata_docs/docs/automata-signal/designs/DESIGN-001-architecture-overview">[DESIGN-001] 아키텍처 개요</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/automata_docs/docs/automata-signal/designs/DESIGN-002-system-architecture">[DESIGN-002] 시스템 아키텍처</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/automata_docs/docs/automata-signal/designs/DESIGN-003-data-model">[DESIGN-003] 데이터 모델</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/automata_docs/docs/automata-signal/designs/DESIGN-004-deployment">[DESIGN-004] 배포 구조</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/automata_docs/docs/automata-signal/designs/DESIGN-004-operational-architecture">[DESIGN-004] 운영 아키텍처</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/automata_docs/docs/automata-signal/designs/DESIGN-005-admin-user-scenarios">[DESIGN-005] 어드민 유저 시나리오</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/automata_docs/docs/automata-signal/components/COMP-002-adapters">components</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/automata_docs/docs/automata-signal/sequences/SEQ-001-initialization">sequences</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/automata_docs/docs/automata-signal/references/REF-001-api">references</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/automata_docs/docs/automata-signal/planning/PLAN-001-requirements">planning</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/automata_docs/docs/automata-signal/tech-spec">Automata-Signal: 기술 명세서</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/automata_docs/docs/vibe-coding/APP-000-global-rules">vibe-coding</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_dhcR"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_hWfg"><div class="docItemContainer_UIwD"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_ViMa" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/automata_docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_xAfz"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/automata_docs/docs/automata-signal/"><span itemprop="name">[APP-001] Automata-Signal</span></a><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">designs</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">[DESIGN-002] 시스템 아키텍처</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_xgD3 theme-doc-toc-mobile tocMobile_UvqM"><button type="button" class="clean-btn tocCollapsibleButton_ldZF">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>[DESIGN-002] 시스템 아키텍처</h1></header>
<table><thead><tr><th>버전</th><th>날짜</th><th>변경 내용</th></tr></thead><tbody><tr><td>1.0</td><td>2025-04-02</td><td>최초 문서 작성</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="관련-문서">관련 문서<a href="#관련-문서" class="hash-link" aria-label="Direct link to 관련 문서" title="Direct link to 관련 문서">​</a></h2>
<ul>
<li>[DESIGN-001] 아키텍처 개요</li>
<li>[DESIGN-003] 데이터 모델</li>
<li>[DESIGN-004] 배포 구조</li>
<li>[COMP-002] 어댑터 시스템</li>
<li>[SEQ-002] 메시지 처리 시퀀스</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="요약">요약<a href="#요약" class="hash-link" aria-label="Direct link to 요약" title="Direct link to 요약">​</a></h2>
<p>본 문서는 Automata-Signal 시스템의, 컴포넌트 수준의 상세 아키텍처를 설명합니다. 각 주요 컴포넌트의 책임, 상호작용 방식, 통신 프로토콜 및 데이터 흐름을 자세히 다룹니다.</p>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="대상-독자">대상 독자<a href="#대상-독자" class="hash-link" aria-label="Direct link to 대상 독자" title="Direct link to 대상 독자">​</a></h2>
<ul>
<li>백엔드 개발자</li>
<li>시스템 아키텍트</li>
<li>시스템 운영자</li>
<li>핵심 기술팀</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="1-시스템-아키텍처-다이어그램">1. 시스템 아키텍처 다이어그램<a href="#1-시스템-아키텍처-다이어그램" class="hash-link" aria-label="Direct link to 1. 시스템 아키텍처 다이어그램" title="Direct link to 1. 시스템 아키텍처 다이어그램">​</a></h2>
<p>다음 다이어그램은 Automata-Signal 시스템의 컴포넌트 수준 아키텍처를 보여줍니다:</p>
<div class="codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-text codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token plain">+------------------------------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                                           AUTOMATA-SIGNAL                                                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+------------------------------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                                                                                                            |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|  +-----------------+     +-----------------+     +-----------------+     +-----------------+               |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|  |                 |     |                 |     |                 |     |                 |               |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|  | API 게이트웨이  |&lt;---&gt;|  Elixir 서버   |&lt;---&gt;|  작업 처리기    |&lt;---&gt;|  채널 어댑터   |----+         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|  | (Phoenix)       |     | (Ash Framework) |     |  (ash_oban)     |     |                 |    |         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|  +-----------------+     +-----------------+     +-----------------+     +-----------------+    |         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|          ^                     ^     |                    ^                                    |         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|          |                     |     |                    |                                    |         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|          v                     |     v                    |                                    v         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|  +-----------------+     +-----------------+     +-----------------+     +-----------------+             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|  |                 |     |                 |     |                 |     |                 |             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|  | Flutter SDK     |     |  데이터베이스  |&lt;---&gt;|  템플릿 엔진    |     | 외부 서비스     |             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|  |                 |     | (PostgreSQL)    |     |                 |     | (APNS/FCM 등)   |             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|  +-----------------+     +-----------------+     +-----------------+     +-----------------+             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                                                        ^                                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                                                        |                                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                                                        v                                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                                           +-----------------+                                            |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                                           |                 |                                            |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                                           | 캠페인 관리자   |                                            |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                                           |                 |                                            |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                                           +-----------------+                                            |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                                                                                                          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------------------------------------------------------------------------------------------------------+</span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="2-핵심-컴포넌트-상세-설명">2. 핵심 컴포넌트 상세 설명<a href="#2-핵심-컴포넌트-상세-설명" class="hash-link" aria-label="Direct link to 2. 핵심 컴포넌트 상세 설명" title="Direct link to 2. 핵심 컴포넌트 상세 설명">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="21-api-게이트웨이">2.1 API 게이트웨이<a href="#21-api-게이트웨이" class="hash-link" aria-label="Direct link to 2.1 API 게이트웨이" title="Direct link to 2.1 API 게이트웨이">​</a></h3>
<p>API 게이트웨이는 시스템의 진입점으로, 클라이언트 요청을 수신하고 처리합니다.</p>
<p><strong>기술 스택</strong>: Phoenix Framework, Ash Phoenix, Ash JSON API</p>
<p><strong>주요 책임</strong>:</p>
<ul>
<li>RESTful API 엔드포인트 제공</li>
<li>요청 인증 및 권한 관리</li>
<li>요청 유효성 검증</li>
<li>요청 라우팅 및 조정</li>
<li>응답 포맷팅</li>
</ul>
<p><strong>주요 인터페이스</strong>:</p>
<ol>
<li><strong>REST API</strong>: 클라이언트와의 주요 통신 수단</li>
<li><strong>WebSocket</strong>: 실시간 업데이트 및 이벤트 (향후 구현)</li>
</ol>
<p><strong>API 버전 관리</strong>:</p>
<ul>
<li>API 경로에 버전 접두사 포함 (예: <code>/api/v1/messages</code>)</li>
<li>이전 버전은 최소 6개월간 지원</li>
</ul>
<p><strong>보안 메커니즘</strong>:</p>
<ul>
<li>API 키 기반 인증</li>
<li>HTTPS/TLS 암호화</li>
<li>요청 비율 제한</li>
<li>CORS 정책</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="22-elixir-서버">2.2 Elixir 서버<a href="#22-elixir-서버" class="hash-link" aria-label="Direct link to 2.2 Elixir 서버" title="Direct link to 2.2 Elixir 서버">​</a></h3>
<p>비즈니스 로직의 핵심이며, 리소스 관리와 서비스 조정을 담당합니다.</p>
<p><strong>기술 스택</strong>: Elixir, Ash Framework, libcluster</p>
<p><strong>주요 책임</strong>:</p>
<ul>
<li>비즈니스 로직 처리</li>
<li>리소스 및 관계 관리</li>
<li>트랜잭션 조정</li>
<li>상태 관리</li>
<li>분산 처리 조정</li>
</ul>
<p><strong>주요 모듈</strong>:</p>
<ol>
<li>
<p><strong>Resources</strong>: 도메인 모델 및 데이터 구조 정의</p>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Message</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token module class-name">Ash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resource</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">data_layer:</span><span class="token plain"> </span><span class="token module class-name">Ash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">DataLayer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Postgres</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">extensions:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token module class-name">AshStateMachine</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resource</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 메시지 구조 정의</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  attributes </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uuid_primary_key </span><span class="token atom symbol" style="color:#36acaa">:id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:title</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:body</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:map</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">default:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ... 기타 속성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 상태 머신 정의</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  state_machine </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    field </span><span class="token atom symbol" style="color:#36acaa">:status</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ... 상태 전이 규칙</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... 관계 및 액션 정의</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Services</strong>: 비즈니스 로직 및 동작 구현</p>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Services</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">MessageService</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 메시지 검증 및 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 작업 큐에 작업 추가</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">update_message_status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> details</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 메시지 상태 업데이트</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... 기타 서비스 기능</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>API Modules</strong>: API 요청 처리 및 응답 생성</p>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignalWeb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">MessageController</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token module class-name">AutomataSignalWeb</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:controller</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">conn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> params</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 메시지 생성 로직</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 응답 반환</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... 기타 API 엔드포인트</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p><strong>분산 처리 메커니즘</strong>:</p>
<ul>
<li>libcluster를 사용한 노드 자동 발견 및 연결</li>
<li>GenServer 기반 분산 프로세스 관리</li>
<li>Erlang 분산 프로토콜을 통한 노드 간 통신</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="23-작업-처리기">2.3 작업 처리기<a href="#23-작업-처리기" class="hash-link" aria-label="Direct link to 2.3 작업 처리기" title="Direct link to 2.3 작업 처리기">​</a></h3>
<p>비동기 작업 처리 및 스케줄링을 담당합니다.</p>
<p><strong>기술 스택</strong>: ash_oban, Oban, PostgreSQL</p>
<p><strong>주요 책임</strong>:</p>
<ul>
<li>메시지 전송 작업 처리</li>
<li>작업 스케줄링 및 우선순위 관리</li>
<li>재시도 전략 구현</li>
<li>비동기 작업 실행</li>
</ul>
<p><strong>주요 워커 유형</strong>:</p>
<ol>
<li>
<p><strong>MessageWorker</strong>: 개별 메시지 전송 처리</p>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Workers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">MessageWorker</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token module class-name">Oban</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Worker</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">queue:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:messages</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attribute variable" style="color:#36acaa">@impl</span><span class="token plain"> </span><span class="token module class-name">Oban</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Worker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">perform</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">%</span><span class="token module class-name">Oban</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Job</span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">args:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> message_id</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Messages</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get_message!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 적절한 어댑터 선택</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    adapter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_adapter_for_channel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 어댑터를 통해 메시지 전송</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> adapter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">send_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:ok</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> response</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 성공 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token atom symbol" style="color:#36acaa">:ok</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reason</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 오류 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">handle_send_error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reason</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... 헬퍼 함수</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>CampaignWorker</strong>: 캠페인 관련 작업 처리</p>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Workers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">CampaignWorker</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token module class-name">Oban</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Worker</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">queue:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:campaigns</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attribute variable" style="color:#36acaa">@impl</span><span class="token plain"> </span><span class="token module class-name">Oban</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Worker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">perform</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">%</span><span class="token module class-name">Oban</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Job</span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">args:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> campaign_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;action&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;process&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    campaign </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Campaigns</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get_campaign!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">campaign_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 캠페인 처리 로직</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">process_campaign</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">campaign</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... 캠페인 처리 함수</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>RetryWorker</strong>: 실패한 작업 재시도</p>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Workers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">RetryWorker</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token module class-name">Oban</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Worker</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">queue:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:retry</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attribute variable" style="color:#36acaa">@impl</span><span class="token plain"> </span><span class="token module class-name">Oban</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Worker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">perform</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">%</span><span class="token module class-name">Oban</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Job</span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">args:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> message_id</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">attempt:</span><span class="token plain"> attempt</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 지수 백오프 및 재시도 로직</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p><strong>큐 설정</strong>:</p>
<ul>
<li><code>messages</code>: 일반 메시지 전송 (우선순위: 보통)</li>
<li><code>campaigns</code>: 캠페인 처리 (우선순위: 낮음)</li>
<li><code>retry</code>: 실패한 메시지 재시도 (우선순위: 낮음)</li>
<li><code>critical</code>: 중요 메시지 (우선순위: 높음)</li>
</ul>
<p><strong>작업 수명 주기</strong>:</p>
<ol>
<li>작업 생성 및 큐에 추가</li>
<li>작업자가 작업 가져오기</li>
<li>작업 실행</li>
<li>성공 또는 실패 처리</li>
<li>실패 시 재시도 전략 적용</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="24-채널-어댑터">2.4 채널 어댑터<a href="#24-채널-어댑터" class="hash-link" aria-label="Direct link to 2.4 채널 어댑터" title="Direct link to 2.4 채널 어댑터">​</a></h3>
<p>외부 메시징 서비스와의 통합을 담당합니다.</p>
<p><strong>기술 스택</strong>: Pigeon, GenServer</p>
<p><strong>주요 책임</strong>:</p>
<ul>
<li>외부 메시징 서비스와의 통신</li>
<li>메시지 형식 변환</li>
<li>서비스별 인증 및 구성 관리</li>
<li>응답 처리 및 오류 매핑</li>
</ul>
<p><strong>어댑터 인터페이스</strong>:</p>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">ChannelAdapter</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attribute variable" style="color:#36acaa">@callback</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Message</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">t</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:ok</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attribute variable" style="color:#36acaa">@callback</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">validate_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Message</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">t</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token atom symbol" style="color:#36acaa">:ok</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reason </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">atom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> details </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attribute variable" style="color:#36acaa">@callback</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message_id </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token module class-name">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">t</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:ok</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> status </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">atom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reason </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">atom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attribute variable" style="color:#36acaa">@callback</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">map_error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">any</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:permanent</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reason </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">atom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> details </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:temporary</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reason </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">atom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> details </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>주요 어댑터 구현</strong>:</p>
<ol>
<li>
<p><strong>PushAdapter</strong>: iOS/Android 푸시 알림 처리</p>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">PushAdapter</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attribute variable" style="color:#36acaa">@behaviour</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">ChannelAdapter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attribute variable" style="color:#36acaa">@impl</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">subscription:</span><span class="token plain"> subscription</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">type </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom symbol" style="color:#36acaa">:iOSPush</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send_ios_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom symbol" style="color:#36acaa">:AndroidPush</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send_android_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      _ </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">reason:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:invalid_subscription_type</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... 구현 세부사항</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>EmailAdapter</strong>: 이메일 메시지 처리 (지원 예정)</p>
</li>
<li>
<p><strong>SMSAdapter</strong>: SMS 메시지 처리 (지원 예정)</p>
</li>
<li>
<p><strong>KakaoAdapter</strong>: 카카오 알림톡 처리 (지원 예정)</p>
</li>
<li>
<p><strong>InAppAdapter</strong>: 인앱 메시지 처리 (지원 예정)</p>
</li>
</ol>
<p><strong>연결 관리</strong>:</p>
<ul>
<li>연결 풀링</li>
<li>자동 재연결</li>
<li>비율 제한 준수</li>
</ul>
<p><strong>어댑터 팩토리</strong>:</p>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">AdapterFactory</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_adapter_for_channel_type</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">channel_type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> channel_type </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom symbol" style="color:#36acaa">:iOSPush</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">PushAdapter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom symbol" style="color:#36acaa">:AndroidPush</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">PushAdapter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom symbol" style="color:#36acaa">:Email</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">EmailAdapter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom symbol" style="color:#36acaa">:SMS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">SMSAdapter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom symbol" style="color:#36acaa">:KakaoTalk</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">KakaoAdapter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom symbol" style="color:#36acaa">:InAppMessage</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">InAppAdapter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      _ </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Unsupported channel type: </span><span class="token string interpolation delimiter punctuation" style="color:#393A34">#{</span><span class="token string interpolation function" style="color:#d73a49">inspect</span><span class="token string interpolation punctuation" style="color:#393A34">(</span><span class="token string interpolation" style="color:#e3116c">channel_type</span><span class="token string interpolation punctuation" style="color:#393A34">)</span><span class="token string interpolation delimiter punctuation" style="color:#393A34">}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="25-템플릿-엔진">2.5 템플릿 엔진<a href="#25-템플릿-엔진" class="hash-link" aria-label="Direct link to 2.5 템플릿 엔진" title="Direct link to 2.5 템플릿 엔진">​</a></h3>
<p>메시지 템플릿 관리 및 렌더링을 담당합니다.</p>
<p><strong>기술 스택</strong>: 커스텀 템플릿 엔진, EEx</p>
<p><strong>주요 책임</strong>:</p>
<ul>
<li>템플릿 저장 및 관리</li>
<li>변수 치환 및 렌더링</li>
<li>템플릿 버전 관리</li>
<li>다국어 지원</li>
</ul>
<p><strong>템플릿 형식</strong>:</p>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 템플릿 예시</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;title_template&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;안녕하세요 {{user_name}}님&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;body_template&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{{event_name}} 이벤트가 {{start_date}}에 시작됩니다&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;data_template&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;action&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;open_screen&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;screen&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;event_details&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;event_id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{{event_id}}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 변수 맵</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;user_name&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;홍길동&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;event_name&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;여름 세일&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;start_date&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;4월 10일&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;event_id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;evt-12345&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>템플릿 렌더링 로직</strong>:</p>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">TemplateEngine</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render_template</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">template</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">when</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">is_binary</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">template</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token module class-name">Regex</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token regex" style="color:#36acaa">~r/\{\{([^}]+)\}\}/</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> template</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">fn</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> var_name </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token module class-name">Map</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">variables</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> var_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render_message_content</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">template</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">title:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render_template</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">title_template</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">body:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render_template</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">body_template</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">data:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render_data_template</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data_template</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... 데이터 템플릿 렌더링 로직</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>템플릿 캐싱</strong>:</p>
<ul>
<li>자주 사용되는 템플릿 메모리 캐싱</li>
<li>캐시 무효화 전략</li>
<li>캐시 크기 제한</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="26-캠페인-관리자">2.6 캠페인 관리자<a href="#26-캠페인-관리자" class="hash-link" aria-label="Direct link to 2.6 캠페인 관리자" title="Direct link to 2.6 캠페인 관리자">​</a></h3>
<p>대량 메시지 캠페인 생성 및 관리를 담당합니다.</p>
<p><strong>기술 스택</strong>: Elixir, Ash Framework, ash_oban</p>
<p><strong>주요 책임</strong>:</p>
<ul>
<li>캠페인 생성 및 관리</li>
<li>대상 사용자 필터링</li>
<li>캠페인 스케줄링</li>
<li>캠페인 실행 및 모니터링</li>
<li>성과 측정</li>
</ul>
<p><strong>캠페인 처리 프로세스</strong>:</p>
<ol>
<li>캠페인 생성 및 구성</li>
<li>타겟팅 쿼리 정의</li>
<li>스케줄링 (즉시 또는 미래 시점)</li>
<li>대상 사용자 쿼리 실행</li>
<li>배치 메시지 생성</li>
<li>작업 큐에 배치 추가</li>
<li>진행 상황 모니터링</li>
</ol>
<p><strong>타겟팅 기능</strong>:</p>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Services</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">CampaignService</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">target_users</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">campaign</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    criteria </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> campaign</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">targeting_criteria</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    base_query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Subscription</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> base_query</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">|&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">filter_by_application</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">criteria</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;application_id&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">|&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">filter_by_tags</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">criteria</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;tags&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">|&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">filter_by_activity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">criteria</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;last_active_after&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">|&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">filter_by_countries</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">criteria</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;countries&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Repo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... 필터링 함수</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="27-데이터베이스">2.7 데이터베이스<a href="#27-데이터베이스" class="hash-link" aria-label="Direct link to 2.7 데이터베이스" title="Direct link to 2.7 데이터베이스">​</a></h3>
<p>모든 시스템 데이터의 영구 저장소이자 작업 큐의 기반입니다.</p>
<p><strong>기술 스택</strong>: PostgreSQL, Ash Postgres</p>
<p><strong>저장 데이터</strong>:</p>
<ul>
<li>구독 정보</li>
<li>사용자 정보</li>
<li>메시지 및 상태</li>
<li>템플릿</li>
<li>캠페인</li>
<li>작업 큐</li>
<li>감사 로그</li>
</ul>
<p><strong>주요 테이블</strong>:</p>
<ol>
<li><strong>applications</strong>: 앱 정보</li>
<li><strong>users</strong>: 사용자 정보</li>
<li><strong>subscriptions</strong>: 구독 정보</li>
<li><strong>messages</strong>: 메시지 정보</li>
<li><strong>message_events</strong>: 메시지 이벤트</li>
<li><strong>subscription_events</strong>: 구독 이벤트</li>
<li><strong>message_templates</strong>: 메시지 템플릿</li>
<li><strong>message_campaigns</strong>: 메시지 캠페인</li>
<li><strong>oban_jobs</strong>: 작업 큐</li>
<li><strong>message_quotas</strong>: 앱별 할당량</li>
</ol>
<p><strong>성능 최적화</strong>:</p>
<ul>
<li>적절한 인덱싱</li>
<li>파티셔닝 (메시지, 이벤트 테이블)</li>
<li>연결 풀링</li>
<li>정기적인 유지보수</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="28-flutter-sdk">2.8 Flutter SDK<a href="#28-flutter-sdk" class="hash-link" aria-label="Direct link to 2.8 Flutter SDK" title="Direct link to 2.8 Flutter SDK">​</a></h3>
<p>클라이언트 측 통합을 위한 SDK입니다.</p>
<p><strong>기술 스택</strong>: Flutter, Dart</p>
<p><strong>주요 책임</strong>:</p>
<ul>
<li>디바이스 등록 및 토큰 관리</li>
<li>사용자 식별 및 인증</li>
<li>구독 관리</li>
<li>메시지 수신 및 처리</li>
<li>이벤트 추적</li>
</ul>
<p><strong>주요 컴포넌트</strong>:</p>
<ol>
<li><strong>AutomataSignal</strong>: 주 SDK 클래스</li>
<li><strong>SubscriptionManager</strong>: 구독 관리</li>
<li><strong>UserManager</strong>: 사용자 식별</li>
<li><strong>MessageManager</strong>: 메시지 처리</li>
<li><strong>InAppMessageManager</strong>: 인앱 메시지 관리 (지원 예정)</li>
</ol>
<p><strong>사용 예시</strong>:</p>
<div class="language-dart codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-dart codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// SDK 초기화</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">initialize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">&#x27;YOUR_APP_ID&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 사용자 식별</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">login</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">&#x27;user123&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 이메일 구독 등록</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> emailSubscriptionId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">registerEmail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">&#x27;user@example.com&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 푸시 알림 비활성화</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">disableChannel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SubscriptionType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">iOSPush</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 태그 추가</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addTags</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string-literal string" style="color:#e3116c">&#x27;premium&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&#x27;true&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&#x27;user_level&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&#x27;gold&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="3-통신-프로토콜-및-인터페이스">3. 통신 프로토콜 및 인터페이스<a href="#3-통신-프로토콜-및-인터페이스" class="hash-link" aria-label="Direct link to 3. 통신 프로토콜 및 인터페이스" title="Direct link to 3. 통신 프로토콜 및 인터페이스">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="31-api-인터페이스">3.1 API 인터페이스<a href="#31-api-인터페이스" class="hash-link" aria-label="Direct link to 3.1 API 인터페이스" title="Direct link to 3.1 API 인터페이스">​</a></h3>
<p><strong>기본 URL</strong>: <code>https://api.automata-signal.com/api/v1</code></p>
<p><strong>인증 방식</strong>:</p>
<ul>
<li>API 키 (HTTP 헤더: <code>X-API-Key</code>)</li>
<li>요청 제한: 초당 100개 요청</li>
</ul>
<p><strong>주요 엔드포인트</strong>:</p>
<ol>
<li>
<p><strong>구독 관리</strong>:</p>
<ul>
<li><code>POST /subscriptions</code>: 구독 생성</li>
<li><code>GET /subscriptions/:id</code>: 구독 조회</li>
<li><code>PUT /subscriptions/:id</code>: 구독 업데이트</li>
<li><code>DELETE /subscriptions/:id</code>: 구독 삭제</li>
</ul>
</li>
<li>
<p><strong>사용자 관리</strong>:</p>
<ul>
<li><code>POST /users/identify</code>: 사용자 식별</li>
<li><code>POST /users/logout</code>: 사용자 로그아웃</li>
<li><code>GET /users/:id/subscriptions</code>: 사용자 구독 조회</li>
</ul>
</li>
<li>
<p><strong>메시지 관리</strong>:</p>
<ul>
<li><code>POST /messages</code>: 메시지 전송</li>
<li><code>GET /messages/:id</code>: 메시지 조회</li>
<li><code>PUT /messages/:id/status</code>: 메시지 상태 업데이트</li>
</ul>
</li>
<li>
<p><strong>템플릿 관리</strong>:</p>
<ul>
<li><code>POST /templates</code>: 템플릿 생성</li>
<li><code>GET /templates/:id</code>: 템플릿 조회</li>
<li><code>PUT /templates/:id</code>: 템플릿 업데이트</li>
<li><code>DELETE /templates/:id</code>: 템플릿 삭제</li>
</ul>
</li>
<li>
<p><strong>캠페인 관리</strong>:</p>
<ul>
<li><code>POST /campaigns</code>: 캠페인 생성</li>
<li><code>GET /campaigns/:id</code>: 캠페인 조회</li>
<li><code>PUT /campaigns/:id</code>: 캠페인 업데이트</li>
<li><code>POST /campaigns/:id/execute</code>: 캠페인 실행</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="32-elixir-노드-간-통신">3.2 Elixir 노드 간 통신<a href="#32-elixir-노드-간-통신" class="hash-link" aria-label="Direct link to 3.2 Elixir 노드 간 통신" title="Direct link to 3.2 Elixir 노드 간 통신">​</a></h3>
<p><strong>프로토콜</strong>: Erlang 분산 프로토콜</p>
<p><strong>메커니즘</strong>:</p>
<ul>
<li>분산 GenServer 호출</li>
<li>노드 간 RPC</li>
<li>분산 PubSub</li>
</ul>
<p><strong>주요 메시지 유형</strong>:</p>
<ol>
<li>작업 분배 메시지</li>
<li>상태 업데이트 메시지</li>
<li>캠페인 진행 상황 메시지</li>
<li>할당량 업데이트 메시지</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="33-외부-서비스-통합">3.3 외부 서비스 통합<a href="#33-외부-서비스-통합" class="hash-link" aria-label="Direct link to 3.3 외부 서비스 통합" title="Direct link to 3.3 외부 서비스 통합">​</a></h3>
<ol>
<li>
<p><strong>APNS(Apple Push Notification Service)</strong>:</p>
<ul>
<li>프로토콜: HTTP/2</li>
<li>인증: 인증서 또는 JWT</li>
<li>라이브러리: Pigeon</li>
<li>모드: 개발/프로덕션</li>
</ul>
</li>
<li>
<p><strong>FCM(Firebase Cloud Messaging)</strong>:</p>
<ul>
<li>프로토콜: HTTP</li>
<li>인증: 서버 키</li>
<li>라이브러리: Pigeon</li>
</ul>
</li>
<li>
<p><strong>SMTP/SES(이메일)</strong> - 지원 예정:</p>
<ul>
<li>프로토콜: SMTP</li>
<li>인증: SMTP 인증</li>
<li>라이브러리: Swoosh</li>
</ul>
</li>
<li>
<p><strong>SMS 게이트웨이</strong> - 지원 예정:</p>
<ul>
<li>프로토콜: HTTP</li>
<li>인증: API 키</li>
</ul>
</li>
<li>
<p><strong>카카오 비즈니스 API</strong> - 지원 예정:</p>
<ul>
<li>프로토콜: HTTP</li>
<li>인증: 액세스 토큰</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="4-데이터-흐름">4. 데이터 흐름<a href="#4-데이터-흐름" class="hash-link" aria-label="Direct link to 4. 데이터 흐름" title="Direct link to 4. 데이터 흐름">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="41-메시지-전송-흐름">4.1 메시지 전송 흐름<a href="#41-메시지-전송-흐름" class="hash-link" aria-label="Direct link to 4.1 메시지 전송 흐름" title="Direct link to 4.1 메시지 전송 흐름">​</a></h3>
<p>다음은 메시지 전송의 전체 데이터 흐름입니다:</p>
<ol>
<li>
<p><strong>요청 수신</strong>:</p>
<ul>
<li>클라이언트가 API 게이트웨이에 메시지 전송 요청</li>
<li>API 게이트웨이가 요청 검증</li>
</ul>
</li>
<li>
<p><strong>메시지 생성</strong>:</p>
<ul>
<li>Elixir 서버가 요청 처리</li>
<li>메시지 레코드 생성 (상태: <code>pending</code>)</li>
<li>데이터베이스에 메시지 저장</li>
</ul>
</li>
<li>
<p><strong>작업 큐 추가</strong>:</p>
<ul>
<li>메시지 ID로 작업 생성</li>
<li>작업을 적절한 큐에 추가</li>
</ul>
</li>
<li>
<p><strong>작업 처리</strong>:</p>
<ul>
<li>작업자가 작업 가져오기</li>
<li>메시지 데이터 로드</li>
<li>적절한 채널 어댑터 선택</li>
</ul>
</li>
<li>
<p><strong>어댑터 전송</strong>:</p>
<ul>
<li>어댑터가 메시지 형식 변환</li>
<li>외부 서비스로 전송</li>
</ul>
</li>
<li>
<p><strong>응답 처리</strong>:</p>
<ul>
<li>외부 서비스 응답 수신</li>
<li>메시지 상태 업데이트 (상태: <code>successful</code> 또는 <code>failed</code>)</li>
<li>필요시 재시도 스케줄링</li>
</ul>
</li>
<li>
<p><strong>클라이언트 피드백</strong>:</p>
<ul>
<li>클라이언트가 메시지 수신 확인 (상태: <code>received</code>)</li>
<li>클라이언트가 사용자 상호작용 보고 (상태: <code>converted</code>)</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="42-캠페인-처리-흐름">4.2 캠페인 처리 흐름<a href="#42-캠페인-처리-흐름" class="hash-link" aria-label="Direct link to 4.2 캠페인 처리 흐름" title="Direct link to 4.2 캠페인 처리 흐름">​</a></h3>
<p>대량 메시지 캠페인의 데이터 흐름:</p>
<ol>
<li>
<p><strong>캠페인 생성</strong>:</p>
<ul>
<li>캠페인 정보 및 타겟팅 설정</li>
<li>캠페인 레코드 저장</li>
</ul>
</li>
<li>
<p><strong>캠페인 실행</strong>:</p>
<ul>
<li>스케줄된 시간에 캠페인 작업 시작</li>
<li>대상 사용자 쿼리 실행</li>
</ul>
</li>
<li>
<p><strong>배치 처리</strong>:</p>
<ul>
<li>대상 사용자를 배치로 분할 (500-1000명 단위)</li>
<li>각 배치에 대한 작업 생성</li>
</ul>
</li>
<li>
<p><strong>메시지 생성</strong>:</p>
<ul>
<li>배치 내 각 사용자별 메시지 생성</li>
<li>템플릿 엔진으로 콘텐츠 렌더링</li>
<li>메시지 레코드 저장</li>
</ul>
</li>
<li>
<p><strong>메시지 큐 추가</strong>:</p>
<ul>
<li>생성된 메시지를 작업 큐에 추가</li>
<li>처리 우선순위 설정</li>
</ul>
</li>
<li>
<p><strong>진행 상황 추적</strong>:</p>
<ul>
<li>캠페인 진행 상황 업데이트</li>
<li>처리된 메시지 수 집계</li>
<li>오류 집계</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="43-구독-관리-흐름">4.3 구독 관리 흐름<a href="#43-구독-관리-흐름" class="hash-link" aria-label="Direct link to 4.3 구독 관리 흐름" title="Direct link to 4.3 구독 관리 흐름">​</a></h3>
<p>구독 등록 및 관리 흐름:</p>
<ol>
<li>
<p><strong>SDK 초기화</strong>:</p>
<ul>
<li>앱 시작 시 SDK 초기화</li>
<li>디바이스 정보 수집</li>
</ul>
</li>
<li>
<p><strong>푸시 토큰 등록</strong>:</p>
<ul>
<li>APNS/FCM으로부터 토큰 획득</li>
<li>서버에 토큰 등록</li>
<li>구독 레코드 생성</li>
</ul>
</li>
<li>
<p><strong>사용자 식별</strong>:</p>
<ul>
<li>앱에서 사용자 로그인</li>
<li>SDK가 사용자 식별자 전송</li>
<li>서버가 구독-사용자 연결</li>
</ul>
</li>
<li>
<p><strong>추가 채널 등록</strong>:</p>
<ul>
<li>사용자가 이메일, SMS 등 추가 채널 제공</li>
<li>SDK가 채널 정보 전송</li>
<li>서버가 새 구독 생성 또는 기존 구독 업데이트</li>
</ul>
</li>
<li>
<p><strong>구독 상태 변경</strong>:</p>
<ul>
<li>사용자가 채널 비활성화</li>
<li>SDK가 상태 변경 요청</li>
<li>서버가 구독 상태 업데이트</li>
<li>이벤트 기록</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="5-확장성-및-성능-고려사항">5. 확장성 및 성능 고려사항<a href="#5-확장성-및-성능-고려사항" class="hash-link" aria-label="Direct link to 5. 확장성 및 성능 고려사항" title="Direct link to 5. 확장성 및 성능 고려사항">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="51-수평적-확장">5.1 수평적 확장<a href="#51-수평적-확장" class="hash-link" aria-label="Direct link to 5.1 수평적 확장" title="Direct link to 5.1 수평적 확장">​</a></h3>
<p>Automata-Signal은 분산 아키텍처를 통해 수평적 확장을 지원합니다:</p>
<ol>
<li>
<p><strong>Elixir 노드 확장</strong>:</p>
<ul>
<li>지역별로 노드 추가 가능</li>
<li>libcluster를 통한 자동 노드 발견 및 연결</li>
<li>작업 분산을 통한 부하 분산</li>
</ul>
</li>
<li>
<p><strong>데이터베이스 확장</strong>:</p>
<ul>
<li>읽기 복제본 사용</li>
<li>테이블 파티셔닝</li>
<li>필요시 샤딩 적용</li>
</ul>
</li>
<li>
<p><strong>작업 큐 확장</strong>:</p>
<ul>
<li>큐별 작업자 수 조정</li>
<li>프라이어리티 큐 활용</li>
<li>작업자 노드 분리 가능</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="52-성능-최적화">5.2 성능 최적화<a href="#52-성능-최적화" class="hash-link" aria-label="Direct link to 5.2 성능 최적화" title="Direct link to 5.2 성능 최적화">​</a></h3>
<p>주요 성능 최적화 전략:</p>
<ol>
<li>
<p><strong>배치 처리</strong>:</p>
<ul>
<li>데이터베이스 작업 배치화</li>
<li>대량 메시지 배치 처리</li>
<li>배치 크기 최적화 (500-1000개)</li>
</ul>
</li>
<li>
<p><strong>캐싱 전략</strong>:</p>
<ul>
<li>템플릿 캐싱</li>
<li>구독 데이터 캐싱</li>
<li>애플리케이션 설정 캐싱</li>
</ul>
</li>
<li>
<p><strong>비동기 처리</strong>:</p>
<ul>
<li>모든 메시지 처리 비동기화</li>
<li>장기 실행 작업의 백그라운드 처리</li>
<li>전송 상태 비동기 업데이트</li>
</ul>
</li>
<li>
<p><strong>데이터베이스 최적화</strong>:</p>
<ul>
<li>인덱스 최적화</li>
<li>연결 풀링</li>
<li>트랜잭션 관리</li>
<li>효율적인 쿼리 설계</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="53-부하-테스트-결과">5.3 부하 테스트 결과<a href="#53-부하-테스트-결과" class="hash-link" aria-label="Direct link to 5.3 부하 테스트 결과" title="Direct link to 5.3 부하 테스트 결과">​</a></h3>
<p>초기 부하 테스트 결과 및 목표:</p>
<ol>
<li>
<p><strong>단일 노드 성능</strong>:</p>
<ul>
<li>초당 최대 메시지 처리량: 5,000-10,000건</li>
<li>평균 메시지 처리 시간: 20ms</li>
<li>최대 연결 수: 10,000</li>
</ul>
</li>
<li>
<p><strong>클러스터 성능 (4노드)</strong>:</p>
<ul>
<li>초당 최대 메시지 처리량: 40,000건</li>
<li>버스트 처리량 (10초): 400,000건</li>
<li>평균 메시지 처리 시간: 25ms</li>
</ul>
</li>
<li>
<p><strong>목표 성능 (12노드)</strong>:</p>
<ul>
<li>초당 최대 메시지 처리량: 100,000건</li>
<li>버스트 처리량 (10초): 1,000,000건</li>
<li>평균 메시지 처리 시간: <code>&lt;30ms</code></li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="6-장애-허용성-및-내구성">6. 장애 허용성 및 내구성<a href="#6-장애-허용성-및-내구성" class="hash-link" aria-label="Direct link to 6. 장애 허용성 및 내구성" title="Direct link to 6. 장애 허용성 및 내구성">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="61-장애-시나리오-및-대응-전략">6.1 장애 시나리오 및 대응 전략<a href="#61-장애-시나리오-및-대응-전략" class="hash-link" aria-label="Direct link to 6.1 장애 시나리오 및 대응 전략" title="Direct link to 6.1 장애 시나리오 및 대응 전략">​</a></h3>
<ol>
<li>
<p><strong>노드 장애</strong>:</p>
<ul>
<li>libcluster를 통한 장애 감지</li>
<li>작업 재분배</li>
<li>자동 재시작</li>
</ul>
</li>
<li>
<p><strong>데이터베이스 장애</strong>:</p>
<ul>
<li>복제본으로 자동 장애 조치</li>
<li>연결 풀 재구성</li>
<li>일시적 오류 자동 재시도</li>
</ul>
</li>
<li>
<p><strong>외부 서비스 장애</strong>:</p>
<ul>
<li>서비스별 상태 모니터링</li>
<li>지수 백오프 재시도</li>
<li>장애 서비스 우회</li>
</ul>
</li>
<li>
<p><strong>네트워크 장애</strong>:</p>
<ul>
<li>연결 재시도</li>
<li>타임아웃 관리</li>
<li>메시지 큐 지속성</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="62-데이터-내구성">6.2 데이터 내구성<a href="#62-데이터-내구성" class="hash-link" aria-label="Direct link to 6.2 데이터 내구성" title="Direct link to 6.2 데이터 내구성">​</a></h3>
<ol>
<li>
<p><strong>메시지 내구성</strong>:</p>
<ul>
<li>메시지 전송 전 데이터베이스 저장</li>
<li>작업 큐에서 메시지 영속성 보장</li>
<li>실패 시 상태 및 오류 정보 기록</li>
</ul>
</li>
<li>
<p><strong>백업 전략</strong>:</p>
<ul>
<li>일일 전체 백업</li>
<li>시간별 증분 백업</li>
<li>지리적으로 분산된 백업 저장</li>
</ul>
</li>
<li>
<p><strong>복구 전략</strong>:</p>
<ul>
<li>메시지 재처리 기능</li>
<li>작업 큐 복구</li>
<li>지점 복구 지원</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="63-분산-시스템-설계">6.3 분산 시스템 설계<a href="#63-분산-시스템-설계" class="hash-link" aria-label="Direct link to 6.3 분산 시스템 설계" title="Direct link to 6.3 분산 시스템 설계">​</a></h3>
<ol>
<li>
<p><strong>노드 간 조정</strong>:</p>
<ul>
<li>Phoenix PubSub 기반 분산 이벤트</li>
<li>일관된 해싱을 통한 작업 라우팅</li>
<li>캠페인 처리 조정</li>
</ul>
</li>
<li>
<p><strong>상태 공유</strong>:</p>
<ul>
<li>분산 ETS 테이블</li>
<li>중앙 데이터베이스 상태 저장소</li>
<li>분산 카운터 및 집계</li>
</ul>
</li>
<li>
<p><strong>글로벌 분산</strong>:</p>
<ul>
<li>지역별 클러스터 구성</li>
<li>지역 간 통신 최적화</li>
<li>지역 장애 격리</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="7-보안-아키텍처">7. 보안 아키텍처<a href="#7-보안-아키텍처" class="hash-link" aria-label="Direct link to 7. 보안 아키텍처" title="Direct link to 7. 보안 아키텍처">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="71-인증-및-권한-부여">7.1 인증 및 권한 부여<a href="#71-인증-및-권한-부여" class="hash-link" aria-label="Direct link to 7.1 인증 및 권한 부여" title="Direct link to 7.1 인증 및 권한 부여">​</a></h3>
<ol>
<li>
<p><strong>API 인증</strong>:</p>
<ul>
<li>API 키 기반 인증</li>
<li>키 순환 및 관리</li>
<li>권한 범위 제한</li>
</ul>
</li>
<li>
<p><strong>내부 인증</strong>:</p>
<ul>
<li>노드 간 쿠키 기반 인증</li>
<li>서비스 계정 인증</li>
<li>데이터베이스 접근 제어</li>
</ul>
</li>
<li>
<p><strong>사용자 인증</strong>:</p>
<ul>
<li>애플리케이션 관리자 인증</li>
<li>역할 기반 접근 제어</li>
<li>세션 관리</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="72-데이터-보안">7.2 데이터 보안<a href="#72-데이터-보안" class="hash-link" aria-label="Direct link to 7.2 데이터 보안" title="Direct link to 7.2 데이터 보안">​</a></h3>
<ol>
<li>
<p><strong>저장 데이터 보안</strong>:</p>
<ul>
<li>ash_cloak을 통한 민감 데이터 암호화</li>
<li>토큰 및 개인 정보 암호화</li>
<li>암호화 키 관리</li>
</ul>
</li>
<li>
<p><strong>전송 데이터 보안</strong>:</p>
<ul>
<li>TLS/SSL 통신</li>
<li>API 페이로드 암호화</li>
<li>안전한 키 교환</li>
</ul>
</li>
<li>
<p><strong>보안 정책</strong>:</p>
<ul>
<li>최소 권한 원칙</li>
<li>정기적인 보안 감사</li>
<li>취약점 관리</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="73-규제-준수">7.3 규제 준수<a href="#73-규제-준수" class="hash-link" aria-label="Direct link to 7.3 규제 준수" title="Direct link to 7.3 규제 준수">​</a></h3>
<ol>
<li>
<p><strong>GDPR 준수</strong>:</p>
<ul>
<li>개인 정보 최소화</li>
<li>명시적 동의 관리</li>
<li>삭제 요청 처리</li>
</ul>
</li>
<li>
<p><strong>데이터 보존 정책</strong>:</p>
<ul>
<li>목적별 보존 기간 설정</li>
<li>자동 데이터 만료</li>
<li>보존 정책 시행 자동화</li>
</ul>
</li>
<li>
<p><strong>감사 추적</strong>:</p>
<ul>
<li>주요 작업 로깅</li>
<li>권한 변경 추적</li>
<li>보안 이벤트 모니터링</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="8-모니터링-및-운영">8. 모니터링 및 운영<a href="#8-모니터링-및-운영" class="hash-link" aria-label="Direct link to 8. 모니터링 및 운영" title="Direct link to 8. 모니터링 및 운영">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="81-모니터링-아키텍처">8.1 모니터링 아키텍처<a href="#81-모니터링-아키텍처" class="hash-link" aria-label="Direct link to 8.1 모니터링 아키텍처" title="Direct link to 8.1 모니터링 아키텍처">​</a></h3>
<ol>
<li>
<p><strong>시스템 모니터링</strong>:</p>
<ul>
<li>CPU, 메모리, 디스크, 네트워크 모니터링</li>
<li>노드 상태 모니터링</li>
<li>데이터베이스 성능 모니터링</li>
</ul>
</li>
<li>
<p><strong>애플리케이션 모니터링</strong>:</p>
<ul>
<li>요청 처리량 및 응답 시간</li>
<li>작업 큐 길이 및 처리 시간</li>
<li>오류율 및 유형</li>
</ul>
</li>
<li>
<p><strong>비즈니스 지표</strong>:</p>
<ul>
<li>메시지 전송률</li>
<li>전환율 (수신→열람)</li>
<li>채널별 성과 비교</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="82-로깅-전략">8.2 로깅 전략<a href="#82-로깅-전략" class="hash-link" aria-label="Direct link to 8.2 로깅 전략" title="Direct link to 8.2 로깅 전략">​</a></h3>
<ol>
<li>
<p><strong>로그 수준</strong>:</p>
<ul>
<li>debug: 개발용 상세 정보</li>
<li>info: 일반 작업 정보</li>
<li>warn: 잠재적 문제</li>
<li>error: 처리되지 않은 오류</li>
</ul>
</li>
<li>
<p><strong>로그 형식</strong>:</p>
<ul>
<li>JSON 구조화 로그</li>
<li>표준 필드 집합</li>
<li>컨텍스트 데이터 포함</li>
</ul>
</li>
<li>
<p><strong>로그 수집 및 분석</strong>:</p>
<ul>
<li>중앙 로그 저장소</li>
<li>실시간 로그 분석</li>
<li>로그 기반 알림</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="83-운영-도구">8.3 운영 도구<a href="#83-운영-도구" class="hash-link" aria-label="Direct link to 8.3 운영 도구" title="Direct link to 8.3 운영 도구">​</a></h3>
<ol>
<li>
<p><strong>관리 인터페이스</strong>:</p>
<ul>
<li>시스템 상태 대시보드</li>
<li>작업 큐 관리</li>
<li>수동 개입 도구</li>
</ul>
</li>
<li>
<p><strong>배포 도구</strong>:</p>
<ul>
<li>무중단 배포</li>
<li>롤백 메커니즘</li>
<li>점진적 롤아웃</li>
</ul>
</li>
<li>
<p><strong>문제 해결 도구</strong>:</p>
<ul>
<li>실시간 로그 조회</li>
<li>트레이스 도구</li>
<li>성능 프로파일링</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="9-인프라-요구사항">9. 인프라 요구사항<a href="#9-인프라-요구사항" class="hash-link" aria-label="Direct link to 9. 인프라 요구사항" title="Direct link to 9. 인프라 요구사항">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="91-컴퓨팅-요구사항">9.1 컴퓨팅 요구사항<a href="#91-컴퓨팅-요구사항" class="hash-link" aria-label="Direct link to 9.1 컴퓨팅 요구사항" title="Direct link to 9.1 컴퓨팅 요구사항">​</a></h3>
<ol>
<li>
<p><strong>개발 환경</strong>:</p>
<ul>
<li>1-2 Elixir 노드</li>
<li>1 PostgreSQL 인스턴스</li>
</ul>
</li>
<li>
<p><strong>테스트 환경</strong>:</p>
<ul>
<li>2-4 Elixir 노드</li>
<li>2 PostgreSQL 인스턴스 (기본/복제본)</li>
</ul>
</li>
<li>
<p><strong>프로덕션 환경</strong>:</p>
<ul>
<li>12+ Elixir 노드 (3개 리전 × 4+ 노드)</li>
<li>PostgreSQL 클러스터 (각 리전에 복제본)</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="92-네트워크-요구사항">9.2 네트워크 요구사항<a href="#92-네트워크-요구사항" class="hash-link" aria-label="Direct link to 9.2 네트워크 요구사항" title="Direct link to 9.2 네트워크 요구사항">​</a></h3>
<ol>
<li>
<p><strong>대역폭</strong>:</p>
<ul>
<li>노드 간: 최소 1Gbps</li>
<li>외부: 최소 500Mbps</li>
</ul>
</li>
<li>
<p><strong>지연 시간</strong>:</p>
<ul>
<li>노드 간: <code>&lt;5ms</code> (리전 내)</li>
<li>리전 간: <code>&lt;100ms</code></li>
<li>데이터베이스: <code>&lt;10ms</code></li>
</ul>
</li>
<li>
<p><strong>네트워크 보안</strong>:</p>
<ul>
<li>노드 간 암호화 통신</li>
<li>방화벽 구성</li>
<li>DDoS 보호</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="93-저장소-요구사항">9.3 저장소 요구사항<a href="#93-저장소-요구사항" class="hash-link" aria-label="Direct link to 9.3 저장소 요구사항" title="Direct link to 9.3 저장소 요구사항">​</a></h3>
<ol>
<li>
<p><strong>데이터베이스 크기</strong>:</p>
<ul>
<li>초기: 50GB</li>
<li>연간 증가: 약 500GB</li>
</ul>
</li>
<li>
<p><strong>백업 저장소</strong>:</p>
<ul>
<li>일일 백업: 최소 2TB</li>
<li>보존 기간: 90일</li>
</ul>
</li>
<li>
<p><strong>로그 저장소</strong>:</p>
<ul>
<li>일일 로그 볼륨: 약 10GB</li>
<li>보존 기간: 30일</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="10-개발-및-배포-프로세스">10. 개발 및 배포 프로세스<a href="#10-개발-및-배포-프로세스" class="hash-link" aria-label="Direct link to 10. 개발 및 배포 프로세스" title="Direct link to 10. 개발 및 배포 프로세스">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="101-개발-프로세스">10.1 개발 프로세스<a href="#101-개발-프로세스" class="hash-link" aria-label="Direct link to 10.1 개발 프로세스" title="Direct link to 10.1 개발 프로세스">​</a></h3>
<ol>
<li>
<p><strong>코드 관리</strong>:</p>
<ul>
<li>Git 저장소</li>
<li>브랜치 전략 (Git Flow)</li>
<li>코드 리뷰 프로세스</li>
</ul>
</li>
<li>
<p><strong>테스트 방법론</strong>:</p>
<ul>
<li>단위 테스트 (ExUnit)</li>
<li>통합 테스트</li>
<li>성능 테스트</li>
<li>부하 테스트</li>
</ul>
</li>
<li>
<p><strong>문서화</strong>:</p>
<ul>
<li>코드 문서화 (ExDoc)</li>
<li>API 문서화</li>
<li>아키텍처 문서화</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="102-배포-프로세스">10.2 배포 프로세스<a href="#102-배포-프로세스" class="hash-link" aria-label="Direct link to 10.2 배포 프로세스" title="Direct link to 10.2 배포 프로세스">​</a></h3>
<ol>
<li>
<p><strong>배포 파이프라인</strong>:</p>
<ul>
<li>CI/CD 도구: GitHub Actions</li>
<li>빌드 및 테스트 자동화</li>
<li>자동 배포</li>
</ul>
</li>
<li>
<p><strong>배포 전략</strong>:</p>
<ul>
<li>무중단 배포</li>
<li>점진적 롤아웃</li>
<li>블루-그린 배포</li>
</ul>
</li>
<li>
<p><strong>환경 관리</strong>:</p>
<ul>
<li>설정 관리</li>
<li>환경별 변수</li>
<li>비밀 관리</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="11-진화-전략">11. 진화 전략<a href="#11-진화-전략" class="hash-link" aria-label="Direct link to 11. 진화 전략" title="Direct link to 11. 진화 전략">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="111-새로운-채널-추가">11.1 새로운 채널 추가<a href="#111-새로운-채널-추가" class="hash-link" aria-label="Direct link to 11.1 새로운 채널 추가" title="Direct link to 11.1 새로운 채널 추가">​</a></h3>
<p>새로운 메시징 채널 추가를 위한 아키텍처 확장 방법:</p>
<ol>
<li>
<p><strong>어댑터 구현</strong>:</p>
<ul>
<li>새 채널 어댑터 구현</li>
<li>ChannelAdapter 인터페이스 준수</li>
<li>채널별 오류 처리 구현</li>
</ul>
</li>
<li>
<p><strong>리소스 확장</strong>:</p>
<ul>
<li>Subscription 유형 확장</li>
<li>채널별 상태 코드 추가</li>
<li>채널별 메타데이터 정의</li>
</ul>
</li>
<li>
<p><strong>플로우 통합</strong>:</p>
<ul>
<li>메시지 처리 흐름에 통합</li>
<li>상태 추적 확장</li>
<li>분석 지표 추가</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="112-확장성-로드맵">11.2 확장성 로드맵<a href="#112-확장성-로드맵" class="hash-link" aria-label="Direct link to 11.2 확장성 로드맵" title="Direct link to 11.2 확장성 로드맵">​</a></h3>
<p>향후 규모 확장을 위한 아키텍처 전략:</p>
<ol>
<li>
<p><strong>Phase 1</strong>: 단일 리전 최적화</p>
<ul>
<li>성능 튜닝</li>
<li>모니터링 개선</li>
<li>자동 확장</li>
</ul>
</li>
<li>
<p><strong>Phase 2</strong>: 다중 리전 확장</p>
<ul>
<li>글로벌 배포</li>
<li>리전 간 조정</li>
<li>지역 장애 격리</li>
</ul>
</li>
<li>
<p><strong>Phase 3</strong>: 초대규모 확장</p>
<ul>
<li>데이터베이스 샤딩</li>
<li>고급 캐싱 전략</li>
<li>메시지 라우팅 최적화</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="113-기술-부채-관리">11.3 기술 부채 관리<a href="#113-기술-부채-관리" class="hash-link" aria-label="Direct link to 11.3 기술 부채 관리" title="Direct link to 11.3 기술 부채 관리">​</a></h3>
<p>지속적인 아키텍처 개선을 위한 전략:</p>
<ol>
<li>
<p><strong>정기적인 리팩토링</strong>:</p>
<ul>
<li>계획된 리팩토링 주기</li>
<li>기술 부채 측정</li>
<li>점진적 개선</li>
</ul>
</li>
<li>
<p><strong>아키텍처 리뷰</strong>:</p>
<ul>
<li>분기별 아키텍처 검토</li>
<li>병목 지점 식별</li>
<li>개선 우선순위 설정</li>
</ul>
</li>
<li>
<p><strong>기술 혁신</strong>:</p>
<ul>
<li>새로운 기술 평가</li>
<li>개념 증명 개발</li>
<li>점진적 기술 도입</li>
</ul>
</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/AutomataOOO/automata_docs/tree/main/docs/automata-signal/2-designs/DESIGN-002-system-architecture.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Wowa" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_MFKL"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/automata_docs/docs/automata-signal/designs/DESIGN-001-architecture-overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">[DESIGN-001] 아키텍처 개요</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/automata_docs/docs/automata-signal/designs/DESIGN-003-data-model"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">[DESIGN-003] 데이터 모델</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_G4nv thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#관련-문서" class="table-of-contents__link toc-highlight">관련 문서</a></li><li><a href="#요약" class="table-of-contents__link toc-highlight">요약</a></li><li><a href="#대상-독자" class="table-of-contents__link toc-highlight">대상 독자</a></li><li><a href="#1-시스템-아키텍처-다이어그램" class="table-of-contents__link toc-highlight">1. 시스템 아키텍처 다이어그램</a></li><li><a href="#2-핵심-컴포넌트-상세-설명" class="table-of-contents__link toc-highlight">2. 핵심 컴포넌트 상세 설명</a><ul><li><a href="#21-api-게이트웨이" class="table-of-contents__link toc-highlight">2.1 API 게이트웨이</a></li><li><a href="#22-elixir-서버" class="table-of-contents__link toc-highlight">2.2 Elixir 서버</a></li><li><a href="#23-작업-처리기" class="table-of-contents__link toc-highlight">2.3 작업 처리기</a></li><li><a href="#24-채널-어댑터" class="table-of-contents__link toc-highlight">2.4 채널 어댑터</a></li><li><a href="#25-템플릿-엔진" class="table-of-contents__link toc-highlight">2.5 템플릿 엔진</a></li><li><a href="#26-캠페인-관리자" class="table-of-contents__link toc-highlight">2.6 캠페인 관리자</a></li><li><a href="#27-데이터베이스" class="table-of-contents__link toc-highlight">2.7 데이터베이스</a></li><li><a href="#28-flutter-sdk" class="table-of-contents__link toc-highlight">2.8 Flutter SDK</a></li></ul></li><li><a href="#3-통신-프로토콜-및-인터페이스" class="table-of-contents__link toc-highlight">3. 통신 프로토콜 및 인터페이스</a><ul><li><a href="#31-api-인터페이스" class="table-of-contents__link toc-highlight">3.1 API 인터페이스</a></li><li><a href="#32-elixir-노드-간-통신" class="table-of-contents__link toc-highlight">3.2 Elixir 노드 간 통신</a></li><li><a href="#33-외부-서비스-통합" class="table-of-contents__link toc-highlight">3.3 외부 서비스 통합</a></li></ul></li><li><a href="#4-데이터-흐름" class="table-of-contents__link toc-highlight">4. 데이터 흐름</a><ul><li><a href="#41-메시지-전송-흐름" class="table-of-contents__link toc-highlight">4.1 메시지 전송 흐름</a></li><li><a href="#42-캠페인-처리-흐름" class="table-of-contents__link toc-highlight">4.2 캠페인 처리 흐름</a></li><li><a href="#43-구독-관리-흐름" class="table-of-contents__link toc-highlight">4.3 구독 관리 흐름</a></li></ul></li><li><a href="#5-확장성-및-성능-고려사항" class="table-of-contents__link toc-highlight">5. 확장성 및 성능 고려사항</a><ul><li><a href="#51-수평적-확장" class="table-of-contents__link toc-highlight">5.1 수평적 확장</a></li><li><a href="#52-성능-최적화" class="table-of-contents__link toc-highlight">5.2 성능 최적화</a></li><li><a href="#53-부하-테스트-결과" class="table-of-contents__link toc-highlight">5.3 부하 테스트 결과</a></li></ul></li><li><a href="#6-장애-허용성-및-내구성" class="table-of-contents__link toc-highlight">6. 장애 허용성 및 내구성</a><ul><li><a href="#61-장애-시나리오-및-대응-전략" class="table-of-contents__link toc-highlight">6.1 장애 시나리오 및 대응 전략</a></li><li><a href="#62-데이터-내구성" class="table-of-contents__link toc-highlight">6.2 데이터 내구성</a></li><li><a href="#63-분산-시스템-설계" class="table-of-contents__link toc-highlight">6.3 분산 시스템 설계</a></li></ul></li><li><a href="#7-보안-아키텍처" class="table-of-contents__link toc-highlight">7. 보안 아키텍처</a><ul><li><a href="#71-인증-및-권한-부여" class="table-of-contents__link toc-highlight">7.1 인증 및 권한 부여</a></li><li><a href="#72-데이터-보안" class="table-of-contents__link toc-highlight">7.2 데이터 보안</a></li><li><a href="#73-규제-준수" class="table-of-contents__link toc-highlight">7.3 규제 준수</a></li></ul></li><li><a href="#8-모니터링-및-운영" class="table-of-contents__link toc-highlight">8. 모니터링 및 운영</a><ul><li><a href="#81-모니터링-아키텍처" class="table-of-contents__link toc-highlight">8.1 모니터링 아키텍처</a></li><li><a href="#82-로깅-전략" class="table-of-contents__link toc-highlight">8.2 로깅 전략</a></li><li><a href="#83-운영-도구" class="table-of-contents__link toc-highlight">8.3 운영 도구</a></li></ul></li><li><a href="#9-인프라-요구사항" class="table-of-contents__link toc-highlight">9. 인프라 요구사항</a><ul><li><a href="#91-컴퓨팅-요구사항" class="table-of-contents__link toc-highlight">9.1 컴퓨팅 요구사항</a></li><li><a href="#92-네트워크-요구사항" class="table-of-contents__link toc-highlight">9.2 네트워크 요구사항</a></li><li><a href="#93-저장소-요구사항" class="table-of-contents__link toc-highlight">9.3 저장소 요구사항</a></li></ul></li><li><a href="#10-개발-및-배포-프로세스" class="table-of-contents__link toc-highlight">10. 개발 및 배포 프로세스</a><ul><li><a href="#101-개발-프로세스" class="table-of-contents__link toc-highlight">10.1 개발 프로세스</a></li><li><a href="#102-배포-프로세스" class="table-of-contents__link toc-highlight">10.2 배포 프로세스</a></li></ul></li><li><a href="#11-진화-전략" class="table-of-contents__link toc-highlight">11. 진화 전략</a><ul><li><a href="#111-새로운-채널-추가" class="table-of-contents__link toc-highlight">11.1 새로운 채널 추가</a></li><li><a href="#112-확장성-로드맵" class="table-of-contents__link toc-highlight">11.2 확장성 로드맵</a></li><li><a href="#113-기술-부채-관리" class="table-of-contents__link toc-highlight">11.3 기술 부채 관리</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Automata, Inc.</div></div></div></footer></div>
</body>
</html>