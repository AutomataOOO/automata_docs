<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-automata-signal/designs/DESIGN-004-deployment" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">[DESIGN-004] 배포 구조 | Automata</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://AutomataOOO.github.io/automata_docs/docs/automata-signal/designs/DESIGN-004-deployment"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="[DESIGN-004] 배포 구조 | Automata"><meta data-rh="true" name="description" content="| 버전 | 날짜       | 변경 내용      |"><meta data-rh="true" property="og:description" content="| 버전 | 날짜       | 변경 내용      |"><link data-rh="true" rel="icon" href="/automata_docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://AutomataOOO.github.io/automata_docs/docs/automata-signal/designs/DESIGN-004-deployment"><link data-rh="true" rel="alternate" href="https://AutomataOOO.github.io/automata_docs/docs/automata-signal/designs/DESIGN-004-deployment" hreflang="en"><link data-rh="true" rel="alternate" href="https://AutomataOOO.github.io/automata_docs/docs/automata-signal/designs/DESIGN-004-deployment" hreflang="x-default"><link rel="stylesheet" href="/automata_docs/assets/css/styles.7a5bbb8d.css">
<script src="/automata_docs/assets/js/runtime~main.0680f53f.js" defer="defer"></script>
<script src="/automata_docs/assets/js/main.39950a84.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/automata_docs/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/automata_docs/"><div class="navbar__logo"><img src="/automata_docs/img/logo.svg" alt="Automata Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/automata_docs/img/logo.svg" alt="Automata Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Automata</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/automata_docs/docs/automata-signal/">Docs</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/automata_docs/docs/automata-signal/">[APP-001] Automata-Signal</a><button aria-label="Collapse sidebar category &#x27;[APP-001] Automata-Signal&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/automata_docs/docs/automata-signal/guides/GUIDE-001-getting-started">guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/automata_docs/docs/automata-signal/designs/DESIGN-001-architecture-overview">designs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/automata_docs/docs/automata-signal/designs/DESIGN-001-architecture-overview">[DESIGN-001] 아키텍처 개요</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/automata_docs/docs/automata-signal/designs/DESIGN-002-system-architecture">[DESIGN-002] 시스템 아키텍처</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/automata_docs/docs/automata-signal/designs/DESIGN-003-data-model">[DESIGN-003] 데이터 모델</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/automata_docs/docs/automata-signal/designs/DESIGN-004-deployment">[DESIGN-004] 배포 구조</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/automata_docs/docs/automata-signal/designs/DESIGN-004-operational-architecture">[DESIGN-004] 운영 아키텍처</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/automata_docs/docs/automata-signal/designs/DESIGN-005-admin-user-scenarios">[DESIGN-005] 어드민 유저 시나리오</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/automata_docs/docs/automata-signal/components/COMP-002-adapters">components</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/automata_docs/docs/automata-signal/sequences/SEQ-001-initialization">sequences</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/automata_docs/docs/automata-signal/references/REF-001-api">references</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/automata_docs/docs/automata-signal/planning/PLAN-001-requirements">planning</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/automata_docs/docs/automata-signal/tech-spec">Automata-Signal: 기술 명세서</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/automata_docs/docs/vibe-coding/APP-000-global-rules">vibe-coding</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/automata_docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/automata_docs/docs/automata-signal/"><span itemprop="name">[APP-001] Automata-Signal</span></a><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">designs</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">[DESIGN-004] 배포 구조</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>[DESIGN-004] 배포 구조</h1></header>
<table><thead><tr><th>버전</th><th>날짜</th><th>변경 내용</th></tr></thead><tbody><tr><td>1.0</td><td>2025-04-02</td><td>최초 문서 작성</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="요약">요약<a href="#요약" class="hash-link" aria-label="Direct link to 요약" title="Direct link to 요약">​</a></h2>
<p>본 문서는 Automata-Signal 시스템의 배포 구조를 상세히 설명합니다. 글로벌 분산 배포 전략, 인프라 구성, 확장성, 고가용성, CI/CD 파이프라인 등을 다룹니다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="대상-독자">대상 독자<a href="#대상-독자" class="hash-link" aria-label="Direct link to 대상 독자" title="Direct link to 대상 독자">​</a></h2>
<ul>
<li>신규 개발자</li>
<li>개발팀</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-배포-아키텍처-개요">1. 배포 아키텍처 개요<a href="#1-배포-아키텍처-개요" class="hash-link" aria-label="Direct link to 1. 배포 아키텍처 개요" title="Direct link to 1. 배포 아키텍처 개요">​</a></h2>
<p>Automata-Signal은 fly.io 플랫폼을 기반으로 글로벌 분산 배포를 구현합니다. 지리적으로 분산된 데이터센터에 애플리케이션을 배포하여 전 세계 사용자에게 낮은 지연 시간과 높은 가용성을 제공합니다.</p>
<!-- -->
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-flyio-인프라-구성">2. fly.io 인프라 구성<a href="#2-flyio-인프라-구성" class="hash-link" aria-label="Direct link to 2. fly.io 인프라 구성" title="Direct link to 2. fly.io 인프라 구성">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-리전-및-노드-구성">2.1 리전 및 노드 구성<a href="#21-리전-및-노드-구성" class="hash-link" aria-label="Direct link to 2.1 리전 및 노드 구성" title="Direct link to 2.1 리전 및 노드 구성">​</a></h3>
<p>Automata-Signal은 초기에 다음 3개 리전에 배포됩니다:</p>
<table><thead><tr><th>리전 코드</th><th>위치</th><th>노드 수</th><th>목적</th></tr></thead><tbody><tr><td>nrt</td><td>도쿄, 일본</td><td>4</td><td>아시아 지역 서비스</td></tr><tr><td>fra</td><td>프랑크푸르트, 독일</td><td>4</td><td>유럽 지역 서비스</td></tr><tr><td>syd</td><td>시드니, 호주</td><td>4</td><td>오세아니아 지역 서비스</td></tr></tbody></table>
<p>각 노드는 다음과 같이 구성됩니다:</p>
<ul>
<li><strong>VM 크기</strong>: 4 vCPU, 8GB RAM</li>
<li><strong>스토리지</strong>: 40GB SSD (노드당)</li>
<li><strong>운영체제</strong>: Linux (Debian)</li>
<li><strong>컨테이너 런타임</strong>: Docker</li>
<li><strong>네트워크</strong>: 리전 내 로컬 네트워크, 리전 간 암호화된 통신</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-데이터베이스-구성">2.2 데이터베이스 구성<a href="#22-데이터베이스-구성" class="hash-link" aria-label="Direct link to 2.2 데이터베이스 구성" title="Direct link to 2.2 데이터베이스 구성">​</a></h3>
<p>PostgreSQL 데이터베이스는 다음과 같이 구성됩니다:</p>
<ul>
<li><strong>프라이머리 노드</strong>: 도쿄(nrt) 리전</li>
<li><strong>읽기 복제본</strong>: 프랑크푸르트(fra) 및 시드니(syd) 리전</li>
<li><strong>VM 크기</strong>: 8 vCPU, 16GB RAM</li>
<li><strong>스토리지</strong>: 500GB SSD</li>
<li><strong>복제 방식</strong>: 스트리밍 복제 (비동기)</li>
<li><strong>백업 전략</strong>: 일일 전체 백업, 15분 간격 증분 백업</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-네트워크-구성">2.3 네트워크 구성<a href="#23-네트워크-구성" class="hash-link" aria-label="Direct link to 2.3 네트워크 구성" title="Direct link to 2.3 네트워크 구성">​</a></h3>
<ul>
<li><strong>공용 엔드포인트</strong>: 리전별 API 엔드포인트 (*.automata-signal.com)</li>
<li><strong>애니캐스트 IP</strong>: 글로벌 단일 엔드포인트로 가장 가까운 리전으로 라우팅</li>
<li><strong>프라이빗 네트워크</strong>: fly.io 내부 네트워크로 노드 및 데이터베이스 간 통신</li>
<li><strong>IPv6 지원</strong>: 모든 엔드포인트에서 IPv6 지원</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="24-dns-구성">2.4 DNS 구성<a href="#24-dns-구성" class="hash-link" aria-label="Direct link to 2.4 DNS 구성" title="Direct link to 2.4 DNS 구성">​</a></h3>
<table><thead><tr><th>도메인</th><th>목적</th></tr></thead><tbody><tr><td>api.automata-signal.com</td><td>글로벌 API 엔드포인트 (애니캐스트)</td></tr><tr><td>api-asia.automata-signal.com</td><td>아시아 리전 직접 접근 (도쿄)</td></tr><tr><td>api-eu.automata-signal.com</td><td>유럽 리전 직접 접근 (프랑크푸르트)</td></tr><tr><td>api-oce.automata-signal.com</td><td>오세아니아 리전 직접 접근 (시드니)</td></tr><tr><td>admin.automata-signal.com</td><td>관리자 대시보드 (향후 구현)</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-flyio-구성-및-배포">3. fly.io 구성 및 배포<a href="#3-flyio-구성-및-배포" class="hash-link" aria-label="Direct link to 3. fly.io 구성 및 배포" title="Direct link to 3. fly.io 구성 및 배포">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-flytoml-구성">3.1 fly.toml 구성<a href="#31-flytoml-구성" class="hash-link" aria-label="Direct link to 3.1 fly.toml 구성" title="Direct link to 3.1 fly.toml 구성">​</a></h3>
<p>Automata-Signal의 기본 <code>fly.toml</code> 설정:</p>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># fly.toml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app = &quot;automata-signal&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">primary_region = &quot;nrt&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[env]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PHX_HOST = &quot;api.automata-signal.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PORT = &quot;8080&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  RELEASE_COOKIE = &quot;release_cookie_value_here&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  NODE_COOKIE = &quot;node_cookie_value_here&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  FLY_REGION = &quot;nrt&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  FLY_APP_NAME = &quot;automata-signal&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DATABASE_URL = &quot;ecto://postgres:password@top1.nearest.of.automata-signal-db.internal:5432/automata_signal&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SECRET_KEY_BASE = &quot;secret_key_base_value_here&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[http_service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  internal_port = 8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  force_https = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  auto_stop_machines = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  auto_start_machines = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  min_machines_running = 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  processes = [&quot;app&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [http_service.concurrency]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type = &quot;connections&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hard_limit = 1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    soft_limit = 800</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[[services]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  protocol = &quot;tcp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  internal_port = 4369</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  processes = [&quot;app&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [[services.ports]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    port = 4369</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[metrics]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  port = 9090</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  path = &quot;/metrics&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[[vm]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cpu_kind = &quot;shared&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cpus = 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  memory_mb = 8192</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[deploy]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  strategy = &quot;rolling&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  release_command = &quot;eval &#x27;Automata.Release.migrate&#x27;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[mounts]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  source = &quot;automata_storage&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  destination = &quot;/app/uploads&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-dockerfile">3.2 Dockerfile<a href="#32-dockerfile" class="hash-link" aria-label="Direct link to 3.2 Dockerfile" title="Direct link to 3.2 Dockerfile">​</a></h3>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FROM hexpm/elixir:1.18.0-erlang-27.0.0-debian-bullseye-20240311 as build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 빌드 환경 설정</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENV MIX_ENV=prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 의존성 파일 복사 및 설치</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY mix.exs mix.lock ./</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY config config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY apps apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN mix local.hex --force &amp;&amp; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mix local.rebar --force &amp;&amp; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mix deps.get --only prod &amp;&amp; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mix deps.compile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 릴리스 빌드</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN mix compile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN mix release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 실행 이미지 준비</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM debian:bullseye-slim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 런타임 의존성 설치</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt-get update -y &amp;&amp; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apt-get install -y libstdc++6 openssl libncurses5 locales ca-certificates &amp;&amp; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apt-get clean &amp;&amp; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rm -f /var/lib/apt/lists/*_*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 로케일 설정</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN sed -i &#x27;/en_US.UTF-8/s/^# //g&#x27; /etc/locale.gen &amp;&amp; locale-gen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENV LANG en_US.UTF-8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENV LANGUAGE en_US:en</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENV LC_ALL en_US.UTF-8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY --from=build /app/_build/prod/rel/automata ./</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 앱 실행</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD [&quot;/app/bin/automata&quot;, &quot;start&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-리전별-배포-전략">3.3 리전별 배포 전략<a href="#33-리전별-배포-전략" class="hash-link" aria-label="Direct link to 3.3 리전별 배포 전략" title="Direct link to 3.3 리전별 배포 전략">​</a></h3>
<p>각 리전은 별도의 fly 앱으로 배포하여 독립적으로 관리합니다:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 도쿄 리전 배포</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fly deploy --app automata-signal-nrt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 프랑크푸르트 리전 배포</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fly deploy --app automata-signal-fra</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 시드니 리전 배포</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fly deploy --app automata-signal-syd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-스케일링-설정">3.4 스케일링 설정<a href="#34-스케일링-설정" class="hash-link" aria-label="Direct link to 3.4 스케일링 설정" title="Direct link to 3.4 스케일링 설정">​</a></h3>
<p>자동 스케일링을 위한 구성:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 최소 노드 수 설정</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fly scale count 4 --app automata-signal-nrt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fly scale count 4 --app automata-signal-fra</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fly scale count 4 --app automata-signal-syd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># VM 크기 설정</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fly scale vm shared-cpu-4x:8gb --app automata-signal-nrt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fly scale vm shared-cpu-4x:8gb --app automata-signal-fra</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fly scale vm shared-cpu-4x:8gb --app automata-signal-syd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="35-데이터베이스-배포">3.5 데이터베이스 배포<a href="#35-데이터베이스-배포" class="hash-link" aria-label="Direct link to 3.5 데이터베이스 배포" title="Direct link to 3.5 데이터베이스 배포">​</a></h3>
<p>PostgreSQL 클러스터 생성 및 구성:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 프라이머리 데이터베이스 생성 (도쿄)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fly postgres create --name automata-signal-db --region nrt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 읽기 복제본 추가 (프랑크푸르트)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fly postgres attach --postgres-app automata-signal-db --app automata-signal-fra</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 읽기 복제본 추가 (시드니)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fly postgres attach --postgres-app automata-signal-db --app automata-signal-syd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-분산-elixir-클러스터-구성">4. 분산 Elixir 클러스터 구성<a href="#4-분산-elixir-클러스터-구성" class="hash-link" aria-label="Direct link to 4. 분산 Elixir 클러스터 구성" title="Direct link to 4. 분산 Elixir 클러스터 구성">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-libcluster-설정">4.1 libcluster 설정<a href="#41-libcluster-설정" class="hash-link" aria-label="Direct link to 4.1 libcluster 설정" title="Direct link to 4.1 libcluster 설정">​</a></h3>
<p>Elixir 노드 간의 자동 클러스터링을 위한 libcluster 구성:</p>
<div class="language-elixir codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-elixir codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># config/prod.exs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token atom symbol" style="color:#36acaa">:libcluster</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">topologies:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">fly6pn:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">strategy:</span><span class="token plain"> </span><span class="token module class-name">Cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">DNSPoll</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">config:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token attr-name" style="color:#00a4db">polling_interval:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5_000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token attr-name" style="color:#00a4db">query:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;#{System.get_env(&quot;</span><span class="token module class-name">FLY_APP_NAME</span><span class="token string" style="color:#e3116c">&quot;)}.internal&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token attr-name" style="color:#00a4db">node_basename:</span><span class="token plain"> </span><span class="token module class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get_env</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;FLY_APP_NAME&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">global_cluster:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">strategy:</span><span class="token plain"> </span><span class="token module class-name">Elixir</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Cluster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Gossip</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">config:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token attr-name" style="color:#00a4db">secret:</span><span class="token plain"> </span><span class="token module class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get_env</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;CLUSTER_SECRET&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token attr-name" style="color:#00a4db">hosts:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          :</span><span class="token string" style="color:#e3116c">&quot;automata-signal-nrt@fly-global-services&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          :</span><span class="token string" style="color:#e3116c">&quot;automata-signal-fra@fly-global-services&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          :</span><span class="token string" style="color:#e3116c">&quot;automata-signal-syd@fly-global-services&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-erlang-분산-설정">4.2 Erlang 분산 설정<a href="#42-erlang-분산-설정" class="hash-link" aria-label="Direct link to 4.2 Erlang 분산 설정" title="Direct link to 4.2 Erlang 분산 설정">​</a></h3>
<p>Erlang 분산 프로토콜 설정:</p>
<div class="language-elixir codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-elixir codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># config/runtime.exs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token atom symbol" style="color:#36acaa">:automata</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:distributed</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">cookie:</span><span class="token plain"> </span><span class="token module class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetch_env!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;NODE_COOKIE&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name:</span><span class="token plain"> :</span><span class="token string" style="color:#e3116c">&quot;#{System.get_env(&quot;</span><span class="token module class-name">FLY_APP_NAME</span><span class="token string" style="color:#e3116c">&quot;)}@#{System.get_env(&quot;</span><span class="token module class-name">FLY_PRIVATE_IP</span><span class="token string" style="color:#e3116c">&quot;)}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="43-분산-phoenix-pubsub-구성">4.3 분산 Phoenix PubSub 구성<a href="#43-분산-phoenix-pubsub-구성" class="hash-link" aria-label="Direct link to 4.3 분산 Phoenix PubSub 구성" title="Direct link to 4.3 분산 Phoenix PubSub 구성">​</a></h3>
<p>노드 간 이벤트 공유를 위한 PubSub 구성:</p>
<div class="language-elixir codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-elixir codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># lib/automata/application.ex</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_type</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  children </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ... 다른 자식 프로세스들 ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token module class-name">Phoenix</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">PubSub</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">name:</span><span class="token plain"> </span><span class="token module class-name">Automata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">PubSub</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token module class-name">Phoenix</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">PubSub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">PG2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">name:</span><span class="token plain"> </span><span class="token module class-name">Automata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">GlobalPubSub</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">adapter_name:</span><span class="token plain"> </span><span class="token module class-name">Automata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">PubSub</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="44-분산-캐시-구성">4.4 분산 캐시 구성<a href="#44-분산-캐시-구성" class="hash-link" aria-label="Direct link to 4.4 분산 캐시 구성" title="Direct link to 4.4 분산 캐시 구성">​</a></h3>
<p>전역 상태 및 캐시 관리를 위한 Nebulex 설정:</p>
<div class="language-elixir codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-elixir codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># lib/automata/cache.ex</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">Automata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Cache</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token module class-name">Nebulex</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Cache</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">otp_app:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:automata</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">adapter:</span><span class="token plain"> </span><span class="token module class-name">Nebulex</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Partitioned</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># config/prod.exs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token atom symbol" style="color:#36acaa">:automata</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token module class-name">Automata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Cache</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">backend:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:shards</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">partitions:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">distributed:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">name:</span><span class="token plain"> </span><span class="token module class-name">Automata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">DistributedCache</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">only_nodes:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-데이터베이스-연결-관리">5. 데이터베이스 연결 관리<a href="#5-데이터베이스-연결-관리" class="hash-link" aria-label="Direct link to 5. 데이터베이스 연결 관리" title="Direct link to 5. 데이터베이스 연결 관리">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-ecto-리포지토리-설정">5.1 Ecto 리포지토리 설정<a href="#51-ecto-리포지토리-설정" class="hash-link" aria-label="Direct link to 5.1 Ecto 리포지토리 설정" title="Direct link to 5.1 Ecto 리포지토리 설정">​</a></h3>
<p>PostgreSQL 연결 설정:</p>
<div class="language-elixir codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-elixir codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># config/prod.exs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token atom symbol" style="color:#36acaa">:automata</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token module class-name">Automata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Repo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">adapter:</span><span class="token plain"> </span><span class="token module class-name">Ash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Postgres</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Repo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">url:</span><span class="token plain"> </span><span class="token module class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get_env</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;DATABASE_URL&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">pool_size:</span><span class="token plain"> </span><span class="token module class-name">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">to_integer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token module class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get_env</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;POOL_SIZE&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;30&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">socket_options:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token atom symbol" style="color:#36acaa">:inet6</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">ssl:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">ssl_opts:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">verify:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:verify_peer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">cacertfile:</span><span class="token plain"> </span><span class="token module class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get_env</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;FLY_DB_CA_CERT&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/etc/ssl/certs/ca-certificates.crt&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">server_name_indication:</span><span class="token plain"> </span><span class="token module class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get_env</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;FLY_DB_HOST&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|&gt;</span><span class="token plain"> </span><span class="token module class-name">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">to_charlist</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="52-읽기쓰기-분리">5.2 읽기/쓰기 분리<a href="#52-읽기쓰기-분리" class="hash-link" aria-label="Direct link to 5.2 읽기/쓰기 분리" title="Direct link to 5.2 읽기/쓰기 분리">​</a></h3>
<p>읽기와 쓰기 작업을 분리하여 효율성 향상:</p>
<div class="language-elixir codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-elixir codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># lib/automata/repo.ex</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">Automata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Repo</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token module class-name">Ecto</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Repo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">otp_app:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:automata</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">adapter:</span><span class="token plain"> </span><span class="token module class-name">Ecto</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Postgres</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">Automata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">ReadOnlyRepo</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token module class-name">Ecto</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Repo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">otp_app:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:automata</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">adapter:</span><span class="token plain"> </span><span class="token module class-name">Ecto</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Postgres</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token module class-name">Keyword</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:url</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token module class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get_env</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;DATABASE_READ_REPLICA_URL&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token module class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get_env</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;DATABASE_URL&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:ok</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 사용 예시</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">Automata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">QueryService</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_analytics_data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">params</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 읽기 전용 쿼리는 읽기 복제본 사용</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token module class-name">Automata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">ReadOnlyRepo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">analytics_query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">params</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">update_record</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> params</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 쓰기 작업은 주 데이터베이스 사용</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token module class-name">Automata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Repo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="53-연결-풀-최적화">5.3 연결 풀 최적화<a href="#53-연결-풀-최적화" class="hash-link" aria-label="Direct link to 5.3 연결 풀 최적화" title="Direct link to 5.3 연결 풀 최적화">​</a></h3>
<p>데이터베이스 연결 풀 최적화 설정:</p>
<div class="language-elixir codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-elixir codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># config/prod.exs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token atom symbol" style="color:#36acaa">:automata</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token module class-name">Automata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Repo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">pool_size:</span><span class="token plain"> </span><span class="token module class-name">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">to_integer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token module class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get_env</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;POOL_SIZE&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;30&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">queue_target:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">queue_interval:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">timeout:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token atom symbol" style="color:#36acaa">:automata</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token module class-name">Automata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">ReadOnlyRepo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">pool_size:</span><span class="token plain"> </span><span class="token module class-name">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">to_integer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token module class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get_env</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;RO_POOL_SIZE&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;50&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">queue_target:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">queue_interval:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">timeout:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="54-데이터베이스-마이그레이션">5.4 데이터베이스 마이그레이션<a href="#54-데이터베이스-마이그레이션" class="hash-link" aria-label="Direct link to 5.4 데이터베이스 마이그레이션" title="Direct link to 5.4 데이터베이스 마이그레이션">​</a></h3>
<p>배포 중 안전한 데이터베이스 마이그레이션 방법:</p>
<div class="language-elixir codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-elixir codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># lib/automata/release.ex</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">Automata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Release</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attribute variable" style="color:#36acaa">@app</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:automata</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> migrate </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">load_app</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> repo </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">repos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:ok</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token module class-name">Ecto</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Migrator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">with_repo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">repo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token module class-name">Ecto</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Migrator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token argument variable" style="color:#36acaa">&amp;1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:up</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">all:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rollback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">repo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> version</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">load_app</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:ok</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token module class-name">Ecto</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Migrator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">with_repo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">repo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token module class-name">Ecto</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Migrator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token argument variable" style="color:#36acaa">&amp;1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:down</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">to:</span><span class="token plain"> version</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">defp</span><span class="token plain"> repos </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token module class-name">Application</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetch_env!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attribute variable" style="color:#36acaa">@app</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:ecto_repos</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">defp</span><span class="token plain"> load_app </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token module class-name">Application</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attribute variable" style="color:#36acaa">@app</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-cicd-파이프라인">6. CI/CD 파이프라인<a href="#6-cicd-파이프라인" class="hash-link" aria-label="Direct link to 6. CI/CD 파이프라인" title="Direct link to 6. CI/CD 파이프라인">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="61-cicd-파이프라인">6.1 CI/CD 파이프라인<a href="#61-cicd-파이프라인" class="hash-link" aria-label="Direct link to 6.1 CI/CD 파이프라인" title="Direct link to 6.1 CI/CD 파이프라인">​</a></h3>
<p>Automata-Signal은 GitHub Actions를 활용한 지속적 통합 및 배포(CI/CD) 파이프라인을 구현합니다. 이를 통해 코드 품질 검증부터 다중 환경 자동 배포까지 완전 자동화된 워크플로우를 제공합니다.</p>
<p>파이프라인은 다음 주요 단계로 구성됩니다:</p>
<ol>
<li><strong>코드 품질 및 테스트 검증</strong>: 모든 코드 변경에 대해 자동으로 코드 품질 검사 및 테스트 실행</li>
<li><strong>환경별 자동 배포</strong>: 특정 브랜치에 대한 변경사항을 해당 환경에 자동 배포<!-- -->
<ul>
<li>개발(Development): develop 브랜치 변경 시</li>
<li>스테이징(Staging): 수동 트리거 시</li>
<li>프로덕션(Production): main 브랜치 변경 시 (리전별 배포)</li>
</ul>
</li>
</ol>
<p>프로젝트의 CI/CD 파이프라인 구성에 대한 자세한 내용은 [GUIDE-003] 개발 워크플로우 문서를 참조하세요.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="62-배포-전략">6.2 배포 전략<a href="#62-배포-전략" class="hash-link" aria-label="Direct link to 6.2 배포 전략" title="Direct link to 6.2 배포 전략">​</a></h3>
<p>Automata-Signal은 무중단 배포를 위한 롤링 업데이트 전략을 채택하고 있습니다:</p>
<ol>
<li>각 리전의 노드를 한 번에 하나씩 업데이트</li>
<li>노드 교체 전 상태 점검 및 트래픽 드레이닝</li>
<li>배포 중 지속적인 상태 모니터링</li>
<li>문제 발생 시 자동 롤백 수행</li>
</ol>
<p>fly.toml의 <code>[deploy]</code> 섹션에서 <code>strategy = &quot;rolling&quot;</code> 설정을 통해 이를 구현합니다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="63-환경별-구성">6.3 환경별 구성<a href="#63-환경별-구성" class="hash-link" aria-label="Direct link to 6.3 환경별 구성" title="Direct link to 6.3 환경별 구성">​</a></h3>
<p>시스템은 다음과 같은 환경 구성을 가집니다:</p>
<table><thead><tr><th>환경</th><th>애플리케이션 이름</th><th>목적</th><th>구성 파일</th></tr></thead><tbody><tr><td>개발</td><td>automata-signal-dev</td><td>개발자 테스트</td><td>fly.dev.toml</td></tr><tr><td>스테이징</td><td>automata-signal-staging</td><td>QA 및 통합 테스트</td><td>fly.staging.toml</td></tr><tr><td>프로덕션</td><td>automata-signal-<code>{nrt,fra,syd}</code></td><td>실제 사용자 서비스</td><td>fly.prod.<code>{리전}</code>.toml</td></tr></tbody></table>
<p>각 환경은 독립된 fly.io 앱으로 배포되며, 환경별로 분리된 구성 파일을 통해 설정을 관리합니다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="64-비밀-관리">6.4 비밀 관리<a href="#64-비밀-관리" class="hash-link" aria-label="Direct link to 6.4 비밀 관리" title="Direct link to 6.4 비밀 관리">​</a></h3>
<p>민감한 구성 정보를 안전하게 관리하기 위한 전략:</p>
<ol>
<li>GitHub Secrets를 통한 CI/CD 비밀 관리</li>
<li>fly.io 비밀 관리 서비스를 통한 런타임 비밀 관리</li>
<li>환경 변수 기반 구성 로드</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 런타임 비밀 설정</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fly secrets set NODE_COOKIE=&lt;secret_value&gt; --app automata-signal-nrt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fly secrets set APNS_KEY_ID=&lt;secret_value&gt; --app automata-signal-nrt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fly secrets set FCM_SERVER_KEY=&lt;secret_value&gt; --app automata-signal-nrt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-확장-전략">7. 확장 전략<a href="#7-확장-전략" class="hash-link" aria-label="Direct link to 7. 확장 전략" title="Direct link to 7. 확장 전략">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="71-수평적-확장">7.1 수평적 확장<a href="#71-수평적-확장" class="hash-link" aria-label="Direct link to 7.1 수평적 확장" title="Direct link to 7.1 수평적 확장">​</a></h3>
<p>트래픽 증가에 따른 수평적 확장 전략:</p>
<ol>
<li>
<p><strong>새 노드 추가</strong>: 리전별 노드 수 증가</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fly scale count 8 --app automata-signal-nrt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>새 리전 추가</strong>: 주요 사용자 지역에 새 리전 배포</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 예: IAD(북미, 버지니아) 리전 추가</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fly regions add iad --app automata-signal-iad</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>자동 스케일링</strong>: 트래픽 기반 자동 스케일링 설정</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fly autoscale set min=4 max=8 --app automata-signal-nrt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="72-데이터베이스-확장">7.2 데이터베이스 확장<a href="#72-데이터베이스-확장" class="hash-link" aria-label="Direct link to 7.2 데이터베이스 확장" title="Direct link to 7.2 데이터베이스 확장">​</a></h3>
<p>데이터 볼륨 증가에 따른 데이터베이스 확장 전략:</p>
<ol>
<li>
<p><strong>수직적 확장</strong>: 더 큰 VM으로 데이터베이스 업그레이드</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fly postgres update vm-size --vm-size performance-8x --app automata-signal-db</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>스토리지 확장</strong>: 데이터베이스 볼륨 확장</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fly volumes extend vol_123abcd --size 1000 --app automata-signal-db</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>읽기 전용 복제본 추가</strong>: 읽기 작업 분산을 위한 추가 복제본 배포</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fly postgres create --name automata-signal-db-ro --region nrt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>향후 샤딩 전략</strong>: 대규모 데이터를 위한 샤딩 아키텍처 준비</p>
<ul>
<li>시간 기반 샤딩</li>
<li>애플리케이션 ID 기반 샤딩</li>
<li>리전 기반 샤딩</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="73-캐시-계층">7.3 캐시 계층<a href="#73-캐시-계층" class="hash-link" aria-label="Direct link to 7.3 캐시 계층" title="Direct link to 7.3 캐시 계층">​</a></h3>
<p>성능 향상을 위한 캐시 전략:</p>
<ol>
<li><strong>Nebulex 분산 캐시</strong>: 노드 간 공유 캐시</li>
<li><strong>Redis 캐시 계층</strong>: 전역 공유 상태 및 임시 데이터 저장</li>
<li><strong>CDN</strong>: 정적 자산 및 API 응답 캐싱</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="74-작업-처리-확장">7.4 작업 처리 확장<a href="#74-작업-처리-확장" class="hash-link" aria-label="Direct link to 7.4 작업 처리 확장" title="Direct link to 7.4 작업 처리 확장">​</a></h3>
<p>대규모 작업 처리를 위한 확장 전략:</p>
<ol>
<li><strong>작업 노드 분리</strong>: 전용 작업 처리 노드 배포</li>
<li><strong>작업 분산</strong>: 작업 유형별 전용 큐 및 워커 설정</li>
<li><strong>우선순위 큐</strong>: 중요 작업 우선 처리</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="8-고가용성-및-장애-허용성">8. 고가용성 및 장애 허용성<a href="#8-고가용성-및-장애-허용성" class="hash-link" aria-label="Direct link to 8. 고가용성 및 장애 허용성" title="Direct link to 8. 고가용성 및 장애 허용성">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="81-리전-장애-대응">8.1 리전 장애 대응<a href="#81-리전-장애-대응" class="hash-link" aria-label="Direct link to 8.1 리전 장애 대응" title="Direct link to 8.1 리전 장애 대응">​</a></h3>
<p>단일 리전 장애 시 대응 전략:</p>
<ol>
<li><strong>트래픽 페일오버</strong>: 자동 트래픽 재라우팅</li>
<li><strong>데이터베이스 페일오버</strong>: 복제본을 기본 데이터베이스로 승격</li>
<li><strong>복구 자동화</strong>: 장애 복구 프로세스 자동화</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="82-데이터베이스-장애-대응">8.2 데이터베이스 장애 대응<a href="#82-데이터베이스-장애-대응" class="hash-link" aria-label="Direct link to 8.2 데이터베이스 장애 대응" title="Direct link to 8.2 데이터베이스 장애 대응">​</a></h3>
<p>데이터베이스 장애 시 대응 전략:</p>
<ol>
<li><strong>읽기 전용 모드</strong>: 기본 DB 장애 시 읽기 전용 모드 운영</li>
<li><strong>자동 복구</strong>: 오류 감지 및 자동 복구 시퀀스</li>
<li><strong>백업 복원</strong>: 최신 백업에서 신속한 복원</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="83-노드-장애-대응">8.3 노드 장애 대응<a href="#83-노드-장애-대응" class="hash-link" aria-label="Direct link to 8.3 노드 장애 대응" title="Direct link to 8.3 노드 장애 대응">​</a></h3>
<p>단일 노드 장애 시 대응 전략:</p>
<ol>
<li><strong>상태 점검</strong>: 정기적인 노드 상태 점검</li>
<li><strong>자동 재시작</strong>: 장애 노드 자동 재시작</li>
<li><strong>트래픽 우회</strong>: 장애 노드로의 트래픽 차단</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="84-다중-리전-복원력">8.4 다중 리전 복원력<a href="#84-다중-리전-복원력" class="hash-link" aria-label="Direct link to 8.4 다중 리전 복원력" title="Direct link to 8.4 다중 리전 복원력">​</a></h3>
<p>전역 서비스 가용성을 위한 전략:</p>
<ol>
<li><strong>리전 격리</strong>: 리전 간 장애 격리</li>
<li><strong>데이터 복제</strong>: 주요 데이터 다중 리전 복제</li>
<li><strong>분산 작업 복구</strong>: 작업 복구 및 재시도 메커니즘</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="9-모니터링-및-알림">9. 모니터링 및 알림<a href="#9-모니터링-및-알림" class="hash-link" aria-label="Direct link to 9. 모니터링 및 알림" title="Direct link to 9. 모니터링 및 알림">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="91-모니터링-아키텍처">9.1 모니터링 아키텍처<a href="#91-모니터링-아키텍처" class="hash-link" aria-label="Direct link to 9.1 모니터링 아키텍처" title="Direct link to 9.1 모니터링 아키텍처">​</a></h3>
<p>시스템 상태 모니터링을 위한 아키텍처:</p>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="92-핵심-지표">9.2 핵심 지표<a href="#92-핵심-지표" class="hash-link" aria-label="Direct link to 9.2 핵심 지표" title="Direct link to 9.2 핵심 지표">​</a></h3>
<p>모니터링할 핵심 시스템 지표:</p>
<ol>
<li>
<p><strong>시스템 지표</strong>:</p>
<ul>
<li>CPU 사용률</li>
<li>메모리 사용량</li>
<li>디스크 I/O</li>
<li>네트워크 트래픽</li>
</ul>
</li>
<li>
<p><strong>애플리케이션 지표</strong>:</p>
<ul>
<li>API 요청 처리량</li>
<li>응답 시간</li>
<li>오류율</li>
<li>동시 연결 수</li>
</ul>
</li>
<li>
<p><strong>비즈니스 지표</strong>:</p>
<ul>
<li>메시지 처리량</li>
<li>전송 성공률</li>
<li>메시지 전환율</li>
<li>채널별 성능</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="93-로깅-전략">9.3 로깅 전략<a href="#93-로깅-전략" class="hash-link" aria-label="Direct link to 9.3 로깅 전략" title="Direct link to 9.3 로깅 전략">​</a></h3>
<p>시스템 로그 관리 전략:</p>
<ol>
<li><strong>구조화된 로깅</strong>: JSON 형식 로그 생성</li>
<li><strong>중앙 로그 집계</strong>: Loki를 통한 로그 저장 및 쿼리</li>
<li><strong>로그 수준 관리</strong>: 환경별 로그 수준 조정</li>
<li><strong>로그 보존 정책</strong>: 로그 유형별 보존 기간 설정</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="94-알림-설정">9.4 알림 설정<a href="#94-알림-설정" class="hash-link" aria-label="Direct link to 9.4 알림 설정" title="Direct link to 9.4 알림 설정">​</a></h3>
<p>중요 이벤트 감지 및 알림 전략:</p>
<ol>
<li>
<p><strong>심각도 수준</strong>:</p>
<ul>
<li>긴급: 즉시 대응 필요한 프로덕션 장애</li>
<li>주요: 성능 저하 또는 부분적 장애</li>
<li>경고: 잠재적 문제 징후</li>
<li>정보: 일반 정보 알림</li>
</ul>
</li>
<li>
<p><strong>알림 채널</strong>:</p>
<ul>
<li>Slack: 팀 알림</li>
<li>이메일: 요약 및 일일 보고서</li>
<li>PagerDuty: 긴급 상황 온콜 알림</li>
</ul>
</li>
<li>
<p><strong>알림 규칙 예시</strong>:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 알림 규칙 예시</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">groups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> automata_signal_alerts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">alert</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HighErrorRate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">expr</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sum(rate(http_requests_total</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">status=~&quot;5..&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">5m</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">)) / sum(rate(http_requests_total</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">5m</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">)) </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> 0.05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">for</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 2m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">severity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> critical</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">summary</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;High error rate detected&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Error rate is above 5% for the past 2 minutes&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="10-재해-복구">10. 재해 복구<a href="#10-재해-복구" class="hash-link" aria-label="Direct link to 10. 재해 복구" title="Direct link to 10. 재해 복구">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="101-백업-전략">10.1 백업 전략<a href="#101-백업-전략" class="hash-link" aria-label="Direct link to 10.1 백업 전략" title="Direct link to 10.1 백업 전략">​</a></h3>
<p>데이터 손실 방지를 위한 백업 전략:</p>
<ol>
<li>
<p><strong>정기 백업</strong>:</p>
<ul>
<li>일일 전체 백업</li>
<li>6시간 간격 차등 백업</li>
<li>1시간 간격 증분 백업</li>
</ul>
</li>
<li>
<p><strong>백업 저장소</strong>:</p>
<ul>
<li>리전별 기본 백업</li>
<li>다중 리전 복제 백업</li>
<li>장기 보존을 위한 냉각 저장소</li>
</ul>
</li>
<li>
<p><strong>백업 점검</strong>:</p>
<ul>
<li>정기적인 백업 복원 테스트</li>
<li>백업 무결성 확인</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="102-재해-복구-계획">10.2 재해 복구 계획<a href="#102-재해-복구-계획" class="hash-link" aria-label="Direct link to 10.2 재해 복구 계획" title="Direct link to 10.2 재해 복구 계획">​</a></h3>
<p>주요 재해 시나리오에 대한 복구 계획:</p>
<ol>
<li>
<p><strong>리전 장애 복구</strong>:</p>
<ul>
<li>장애 리전 감지</li>
<li>트래픽 재라우팅</li>
<li>새 리전에 인프라 재배포</li>
<li>데이터 복구</li>
</ul>
</li>
<li>
<p><strong>데이터베이스 장애 복구</strong>:</p>
<ul>
<li>복제본 승격</li>
<li>읽기/쓰기 엔드포인트 재구성</li>
<li>새 복제본 생성</li>
<li>장애 노드 복구</li>
</ul>
</li>
<li>
<p><strong>애플리케이션 장애 복구</strong>:</p>
<ul>
<li>장애 노드 식별</li>
<li>노드 교체</li>
<li>클러스터 재구성</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="103-복구-시간-목표">10.3 복구 시간 목표<a href="#103-복구-시간-목표" class="hash-link" aria-label="Direct link to 10.3 복구 시간 목표" title="Direct link to 10.3 복구 시간 목표">​</a></h3>
<p>서비스 복구 목표:</p>
<table><thead><tr><th>장애 유형</th><th>RTO (복구 시간 목표)</th><th>RPO (복구 지점 목표)</th></tr></thead><tbody><tr><td>단일 노드 장애</td><td>5분</td><td>0 (데이터 손실 없음)</td></tr><tr><td>단일 리전 장애</td><td>15분</td><td>5분</td></tr><tr><td>데이터베이스 장애</td><td>30분</td><td>15분</td></tr><tr><td>다중 리전 장애</td><td>2시간</td><td>30분</td></tr><tr><td>재해 수준 장애</td><td>4시간</td><td>1시간</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="104-재해-복구-테스트">10.4 재해 복구 테스트<a href="#104-재해-복구-테스트" class="hash-link" aria-label="Direct link to 10.4 재해 복구 테스트" title="Direct link to 10.4 재해 복구 테스트">​</a></h3>
<p>재해 복구 계획 검증을 위한 정기 테스트:</p>
<ol>
<li><strong>정기 훈련</strong>: 분기별 DR 시뮬레이션</li>
<li><strong>카오스 엔지니어링</strong>: 임의 장애 주입 테스트</li>
<li><strong>리전 페일오버 테스트</strong>: 리전 간 전환 테스트</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="11-보안-아키텍처">11. 보안 아키텍처<a href="#11-보안-아키텍처" class="hash-link" aria-label="Direct link to 11. 보안 아키텍처" title="Direct link to 11. 보안 아키텍처">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="111-네트워크-보안">11.1 네트워크 보안<a href="#111-네트워크-보안" class="hash-link" aria-label="Direct link to 11.1 네트워크 보안" title="Direct link to 11.1 네트워크 보안">​</a></h3>
<p>네트워크 보안 아키텍처:</p>
<ol>
<li><strong>TLS/SSL</strong>: 모든 통신에 TLS 1.3 암호화</li>
<li><strong>IP 제한</strong>: 관리 인터페이스 접근 제한</li>
<li><strong>WAF</strong>: 웹 애플리케이션 방화벽 보호</li>
<li><strong>DDoS 방어</strong>: 분산 서비스 거부 공격 방어 메커니즘</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="112-애플리케이션-보안">11.2 애플리케이션 보안<a href="#112-애플리케이션-보안" class="hash-link" aria-label="Direct link to 11.2 애플리케이션 보안" title="Direct link to 11.2 애플리케이션 보안">​</a></h3>
<p>애플리케이션 레벨 보안:</p>
<ol>
<li><strong>API 인증</strong>: API 키 및 JWT 기반 인증</li>
<li><strong>접근 제어</strong>: 세분화된 권한 관리</li>
<li><strong>입력 검증</strong>: 모든 사용자 입력 검증</li>
<li><strong>의존성 검사</strong>: 정기적인 의존성 취약점 검사</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="113-데이터-보안">11.3 데이터 보안<a href="#113-데이터-보안" class="hash-link" aria-label="Direct link to 11.3 데이터 보안" title="Direct link to 11.3 데이터 보안">​</a></h3>
<p>데이터 보안 방식:</p>
<ol>
<li><strong>저장 데이터 암호화</strong>: 민감 데이터 암호화 (ash_cloak)</li>
<li><strong>전송 중 암호화</strong>: TLS를 통한 모든 데이터 암호화</li>
<li><strong>접근 로깅</strong>: 민감 데이터 접근 감사 로깅</li>
<li><strong>데이터 최소화</strong>: 필요한 최소한의 데이터만 저장</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="114-인증-및-인가">11.4 인증 및 인가<a href="#114-인증-및-인가" class="hash-link" aria-label="Direct link to 11.4 인증 및 인가" title="Direct link to 11.4 인증 및 인가">​</a></h3>
<p>사용자 및 API 인증 메커니즘:</p>
<ol>
<li><strong>API 키 관리</strong>: 앱별 API 키 관리</li>
<li><strong>토큰 회전</strong>: 정기적 API 키 갱신</li>
<li><strong>세션 관리</strong>: 안전한 관리자 세션 처리</li>
<li><strong>역할 기반 권한</strong>: 세분화된 접근 제어 모델</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="12-성능-최적화">12. 성능 최적화<a href="#12-성능-최적화" class="hash-link" aria-label="Direct link to 12. 성능 최적화" title="Direct link to 12. 성능 최적화">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="121-처리량-최적화">12.1 처리량 최적화<a href="#121-처리량-최적화" class="hash-link" aria-label="Direct link to 12.1 처리량 최적화" title="Direct link to 12.1 처리량 최적화">​</a></h3>
<p>높은 처리량을 위한 최적화:</p>
<ol>
<li><strong>병렬 처리</strong>: 멀티코어 활용 병렬 작업 처리</li>
<li><strong>비동기 처리</strong>: 작업 큐 기반 비동기 처리</li>
<li><strong>배치 처리</strong>: 대량 작업 배치 처리</li>
<li><strong>연결 풀링</strong>: 효율적인 리소스 활용</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="122-지연-시간-최적화">12.2 지연 시간 최적화<a href="#122-지연-시간-최적화" class="hash-link" aria-label="Direct link to 12.2 지연 시간 최적화" title="Direct link to 12.2 지연 시간 최적화">​</a></h3>
<p>낮은 지연 시간을 위한 최적화:</p>
<ol>
<li><strong>엣지 배포</strong>: 사용자에 가까운 위치 배포</li>
<li><strong>캐싱 전략</strong>: 다중 계층 캐싱 구현</li>
<li><strong>인덱스 최적화</strong>: 데이터베이스 쿼리 최적화</li>
<li><strong>콜드 경로 분리</strong>: 중요 작업 우선 처리</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="123-부하-분산">12.3 부하 분산<a href="#123-부하-분산" class="hash-link" aria-label="Direct link to 12.3 부하 분산" title="Direct link to 12.3 부하 분산">​</a></h3>
<p>효율적인 부하 분산 전략:</p>
<ol>
<li><strong>지역 기반 라우팅</strong>: 사용자에게 가장 가까운 리전으로 라우팅</li>
<li><strong>가중치 기반 분산</strong>: 노드 용량에 따른 트래픽 분산</li>
<li><strong>상태 기반 라우팅</strong>: 노드 상태에 따른 트래픽 조정</li>
<li><strong>캠페인 부하 분산</strong>: 대량 캠페인 다중 노드 분산 처리</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="13-운영-가이드라인">13. 운영 가이드라인<a href="#13-운영-가이드라인" class="hash-link" aria-label="Direct link to 13. 운영 가이드라인" title="Direct link to 13. 운영 가이드라인">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="131-일반-운영-절차">13.1 일반 운영 절차<a href="#131-일반-운영-절차" class="hash-link" aria-label="Direct link to 13.1 일반 운영 절차" title="Direct link to 13.1 일반 운영 절차">​</a></h3>
<p>일상적인 운영 작업:</p>
<ol>
<li>
<p><strong>일일 점검</strong>:</p>
<ul>
<li>시스템 상태 확인</li>
<li>오류 로그 검토</li>
<li>성능 지표 모니터링</li>
</ul>
</li>
<li>
<p><strong>주간 유지보수</strong>:</p>
<ul>
<li>비정상 노드 교체</li>
<li>성능 최적화</li>
<li>보안 패치 적용</li>
</ul>
</li>
<li>
<p><strong>월간 작업</strong>:</p>
<ul>
<li>용량 계획 검토</li>
<li>확장 요구사항 평가</li>
<li>백업 복원 테스트</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="132-인시던트-대응">13.2 인시던트 대응<a href="#132-인시던트-대응" class="hash-link" aria-label="Direct link to 13.2 인시던트 대응" title="Direct link to 13.2 인시던트 대응">​</a></h3>
<p>장애 상황 대응 절차:</p>
<ol>
<li>
<p><strong>감지 및 알림</strong>:</p>
<ul>
<li>자동 알림 수신</li>
<li>상황 평가</li>
<li>대응팀 소집</li>
</ul>
</li>
<li>
<p><strong>초기 대응</strong>:</p>
<ul>
<li>영향 평가</li>
<li>임시 조치 적용</li>
<li>사용자 커뮤니케이션</li>
</ul>
</li>
<li>
<p><strong>해결 및 복구</strong>:</p>
<ul>
<li>근본 원인 분석</li>
<li>영구적 해결책 적용</li>
<li>서비스 복원 확인</li>
</ul>
</li>
<li>
<p><strong>사후 분석</strong>:</p>
<ul>
<li>인시던트 보고서 작성</li>
<li>개선 사항 식별</li>
<li>재발 방지 대책 수립</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="133-변경-관리">13.3 변경 관리<a href="#133-변경-관리" class="hash-link" aria-label="Direct link to 13.3 변경 관리" title="Direct link to 13.3 변경 관리">​</a></h3>
<p>시스템 변경 관리 절차:</p>
<ol>
<li>
<p><strong>변경 요청</strong>:</p>
<ul>
<li>요청 목적 및 범위 정의</li>
<li>영향 평가</li>
<li>롤백 계획 수립</li>
</ul>
</li>
<li>
<p><strong>변경 승인</strong>:</p>
<ul>
<li>기술 검토</li>
<li>리스크 평가</li>
<li>최종 승인</li>
</ul>
</li>
<li>
<p><strong>변경 구현</strong>:</p>
<ul>
<li>점진적 롤아웃</li>
<li>모니터링 강화</li>
<li>테스트 검증</li>
</ul>
</li>
<li>
<p><strong>사후 검토</strong>:</p>
<ul>
<li>변경 결과 평가</li>
<li>문제점 식별</li>
<li>프로세스 개선</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="134-용량-계획">13.4 용량 계획<a href="#134-용량-계획" class="hash-link" aria-label="Direct link to 13.4 용량 계획" title="Direct link to 13.4 용량 계획">​</a></h3>
<p>리소스 용량 관리:</p>
<ol>
<li>
<p><strong>현재 사용량 분석</strong>:</p>
<ul>
<li>시스템 리소스 사용률</li>
<li>성장 추세 분석</li>
<li>병목 지점 식별</li>
</ul>
</li>
<li>
<p><strong>예측 모델링</strong>:</p>
<ul>
<li>사용자 증가 예측</li>
<li>메시지 볼륨 예측</li>
<li>스토리지 요구사항 예측</li>
</ul>
</li>
<li>
<p><strong>확장 계획</strong>:</p>
<ul>
<li>단기 확장 계획</li>
<li>중기 확장 계획</li>
<li>장기 인프라 로드맵</li>
</ul>
</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/AutomataOOO/automata_docs/tree/main/docs/automata-signal/2-designs/DESIGN-004-deployment.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/automata_docs/docs/automata-signal/designs/DESIGN-003-data-model"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">[DESIGN-003] 데이터 모델</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/automata_docs/docs/automata-signal/designs/DESIGN-004-operational-architecture"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">[DESIGN-004] 운영 아키텍처</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#요약" class="table-of-contents__link toc-highlight">요약</a></li><li><a href="#대상-독자" class="table-of-contents__link toc-highlight">대상 독자</a></li><li><a href="#1-배포-아키텍처-개요" class="table-of-contents__link toc-highlight">1. 배포 아키텍처 개요</a></li><li><a href="#2-flyio-인프라-구성" class="table-of-contents__link toc-highlight">2. fly.io 인프라 구성</a><ul><li><a href="#21-리전-및-노드-구성" class="table-of-contents__link toc-highlight">2.1 리전 및 노드 구성</a></li><li><a href="#22-데이터베이스-구성" class="table-of-contents__link toc-highlight">2.2 데이터베이스 구성</a></li><li><a href="#23-네트워크-구성" class="table-of-contents__link toc-highlight">2.3 네트워크 구성</a></li><li><a href="#24-dns-구성" class="table-of-contents__link toc-highlight">2.4 DNS 구성</a></li></ul></li><li><a href="#3-flyio-구성-및-배포" class="table-of-contents__link toc-highlight">3. fly.io 구성 및 배포</a><ul><li><a href="#31-flytoml-구성" class="table-of-contents__link toc-highlight">3.1 fly.toml 구성</a></li><li><a href="#32-dockerfile" class="table-of-contents__link toc-highlight">3.2 Dockerfile</a></li><li><a href="#33-리전별-배포-전략" class="table-of-contents__link toc-highlight">3.3 리전별 배포 전략</a></li><li><a href="#34-스케일링-설정" class="table-of-contents__link toc-highlight">3.4 스케일링 설정</a></li><li><a href="#35-데이터베이스-배포" class="table-of-contents__link toc-highlight">3.5 데이터베이스 배포</a></li></ul></li><li><a href="#4-분산-elixir-클러스터-구성" class="table-of-contents__link toc-highlight">4. 분산 Elixir 클러스터 구성</a><ul><li><a href="#41-libcluster-설정" class="table-of-contents__link toc-highlight">4.1 libcluster 설정</a></li><li><a href="#42-erlang-분산-설정" class="table-of-contents__link toc-highlight">4.2 Erlang 분산 설정</a></li><li><a href="#43-분산-phoenix-pubsub-구성" class="table-of-contents__link toc-highlight">4.3 분산 Phoenix PubSub 구성</a></li><li><a href="#44-분산-캐시-구성" class="table-of-contents__link toc-highlight">4.4 분산 캐시 구성</a></li></ul></li><li><a href="#5-데이터베이스-연결-관리" class="table-of-contents__link toc-highlight">5. 데이터베이스 연결 관리</a><ul><li><a href="#51-ecto-리포지토리-설정" class="table-of-contents__link toc-highlight">5.1 Ecto 리포지토리 설정</a></li><li><a href="#52-읽기쓰기-분리" class="table-of-contents__link toc-highlight">5.2 읽기/쓰기 분리</a></li><li><a href="#53-연결-풀-최적화" class="table-of-contents__link toc-highlight">5.3 연결 풀 최적화</a></li><li><a href="#54-데이터베이스-마이그레이션" class="table-of-contents__link toc-highlight">5.4 데이터베이스 마이그레이션</a></li></ul></li><li><a href="#6-cicd-파이프라인" class="table-of-contents__link toc-highlight">6. CI/CD 파이프라인</a><ul><li><a href="#61-cicd-파이프라인" class="table-of-contents__link toc-highlight">6.1 CI/CD 파이프라인</a></li><li><a href="#62-배포-전략" class="table-of-contents__link toc-highlight">6.2 배포 전략</a></li><li><a href="#63-환경별-구성" class="table-of-contents__link toc-highlight">6.3 환경별 구성</a></li><li><a href="#64-비밀-관리" class="table-of-contents__link toc-highlight">6.4 비밀 관리</a></li></ul></li><li><a href="#7-확장-전략" class="table-of-contents__link toc-highlight">7. 확장 전략</a><ul><li><a href="#71-수평적-확장" class="table-of-contents__link toc-highlight">7.1 수평적 확장</a></li><li><a href="#72-데이터베이스-확장" class="table-of-contents__link toc-highlight">7.2 데이터베이스 확장</a></li><li><a href="#73-캐시-계층" class="table-of-contents__link toc-highlight">7.3 캐시 계층</a></li><li><a href="#74-작업-처리-확장" class="table-of-contents__link toc-highlight">7.4 작업 처리 확장</a></li></ul></li><li><a href="#8-고가용성-및-장애-허용성" class="table-of-contents__link toc-highlight">8. 고가용성 및 장애 허용성</a><ul><li><a href="#81-리전-장애-대응" class="table-of-contents__link toc-highlight">8.1 리전 장애 대응</a></li><li><a href="#82-데이터베이스-장애-대응" class="table-of-contents__link toc-highlight">8.2 데이터베이스 장애 대응</a></li><li><a href="#83-노드-장애-대응" class="table-of-contents__link toc-highlight">8.3 노드 장애 대응</a></li><li><a href="#84-다중-리전-복원력" class="table-of-contents__link toc-highlight">8.4 다중 리전 복원력</a></li></ul></li><li><a href="#9-모니터링-및-알림" class="table-of-contents__link toc-highlight">9. 모니터링 및 알림</a><ul><li><a href="#91-모니터링-아키텍처" class="table-of-contents__link toc-highlight">9.1 모니터링 아키텍처</a></li><li><a href="#92-핵심-지표" class="table-of-contents__link toc-highlight">9.2 핵심 지표</a></li><li><a href="#93-로깅-전략" class="table-of-contents__link toc-highlight">9.3 로깅 전략</a></li><li><a href="#94-알림-설정" class="table-of-contents__link toc-highlight">9.4 알림 설정</a></li></ul></li><li><a href="#10-재해-복구" class="table-of-contents__link toc-highlight">10. 재해 복구</a><ul><li><a href="#101-백업-전략" class="table-of-contents__link toc-highlight">10.1 백업 전략</a></li><li><a href="#102-재해-복구-계획" class="table-of-contents__link toc-highlight">10.2 재해 복구 계획</a></li><li><a href="#103-복구-시간-목표" class="table-of-contents__link toc-highlight">10.3 복구 시간 목표</a></li><li><a href="#104-재해-복구-테스트" class="table-of-contents__link toc-highlight">10.4 재해 복구 테스트</a></li></ul></li><li><a href="#11-보안-아키텍처" class="table-of-contents__link toc-highlight">11. 보안 아키텍처</a><ul><li><a href="#111-네트워크-보안" class="table-of-contents__link toc-highlight">11.1 네트워크 보안</a></li><li><a href="#112-애플리케이션-보안" class="table-of-contents__link toc-highlight">11.2 애플리케이션 보안</a></li><li><a href="#113-데이터-보안" class="table-of-contents__link toc-highlight">11.3 데이터 보안</a></li><li><a href="#114-인증-및-인가" class="table-of-contents__link toc-highlight">11.4 인증 및 인가</a></li></ul></li><li><a href="#12-성능-최적화" class="table-of-contents__link toc-highlight">12. 성능 최적화</a><ul><li><a href="#121-처리량-최적화" class="table-of-contents__link toc-highlight">12.1 처리량 최적화</a></li><li><a href="#122-지연-시간-최적화" class="table-of-contents__link toc-highlight">12.2 지연 시간 최적화</a></li><li><a href="#123-부하-분산" class="table-of-contents__link toc-highlight">12.3 부하 분산</a></li></ul></li><li><a href="#13-운영-가이드라인" class="table-of-contents__link toc-highlight">13. 운영 가이드라인</a><ul><li><a href="#131-일반-운영-절차" class="table-of-contents__link toc-highlight">13.1 일반 운영 절차</a></li><li><a href="#132-인시던트-대응" class="table-of-contents__link toc-highlight">13.2 인시던트 대응</a></li><li><a href="#133-변경-관리" class="table-of-contents__link toc-highlight">13.3 변경 관리</a></li><li><a href="#134-용량-계획" class="table-of-contents__link toc-highlight">13.4 용량 계획</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Automata, Inc.</div></div></div></footer></div>
</body>
</html>