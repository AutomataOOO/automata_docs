<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-automata-signal/progress/automata_signal_design" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Automata-Signal 설계 문서 | Automata</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://AutomataOOO.github.io/automata_docs/docs/automata-signal/progress/automata_signal_design"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Automata-Signal 설계 문서 | Automata"><meta data-rh="true" name="description" content="| 버전 | 날짜       | 변경 내용      |"><meta data-rh="true" property="og:description" content="| 버전 | 날짜       | 변경 내용      |"><link data-rh="true" rel="icon" href="/automata_docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://AutomataOOO.github.io/automata_docs/docs/automata-signal/progress/automata_signal_design"><link data-rh="true" rel="alternate" href="https://AutomataOOO.github.io/automata_docs/docs/automata-signal/progress/automata_signal_design" hreflang="en"><link data-rh="true" rel="alternate" href="https://AutomataOOO.github.io/automata_docs/docs/automata-signal/progress/automata_signal_design" hreflang="x-default"><link rel="stylesheet" href="/automata_docs/assets/css/styles.7a5bbb8d.css">
<script src="/automata_docs/assets/js/runtime~main.ac432072.js" defer="defer"></script>
<script src="/automata_docs/assets/js/main.e2eac686.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/automata_docs/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/automata_docs/"><div class="navbar__logo"><img src="/automata_docs/img/logo.svg" alt="Automata Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/automata_docs/img/logo.svg" alt="Automata Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Automata</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/automata_docs/docs/automata-signal/">Docs</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/automata_docs/docs/automata-signal/">[APP-001] Automata-Signal</a><button aria-label="Collapse sidebar category &#x27;[APP-001] Automata-Signal&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/automata_docs/docs/automata-signal/guides/GUIDE-001-getting-started">guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/automata_docs/docs/automata-signal/designs/DESIGN-001-architecture-overview">designs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/automata_docs/docs/automata-signal/components/COMP-002-adapters">components</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/automata_docs/docs/automata-signal/sequences/SEQ-001-initialization">sequences</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/automata_docs/docs/automata-signal/references/REF-002-status-codes">references</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/automata_docs/docs/automata-signal/planning/PLAN-001-requirements">planning</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/automata_docs/docs/automata-signal/progress/automata_signal_design">progress</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/automata_docs/docs/automata-signal/progress/automata_signal_design">Automata-Signal 설계 문서</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/automata_docs/docs/automata-signal/progress/automata_signal_plan">Automata-Signal 구현 계획</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/automata_docs/docs/vibe-coding/APP-000-global-rules">vibe-coding</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/automata_docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/automata_docs/docs/automata-signal/"><span itemprop="name">[APP-001] Automata-Signal</span></a><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">progress</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Automata-Signal 설계 문서</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Automata-Signal 설계 문서</h1></header>
<table><thead><tr><th>버전</th><th>날짜</th><th>변경 내용</th></tr></thead><tbody><tr><td>1.0</td><td>2025-04-04</td><td>최초 문서 작성</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-개요">1. 개요<a href="#1-개요" class="hash-link" aria-label="Direct link to 1. 개요" title="Direct link to 1. 개요">​</a></h2>
<p>Automata-Signal은 다양한 메시징 채널을 통합하여 효과적인 사용자 참여를 위한 메시징 서비스를 제공하는 플랫폼입니다. 본 문서는 Automata-Signal의 아키텍처, 주요 컴포넌트 및 데이터 흐름을 설명합니다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-아키텍처">2. 아키텍처<a href="#2-아키텍처" class="hash-link" aria-label="Direct link to 2. 아키텍처" title="Direct link to 2. 아키텍처">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-전체-시스템-아키텍처">2.1 전체 시스템 아키텍처<a href="#21-전체-시스템-아키텍처" class="hash-link" aria-label="Direct link to 2.1 전체 시스템 아키텍처" title="Direct link to 2.1 전체 시스템 아키텍처">​</a></h3>
<p>Automata-Signal은 Elixir 기반의 Ash Framework를 사용하여 구현된 확장 가능한 메시징 시스템입니다. 주요 아키텍처 구성 요소는 다음과 같습니다:</p>
<ul>
<li><strong>리소스 계층</strong>: 핵심 도메인 모델(Message, Subscription 등)을 정의</li>
<li><strong>서비스 계층</strong>: 비즈니스 로직을 캡슐화(MessageService, SubscriptionService 등)</li>
<li><strong>어댑터 계층</strong>: 다양한 메시징 채널(푸시, 이메일 등)과의 통합을 제공</li>
<li><strong>API 계층</strong>: 외부 시스템과의 통합을 위한 REST API</li>
<li><strong>비동기 작업 처리</strong>: 메시지 재시도 및 스케줄링을 위한 Oban 작업 큐</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-기술-스택">2.2 기술 스택<a href="#22-기술-스택" class="hash-link" aria-label="Direct link to 2.2 기술 스택" title="Direct link to 2.2 기술 스택">​</a></h3>
<ul>
<li><strong>백엔드</strong>: Elixir, Phoenix, Ash Framework</li>
<li><strong>데이터베이스</strong>: PostgreSQL</li>
<li><strong>확장 모듈</strong>:<!-- -->
<ul>
<li>ash_state_machine: 메시지 및 구독 상태 관리</li>
<li>ash_archival: 구독 논리적 삭제 처리</li>
<li>ash_paper_trail: 변경 이력 관리</li>
<li>ash_oban: 비동기 작업 처리</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-배포-아키텍처">2.3 배포 아키텍처<a href="#23-배포-아키텍처" class="hash-link" aria-label="Direct link to 2.3 배포 아키텍처" title="Direct link to 2.3 배포 아키텍처">​</a></h3>
<ul>
<li>글로벌 분산 배포 (fly.io)</li>
<li>멀티 리전 지원 (도쿄, 프랑크푸르트, 시드니 등)</li>
<li>근접성 기반 라우팅</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-핵심-컴포넌트">3. 핵심 컴포넌트<a href="#3-핵심-컴포넌트" class="hash-link" aria-label="Direct link to 3. 핵심 컴포넌트" title="Direct link to 3. 핵심 컴포넌트">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-도메인-모델">3.1 도메인 모델<a href="#31-도메인-모델" class="hash-link" aria-label="Direct link to 3.1 도메인 모델" title="Direct link to 3.1 도메인 모델">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="311-message">3.1.1 Message<a href="#311-message" class="hash-link" aria-label="Direct link to 3.1.1 Message" title="Direct link to 3.1.1 Message">​</a></h4>
<p>메시지 리소스는 사용자에게 전송되는 메시지 정보를 저장합니다.</p>
<table><thead><tr><th>속성</th><th>타입</th><th>설명</th></tr></thead><tbody><tr><td>id</td><td>UUID</td><td>고유 식별자</td></tr><tr><td>title</td><td>String</td><td>메시지 제목</td></tr><tr><td>body</td><td>String</td><td>메시지 본문</td></tr><tr><td>data</td><td>Map</td><td>추가 데이터(JSON)</td></tr><tr><td>user_id</td><td>UUID</td><td>메시지 수신자 ID</td></tr><tr><td>subscription_id</td><td>UUID</td><td>구독 정보 ID</td></tr><tr><td>application_id</td><td>UUID</td><td>애플리케이션 ID</td></tr><tr><td>campaign_id</td><td>UUID</td><td>캠페인 ID (옵션)</td></tr><tr><td>status</td><td>Atom</td><td>메시지 상태</td></tr><tr><td>channel_type</td><td>Atom</td><td>채널 타입</td></tr><tr><td>external_id</td><td>String</td><td>외부 시스템에서의 ID</td></tr><tr><td>sent_at</td><td>DateTime</td><td>전송 시간</td></tr><tr><td>received_at</td><td>DateTime</td><td>수신 확인 시간</td></tr><tr><td>converted_at</td><td>DateTime</td><td>열람/클릭 시간</td></tr><tr><td>failed_at</td><td>DateTime</td><td>실패 시간</td></tr><tr><td>error_reason</td><td>String</td><td>오류 이유</td></tr><tr><td>error_details</td><td>Map</td><td>상세 오류 정보</td></tr></tbody></table>
<p><strong>상태 다이어그램</strong>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pending -&gt; successful -&gt; received -&gt; converted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  v              v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">errored        failed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -----&gt; (retry) ----&gt; pending</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="312-subscription">3.1.2 Subscription<a href="#312-subscription" class="hash-link" aria-label="Direct link to 3.1.2 Subscription" title="Direct link to 3.1.2 Subscription">​</a></h4>
<p>구독 리소스는 사용자의 채널 구독 정보를 저장합니다.</p>
<table><thead><tr><th>속성</th><th>타입</th><th>설명</th></tr></thead><tbody><tr><td>id</td><td>UUID</td><td>고유 식별자</td></tr><tr><td>user_id</td><td>UUID</td><td>사용자 ID</td></tr><tr><td>application_id</td><td>UUID</td><td>애플리케이션 ID</td></tr><tr><td>type</td><td>Atom</td><td>채널 타입</td></tr><tr><td>token</td><td>String</td><td>채널 토큰</td></tr><tr><td>device_info</td><td>Map</td><td>기기 정보</td></tr><tr><td>preferences</td><td>Map</td><td>알림 설정</td></tr><tr><td>status</td><td>Atom</td><td>구독 상태</td></tr><tr><td>last_active_at</td><td>DateTime</td><td>마지막 활성 시간</td></tr><tr><td>error_details</td><td>Map</td><td>오류 정보</td></tr><tr><td>archived</td><td>Boolean</td><td>아카이브 여부</td></tr><tr><td>archived_at</td><td>DateTime</td><td>아카이브 시간</td></tr></tbody></table>
<p><strong>상태 다이어그램</strong>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">       +--&gt; active &lt;--&gt; inactive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       |      ^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unverified    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       |      v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       +--&gt; errored</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       opted_out (터미널 상태)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-어댑터-시스템">3.2 어댑터 시스템<a href="#32-어댑터-시스템" class="hash-link" aria-label="Direct link to 3.2 어댑터 시스템" title="Direct link to 3.2 어댑터 시스템">​</a></h3>
<p>어댑터 시스템은 다양한 메시징 채널과의 통합을 위한 추상화 계층을 제공합니다.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="321-channeladapter-인터페이스">3.2.1 ChannelAdapter 인터페이스<a href="#321-channeladapter-인터페이스" class="hash-link" aria-label="Direct link to 3.2.1 ChannelAdapter 인터페이스" title="Direct link to 3.2.1 ChannelAdapter 인터페이스">​</a></h4>
<p>모든 채널 어댑터가 구현해야 하는 공통 인터페이스:</p>
<div class="language-elixir codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-elixir codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token attribute variable" style="color:#36acaa">@callback</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token module class-name">Message</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">t</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:ok</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token attribute variable" style="color:#36acaa">@callback</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">validate_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token module class-name">Message</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">t</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token atom symbol" style="color:#36acaa">:ok</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reason </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">atom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> details </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token attribute variable" style="color:#36acaa">@callback</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message_id </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token module class-name">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">t</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:ok</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> status </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">atom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reason </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">atom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token attribute variable" style="color:#36acaa">@callback</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">map_error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">any</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:permanent</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reason </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">atom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> details </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:temporary</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reason </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">atom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> details </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="322-구현-어댑터">3.2.2 구현 어댑터<a href="#322-구현-어댑터" class="hash-link" aria-label="Direct link to 3.2.2 구현 어댑터" title="Direct link to 3.2.2 구현 어댑터">​</a></h4>
<ul>
<li><strong>PushAdapter</strong>: APNS 및 FCM을 사용한 푸시 알림</li>
<li><strong>EmailAdapter</strong>: 향후 구현 예정</li>
<li><strong>SMSAdapter</strong>: 향후 구현 예정</li>
<li><strong>KakaoTalkAdapter</strong>: 향후 구현 예정</li>
<li><strong>InAppAdapter</strong>: 향후 구현 예정</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-서비스-계층">3.3 서비스 계층<a href="#33-서비스-계층" class="hash-link" aria-label="Direct link to 3.3 서비스 계층" title="Direct link to 3.3 서비스 계층">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="331-messageservice">3.3.1 MessageService<a href="#331-messageservice" class="hash-link" aria-label="Direct link to 3.3.1 MessageService" title="Direct link to 3.3.1 MessageService">​</a></h4>
<p>메시지 전송 및 상태 관리를 담당하는 서비스:</p>
<ul>
<li>메시지 생성 및 전송</li>
<li>메시지 상태 업데이트 (수신 확인, 열람 확인)</li>
<li>오류 처리 및 재시도 전략</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="332-subscriptionservice">3.3.2 SubscriptionService<a href="#332-subscriptionservice" class="hash-link" aria-label="Direct link to 3.3.2 SubscriptionService" title="Direct link to 3.3.2 SubscriptionService">​</a></h4>
<p>구독 관리를 담당하는 서비스:</p>
<ul>
<li>구독 등록 및 업데이트</li>
<li>구독 활성화/비활성화</li>
<li>구독 영구 거부(opt-out)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-api-계층">3.4 API 계층<a href="#34-api-계층" class="hash-link" aria-label="Direct link to 3.4 API 계층" title="Direct link to 3.4 API 계층">​</a></h3>
<p>REST API는
아래와 같은 주요 엔드포인트를 제공합니다:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="341-구독-api">3.4.1 구독 API<a href="#341-구독-api" class="hash-link" aria-label="Direct link to 3.4.1 구독 API" title="Direct link to 3.4.1 구독 API">​</a></h4>
<ul>
<li><code>POST /api/v1/subscriptions</code> - 구독 등록</li>
<li><code>GET /api/v1/users/:user_id/subscriptions</code> - 사용자 구독 목록 조회</li>
<li><code>GET /api/v1/users/:user_id/subscriptions/:type</code> - 특정 유형의 사용자 구독 조회</li>
<li><code>PUT /api/v1/users/:user_id/subscriptions/:type/activate</code> - 구독 활성화</li>
<li><code>PUT /api/v1/users/:user_id/subscriptions/:type/deactivate</code> - 구독 비활성화</li>
<li><code>PUT /api/v1/users/:user_id/subscriptions/:type/opt-out</code> - 구독 영구 거부</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="342-메시지-api">3.4.2 메시지 API<a href="#342-메시지-api" class="hash-link" aria-label="Direct link to 3.4.2 메시지 API" title="Direct link to 3.4.2 메시지 API">​</a></h4>
<ul>
<li><code>POST /api/v1/messages</code> - 메시지 생성</li>
<li><code>GET /api/v1/messages/:id</code> - 메시지 조회</li>
<li><code>GET /api/v1/users/:user_id/messages</code> - 사용자 메시지 목록 조회</li>
<li><code>POST /api/v1/messages/:id/send</code> - 메시지 전송</li>
<li><code>PUT /api/v1/messages/:id/received</code> - 메시지 수신 확인</li>
<li><code>PUT /api/v1/messages/:id/converted</code> - 메시지 열람 확인</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-비동기-작업-처리">4. 비동기 작업 처리<a href="#4-비동기-작업-처리" class="hash-link" aria-label="Direct link to 4. 비동기 작업 처리" title="Direct link to 4. 비동기 작업 처리">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-메시지-재시도-전략">4.1 메시지 재시도 전략<a href="#41-메시지-재시도-전략" class="hash-link" aria-label="Direct link to 4.1 메시지 재시도 전략" title="Direct link to 4.1 메시지 재시도 전략">​</a></h3>
<p>일시적인 오류로 인한 메시지 전송 실패 시 재시도 전략:</p>
<ul>
<li>지수 백오프 적용 (30초, 2분, 5분, 15분, 30분)</li>
<li>최대 5회 재시도</li>
<li>영구적 오류(잘못된 토큰 등)는 재시도 없음</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-oban-작업자">4.2 Oban 작업자<a href="#42-oban-작업자" class="hash-link" aria-label="Direct link to 4.2 Oban 작업자" title="Direct link to 4.2 Oban 작업자">​</a></h3>
<ul>
<li><strong>MessageRetryWorker</strong>: 메시지 재시도 처리</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-성능-고려사항">5. 성능 고려사항<a href="#5-성능-고려사항" class="hash-link" aria-label="Direct link to 5. 성능 고려사항" title="Direct link to 5. 성능 고려사항">​</a></h2>
<ul>
<li>메시지 배치 처리</li>
<li>데이터베이스 연결 풀링 최적화</li>
<li>템플릿 캐싱</li>
<li>채널별 전송 비율 제한 관리</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-보안-고려사항">6. 보안 고려사항<a href="#6-보안-고려사항" class="hash-link" aria-label="Direct link to 6. 보안 고려사항" title="Direct link to 6. 보안 고려사항">​</a></h2>
<ul>
<li>개인 식별 정보 보호</li>
<li>API 인증 및 권한 관리</li>
<li>데이터 암호화</li>
<li>HTTPS/TLS 통신</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-확장성-계획">7. 확장성 계획<a href="#7-확장성-계획" class="hash-link" aria-label="Direct link to 7. 확장성 계획" title="Direct link to 7. 확장성 계획">​</a></h2>
<ul>
<li>멀티채널 메시징 확장</li>
<li>템플릿 시스템 구현</li>
<li>분석 시스템 통합</li>
<li>캠페인 관리 기능</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/AutomataOOO/automata_docs/tree/main/docs/automata-signal/7-progress/automata_signal_design.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/automata_docs/docs/automata-signal/planning/PLAN-001-requirements"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">[PLAN-001] 요구사항</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/automata_docs/docs/automata-signal/progress/automata_signal_plan"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Automata-Signal 구현 계획</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-개요" class="table-of-contents__link toc-highlight">1. 개요</a></li><li><a href="#2-아키텍처" class="table-of-contents__link toc-highlight">2. 아키텍처</a><ul><li><a href="#21-전체-시스템-아키텍처" class="table-of-contents__link toc-highlight">2.1 전체 시스템 아키텍처</a></li><li><a href="#22-기술-스택" class="table-of-contents__link toc-highlight">2.2 기술 스택</a></li><li><a href="#23-배포-아키텍처" class="table-of-contents__link toc-highlight">2.3 배포 아키텍처</a></li></ul></li><li><a href="#3-핵심-컴포넌트" class="table-of-contents__link toc-highlight">3. 핵심 컴포넌트</a><ul><li><a href="#31-도메인-모델" class="table-of-contents__link toc-highlight">3.1 도메인 모델</a></li><li><a href="#32-어댑터-시스템" class="table-of-contents__link toc-highlight">3.2 어댑터 시스템</a></li><li><a href="#33-서비스-계층" class="table-of-contents__link toc-highlight">3.3 서비스 계층</a></li><li><a href="#34-api-계층" class="table-of-contents__link toc-highlight">3.4 API 계층</a></li></ul></li><li><a href="#4-비동기-작업-처리" class="table-of-contents__link toc-highlight">4. 비동기 작업 처리</a><ul><li><a href="#41-메시지-재시도-전략" class="table-of-contents__link toc-highlight">4.1 메시지 재시도 전략</a></li><li><a href="#42-oban-작업자" class="table-of-contents__link toc-highlight">4.2 Oban 작업자</a></li></ul></li><li><a href="#5-성능-고려사항" class="table-of-contents__link toc-highlight">5. 성능 고려사항</a></li><li><a href="#6-보안-고려사항" class="table-of-contents__link toc-highlight">6. 보안 고려사항</a></li><li><a href="#7-확장성-계획" class="table-of-contents__link toc-highlight">7. 확장성 계획</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Automata, Inc.</div></div></div></footer></div>
</body>
</html>