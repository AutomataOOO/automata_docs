# [REQ-001] Automata-Signal 요구사항

문서 ID: REQ-001  
버전: 1.0  
작성일: 2025-04-02  
상태: 확정  
작성자: 제품팀

## 요약
본 문서는 Automata-Signal 시스템의 기능 및 비기능 요구사항을 정의합니다. 제품의 목적, 핵심 기능, 성능 특성, 확장성 및 호환성 요구사항을 포함합니다.

## 대상 독자
- 제품 관리자
- 개발팀
- QA 팀
- 이해관계자

## 1. 제품 개요

### 1.1 배경 및 목적

모바일 애플리케이션과 웹 서비스의 성장으로 사용자 참여를 유도하는 효과적인 메시징 시스템의 필요성이 증가하고 있습니다. 기존 메시징 서비스들은 확장성, 안정성, 그리고 다양한 플랫폼 및 채널 지원에 제한이 있어, 글로벌 규모의 고성능 통합 메시징 시스템 개발이 요구되었습니다.

Automata-Signal은 다양한 메시징 채널을 통합하여 효율적인 사용자 참여를 촉진하고, 개인화된 메시지 전달을 가능하게 하는 확장 가능한 메시징 플랫폼입니다.

### 1.2 주요 목표

- 확장성 있는 멀티채널 메시징 플랫폼 구축
- 메시지 상태 추적을 통한 상세한 참여 분석
- 여러 플랫폼 및 디바이스에 대한 통합 지원
- 글로벌 규모의 고성능 메시지 처리
- 안정적이고 보안이 강화된 메시징 인프라 제공

## 2. 기능 요구사항

### 2.1 멀티채널 메시징

#### [FR-101] 푸시 알림 지원
- **우선순위**: 필수
- **설명**: iOS 및 Android 플랫폼에 푸시 알림 전송 지원
- **세부사항**:
  - Apple Push Notification Service(APNS)와 Firebase Cloud Messaging(FCM) 통합
  - 디바이스 토큰 관리 및 자동 갱신
  - 알림 배지, 사운드, 액션 지원
  - 포그라운드/백그라운드 알림 처리

#### [FR-102] 이메일 채널 지원 (지원 예정)
- **우선순위**: 보통
- **설명**: 이메일을 통한 메시지 전송 지원
- **세부사항**:
  - HTML 및 텍스트 이메일 템플릿
  - 이메일 열람 및 링크 클릭 추적
  - 바운스 및 스팸 신고 처리
  - 다국어 지원

#### [FR-103] SMS 채널 지원 (지원 예정)
- **우선순위**: 보통
- **설명**: SMS를 통한 메시지 전송 지원
- **세부사항**:
  - 국제 SMS 게이트웨이 통합
  - 양방향 SMS 지원
  - 전송 상태 추적
  - 단문 링크 추적

#### [FR-104] 카카오 알림톡 지원 (지원 예정)
- **우선순위**: 보통
- **설명**: 카카오 알림톡을 통한 메시지 전송 지원
- **세부사항**:
  - 카카오 비즈니스 API 통합
  - 승인된 알림톡 템플릿 기반 메시지
  - 버튼 액션 및 리치 메시지 지원
  - 대체 SMS 발송 자동화

#### [FR-105] 인앱 메시지 지원 (지원 예정)
- **우선순위**: 낮음
- **설명**: 앱 내에서 직접 메시지를 표시하는 기능
- **세부사항**:
  - 다양한 레이아웃 템플릿 (배너, 팝업, 전체화면)
  - 트리거 기반 표시 규칙
  - 사용자 상호작용 추적
  - 오프라인 메시지 지원

### 2.2 메시지 관리

#### [FR-201] 메시지 상태 추적
- **우선순위**: 필수
- **설명**: 메시지의 전체 라이프사이클 상태 추적
- **세부사항**:
  - 전송, 도달, 열람 상태 추적
  - 상태별 타임스탬프 기록
  - 채널별 상태 추적 차이 수용
  - 실패 사유 기록 및 분류

#### [FR-202] 템플릿 관리
- **우선순위**: 필수
- **설명**: 재사용 가능한 메시지 템플릿 관리
- **세부사항**:
  - 채널별 템플릿 지원
  - 변수 치환 기능
  - 버전 관리
  - 다국어 지원

#### [FR-203] 배치 처리 및 스케줄링
- **우선순위**: 필수
- **설명**: 대량 메시지의 효율적인 처리 및 스케줄링
- **세부사항**:
  - 특정 시간에 메시지 전송 예약
  - 시간대별 최적 전송 시간 자동 선택
  - 과부하 방지를 위한 비율 제한
  - 우선순위 기반 메시지 처리

#### [FR-204] 대량 메시지 캠페인
- **우선순위**: 보통
- **설명**: 타겟팅된 대규모 메시지 캠페인 관리
- **세부사항**:
  - 사용자 세그먼트 기반 타겟팅
  - 캠페인 성과 분석
  - A/B 테스트 (지원 예정)
  - 캠페인 예약 및 반복 설정

### 2.3 구독 관리

#### [FR-301] 채널별 구독 관리
- **우선순위**: 필수
- **설명**: 사용자의 채널별 구독 상태 관리
- **세부사항**:
  - 채널별 옵트인/옵트아웃 처리
  - 구독 상태 코드 체계
  - 구독 이력 추적
  - 채널별 구독 선호도 관리

#### [FR-302] 태그 기반 세그먼테이션
- **우선순위**: 보통
- **설명**: 태그를 사용한 구독 세그먼테이션
- **세부사항**:
  - 키-값 형태의 태그 저장
  - 태그 기반 타겟팅 쿼리
  - 자동 태그 지정 규칙
  - 태그 추가/제거 API

### 2.4 SDK 및 클라이언트

#### [FR-401] 통합 SDK 제공
- **우선순위**: 필수
- **설명**: 클라이언트 앱에서 사용할 통합 SDK 제공
- **세부사항**:
  - 크로스 플랫폼 지원 (Flutter)
  - 사용자 식별 및 구독 관리
  - 메시지 수신 및 상호작용 처리
  - 인앱 메시지 표시 컴포넌트 (지원 예정)

#### [FR-402] 자동 토큰 관리
- **우선순위**: 필수
- **설명**: 푸시 알림 토큰의 자동 등록 및 갱신
- **세부사항**:
  - 토큰 변경 감지 및 자동 업데이트
  - 토큰의 로컬 캐싱
  - 토큰 등록 실패 시 재시도 로직
  - 디바이스 정보 수집 및 전송

#### [FR-403] 사용자 식별 기능
- **우선순위**: 필수
- **설명**: 앱의 사용자 ID와 구독 정보 연결
- **세부사항**:
  - 로그인/로그아웃 처리
  - 익명 상태에서 식별 상태로 전환
  - 여러 디바이스에서 동일 사용자 관리
  - 사용자 ID 영구 삭제 지원

### 2.5 관리 및 모니터링

#### [FR-501] 관리자 대시보드 (지원 예정)
- **우선순위**: 낮음
- **설명**: 시스템 관리 및 모니터링을 위한 웹 대시보드
- **세부사항**:
  - 메시지 통계 및 성과 지표
  - 캠페인 관리 인터페이스
  - 구독 관리 및 검색
  - 시스템 상태 모니터링

#### [FR-502] 분석 및 보고서
- **우선순위**: 보통
- **설명**: 메시지 성과 및 사용자 참여 분석
- **세부사항**:
  - 채널별 성과 비교
  - 전송, 도달, 전환율 지표
  - 시간대별 성과 분석
  - 사용자 세그먼트별 참여도

## 3. 비기능 요구사항

### 3.1 성능 요구사항

#### [NFR-101] 처리량
- **우선순위**: 필수
- **설명**: 시스템은 고부하 상황에서도 안정적인 메시지 처리량을 제공해야 함
- **세부사항**:
  - 초당 10만 건(10초당 100만 건)의 메시지 처리 능력
  - 단일 노드에서 초당 5,000-10,000건 처리
  - 피크 시간 대응을 위한 버스트 처리 지원
  - 메시지 처리 대기열 적용

#### [NFR-102] 응답 시간
- **우선순위**: 필수
- **설명**: API 및 메시지 전송의 응답 시간 요구사항
- **세부사항**:
  - API 응답 시간: 95% 요청에 대해 200ms 이내
  - 메시지 전송 지연(서버에서 외부 서비스까지): 평균 500ms 이내
  - SDK 초기화 시간: 1초 이내
  - 인앱 메시지 표시 지연: 100ms 이내

#### [NFR-103] 동시 사용자
- **우선순위**: 필수
- **설명**: 시스템이 지원해야 하는 동시 사용자 수
- **세부사항**:
  - 동시 활성 사용자: 100만 이상
  - 동시 연결: 5만 이상
  - 사용자당 평균 구독 수: 3개 가정
  - 일일 활성 사용자: 500만 이상

### 3.2 확장성 요구사항

#### [NFR-201] 수평적 확장
- **우선순위**: 필수
- **설명**: 트래픽 증가에 따른 수평적 확장 지원
- **세부사항**:
  - 무중단 노드 추가/제거
  - 자동 노드 발견 및 클러스터링
  - 노드 간 작업 분배
  - 글로벌 분산 배포 지원

#### [NFR-202] 데이터 확장성
- **우선순위**: 필수
- **설명**: 데이터 볼륨 증가에 따른 확장성
- **세부사항**:
  - 월간 10억 건 이상의 메시지 처리
  - 앱당 최대 사용자 수: 1,000만
  - 효율적인 데이터 아카이빙
  - 데이터베이스 샤딩 지원

#### [NFR-203] 채널 확장성
- **우선순위**: 보통
- **설명**: 새로운 메시징 채널 추가 용이성
- **세부사항**:
  - 모듈화된 어댑터 패턴 적용
  - 채널별 구현 독립성
  - 최소한의 코드 변경으로 채널 추가
  - 채널별 기능 차이 수용

### 3.3 가용성 및 안정성

#### [NFR-301] 가용성
- **우선순위**: 필수
- **설명**: 시스템의 가용성 목표
- **세부사항**:
  - 99.95% 이상의 서비스 가용성
  - 지역 장애에도 서비스 유지
  - 무중단 배포 및 업그레이드
  - 자동 복구 메커니즘

#### [NFR-302] 데이터 내구성
- **우선순위**: 필수
- **설명**: 데이터 손실 방지 및 복구 요구사항
- **세부사항**:
  - 메시지 데이터 0% 손실 목표
  - 데이터베이스 복제 및 백업
  - 트랜잭션 로깅 및 재생
  - 최대 15분 복구 시간(RTO)

#### [NFR-303] 장애 격리
- **우선순위**: 보통
- **설명**: 부분 장애가 전체 시스템에 미치는 영향 최소화
- **세부사항**:
  - 채널별 격리
  - 앱별 할당량 분리
  - 회로 차단기 패턴 적용
  - 우아한 성능 저하

### 3.4 보안 요구사항

#### [NFR-401] 데이터 보안
- **우선순위**: 필수
- **설명**: 민감한 데이터 보호 요구사항
- **세부사항**:
  - 토큰 및 개인 식별 정보 암호화
  - 저장 및 전송 중 데이터 암호화
  - 키 관리 시스템
  - 데이터 접근 제어 및 감사

#### [NFR-402] 인증 및 권한
- **우선순위**: 필수
- **설명**: 시스템 접근 및 API 인증 요구사항
- **세부사항**:
  - API 키 기반 인증
  - 앱별 권한 범위 설정
  - 세션 관리 및 토큰 만료
  - 관리자 접근 제어

#### [NFR-403] 컴플라이언스
- **우선순위**: 보통
- **설명**: 규제 및 법적 요구사항 준수
- **세부사항**:
  - GDPR 준수
  - 개인정보 처리 방침
  - 데이터 보존 정책
  - CCPA 및 기타 지역 규제 준수

### 3.5 운영 요구사항

#### [NFR-501] 모니터링 및 알림
- **우선순위**: 필수
- **설명**: 시스템 상태 모니터링 및 경고
- **세부사항**:
  - 주요 성능 지표(KPI) 모니터링
  - 이상 탐지 및 알림
  - 로그 집계 및 분석
  - 상태 대시보드

#### [NFR-502] 배포 및 관리
- **우선순위**: 필수
- **설명**: 시스템 배포 및 관리 요구사항
- **세부사항**:
  - fly.io 기반 글로벌 분산 배포
  - 자동화된 CI/CD 파이프라인
  - 점진적 롤아웃 및 롤백
  - 구성 관리 및 환경 분리

## 4. 기술적 제약사항

### 4.1 기술 스택 제약

- **백엔드**: Elixir, Phoenix, Ash Framework
- **데이터베이스**: PostgreSQL
- **작업 큐**: Oban(ash_oban)
- **클라이언트**: Flutter
- **배포 환경**: fly.io

### 4.2 외부 의존성

- **Apple Push Notification Service(APNS)**: iOS 푸시 알림
- **Firebase Cloud Messaging(FCM)**: Android 푸시 알림
- **AWS SES/SMTP 서버**: 이메일 전송 (지원 예정)
- **SMS 게이트웨이**: SMS 전송 (지원 예정)
- **카카오 비즈니스 API**: 알림톡 전송 (지원 예정)

### 4.3 호환성 요구사항

- **iOS 지원**: iOS 14 이상
- **Android 지원**: Android 8.0 (API 레벨 26) 이상
- **웹 푸시 지원**: 최신 Chrome, Firefox, Safari (지원 예정)

## 5. 구현 우선순위 및 로드맵

### 5.1 Phase 1 (초기 출시)

- [FR-101] 푸시 알림 지원 (iOS/Android)
- [FR-201] 메시지 상태 추적
- [FR-301] 채널별 구독 관리
- [FR-401] 통합 SDK 제공 (Flutter)
- [FR-402] 자동 토큰 관리
- [FR-403] 사용자 식별 기능

### 5.2 Phase 2 (기능 확장)

- [FR-202] 템플릿 관리
- [FR-203] 배치 처리 및 스케줄링
- [FR-204] 대량 메시지 캠페인
- [FR-302] 태그 기반 세그먼테이션
- [FR-502] 분석 및 보고서

### 5.3 Phase 3 (추가 채널)

- [FR-102] 이메일 채널 지원
- [FR-103] SMS 채널 지원
- [FR-104] 카카오 알림톡 지원

### 5.4 Phase 4 (고급 기능)

- [FR-105] 인앱 메시지 지원
- [FR-501] 관리자 대시보드
- A/B 테스트 지원
- 사용자 여정 관리

## 관련 문서

- [ARCH-001] 아키텍처 개요
- [FLOW-001] SDK 초기화 및 사용자 식별 흐름
- [FLOW-002] 메시지 처리 흐름
- [DICT-001] 구독 상태 코드 사전

## 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
| --- | --- | --- | --- |
| 1.0 | 2025-04-02 | 최초 문서 작성 | 제품팀 |
