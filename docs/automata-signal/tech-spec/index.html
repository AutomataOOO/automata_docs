<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-automata-signal/tech-spec" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Automata-Signal: 기술 명세서 | Automata</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://AutomataOOO.github.io/docs/automata-signal/tech-spec"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Automata-Signal: 기술 명세서 | Automata"><meta data-rh="true" name="description" content="1. 서론"><meta data-rh="true" property="og:description" content="1. 서론"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://AutomataOOO.github.io/docs/automata-signal/tech-spec"><link data-rh="true" rel="alternate" href="https://AutomataOOO.github.io/docs/automata-signal/tech-spec" hreflang="en"><link data-rh="true" rel="alternate" href="https://AutomataOOO.github.io/docs/automata-signal/tech-spec" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7e2963ca.css">
<script src="/assets/js/runtime~main.83fab349.js" defer="defer"></script>
<script src="/assets/js/main.cacb38b6.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent__HuA" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Automata Logo" class="themedComponent_Exct themedComponent--light_c3lc"><img src="/img/logo.svg" alt="Automata Logo" class="themedComponent_Exct themedComponent--dark_Ji9V"></div><b class="navbar__title text--truncate">Automata</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/automata-signal/">Docs</a></div><div class="navbar__items navbar__items--right"><div class="toggle_OAgU colorModeToggle_zRe0"><button class="clean-btn toggleButton_aClM toggleButtonDisabled_GkIb" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_zzlY"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_Z832"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Cx4E"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_liLQ"><div class="docsWrapper_evXH"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_nZiY" type="button"></button><div class="docRoot_jKp6"><aside class="theme-doc-sidebar-container docSidebarContainer_wXyP"><div class="sidebarViewport_LQZ0"><div class="sidebar_T0dy"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_WBBB"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/automata-signal/">[APP-001] Automata-Signal</a><button aria-label="Collapse sidebar category &#x27;[APP-001] Automata-Signal&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/automata-signal/guides/GUIDE-001-getting-started">1. 개발 가이드</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/automata-signal/designs/DESIGN-001-architecture-overview">2. 시스템 설계</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/automata-signal/components/COMP-002-adapters">3. 컴포넌트 설계</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/automata-signal/sequences/SEQ-001-initialization">4. 프로세스 시퀀스</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/automata-signal/references/REF-001-api">5. 참조 자료</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/automata-signal/planning/PLAN-001-requirements">6. 프로젝트 계획</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/automata-signal/tech-spec">Automata-Signal: 기술 명세서</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/vibe-coding/APP-000-global-rules">vibe-coding</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_dhcR"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_hWfg"><div class="docItemContainer_UIwD"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_ViMa" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_xAfz"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/automata-signal/"><span itemprop="name">[APP-001] Automata-Signal</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Automata-Signal: 기술 명세서</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_xgD3 theme-doc-toc-mobile tocMobile_UvqM"><button type="button" class="clean-btn tocCollapsibleButton_ldZF">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Automata-Signal: 기술 명세서</h1></header>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="1-서론">1. 서론<a href="#1-서론" class="hash-link" aria-label="Direct link to 1. 서론" title="Direct link to 1. 서론">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="목적">목적<a href="#목적" class="hash-link" aria-label="Direct link to 목적" title="Direct link to 목적">​</a></h3>
<p>본 문서는 Automata-Signal 시스템의 기술적 설계와 구현 계획을 상세히 기술하며, 개발팀, 이해관계자 및 시스템 운영자에게 필요한 기술적 정보를 제공합니다.</p>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="배경">배경<a href="#배경" class="hash-link" aria-label="Direct link to 배경" title="Direct link to 배경">​</a></h3>
<p>모바일 애플리케이션과 웹 서비스의 성장으로 사용자 참여를 유도하는 효과적인 메시징 시스템의 필요성이 증가하고 있습니다. 기존 메시징 서비스들은 확장성, 안정성, 그리고 다양한 플랫폼 및 채널 지원에 제한이 있어, 글로벌 규모의 고성능 통합 메시징 시스템 개발이 요구되었습니다.</p>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="2-제품-개요">2. 제품 개요<a href="#2-제품-개요" class="hash-link" aria-label="Direct link to 2. 제품 개요" title="Direct link to 2. 제품 개요">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="기능적-요구사항">기능적 요구사항<a href="#기능적-요구사항" class="hash-link" aria-label="Direct link to 기능적 요구사항" title="Direct link to 기능적 요구사항">​</a></h3>
<ul>
<li><strong>멀티채널 메시징 지원</strong>:<!-- -->
<ul>
<li>푸시 알림 (iOS, Android)</li>
<li>이메일 (지원 예정)</li>
<li>SMS (지원 예정)</li>
<li>카카오 알림톡 (지원 예정)</li>
<li>인앱 메시지 (지원 예정)</li>
</ul>
</li>
<li>메시지 상태 관리 및 추적 (발송→도달→오픈)</li>
<li>대량 메시지 배치 처리 및 스케줄링</li>
<li>사용자 및 채널별 구독 관리</li>
<li>메시지 템플릿 관리와 개인화 (채널별 최적화)</li>
<li>메시지 캠페인 관리 및 타겟팅</li>
<li>통합 SDK 제공 (구독 관리, 사용자 식별, 메시지 처리)</li>
<li>멀티채널 통합 분석 및 보고서 생성</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="비기능적-요구사항">비기능적 요구사항<a href="#비기능적-요구사항" class="hash-link" aria-label="Direct link to 비기능적 요구사항" title="Direct link to 비기능적 요구사항">​</a></h3>
<ul>
<li><strong>성능</strong>: 초당 10만 건(10초당 100만 건)의 메시지 처리 능력</li>
<li><strong>확장성</strong>: 사용자, 채널 및 메시지 볼륨 증가에 유연한 대응</li>
<li><strong>안정성</strong>: fly.io 기반 글로벌 분산 배포로 99.95% 이상의 가용성</li>
<li><strong>보안</strong>: 민감한 사용자 데이터 및 인증 토큰 암호화</li>
<li><strong>유지보수성</strong>: Umbrella 구조와 어댑터 패턴을 통한 모듈성 및 확장성 보장</li>
<li><strong>감사 추적</strong>: 모든 메시지 상태 변경 기록 및 추적</li>
<li><strong>채널 독립성</strong>: 새로운 메시징 채널을 쉽게 추가할 수 있는 확장 가능한 구조</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="3-시스템-아키텍처">3. 시스템 아키텍처<a href="#3-시스템-아키텍처" class="hash-link" aria-label="Direct link to 3. 시스템 아키텍처" title="Direct link to 3. 시스템 아키텍처">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="31-전체-아키텍처-개요">3.1 전체 아키텍처 개요<a href="#31-전체-아키텍처-개요" class="hash-link" aria-label="Direct link to 3.1 전체 아키텍처 개요" title="Direct link to 3.1 전체 아키텍처 개요">​</a></h3>
<!-- -->
<p>Automata-Signal은 Elixir Umbrella 프로젝트 구조를 기반으로 구축된 분산 시스템으로, 다음과 같은 주요 구성 요소로 이루어져 있습니다:</p>
<ol>
<li><strong>API 게이트웨이</strong>: Phoenix Framework 기반으로 REST API를 제공합니다.</li>
<li><strong>분산 메시지 처리 클러스터</strong>: Elixir/OTP, libcluster, GenServer를 활용한 고성능 메시지 처리 시스템입니다.</li>
<li><strong>채널 어댑터</strong>:<!-- -->
<ul>
<li>푸시 클라이언트: Pigeon 라이브러리를 통해 iOS(APNS)와 Android(FCM) 플랫폼에 알림 전송</li>
<li>이메일 클라이언트: 향후 구현 예정</li>
<li>SMS 클라이언트: 향후 구현 예정</li>
<li>카카오 알림톡 클라이언트: 향후 구현 예정</li>
<li>인앱 메시지 클라이언트: 향후 구현 예정</li>
</ul>
</li>
<li><strong>템플릿 렌더링 엔진</strong>: 메시지 템플릿 및 변수를 처리하여 개인화된 메시지를 생성합니다.</li>
<li><strong>캠페인 관리자</strong>: 대규모 메시지 캠페인 생성, 스케줄링 및 타겟팅을 처리합니다.</li>
<li><strong>작업 큐 및 상태 저장소</strong>: PostgreSQL, ash_oban, ash_state_machine을 활용한 작업 관리 및 상태 추적 시스템입니다.</li>
<li><strong>SDK</strong>: 구독 등록, 토큰 관리, 사용자 식별 등의 기능을 제공하는 클라이언트 라이브러리입니다.</li>
<li><strong>분석 모듈</strong>: 메시지 상태 및 사용자 참여 데이터 분석을 위한 컴포넌트입니다.</li>
<li><strong>관리자 모듈</strong>: 시스템 관리 및 모니터링을 위한 인터페이스입니다.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="32-elixir-노드-내부-아키텍처">3.2 Elixir 노드 내부 아키텍처<a href="#32-elixir-노드-내부-아키텍처" class="hash-link" aria-label="Direct link to 3.2 Elixir 노드 내부 아키텍처" title="Direct link to 3.2 Elixir 노드 내부 아키텍처">​</a></h3>
<!-- -->
<p>Elixir 노드 내부에서는 다양한 컴포넌트들이 유기적으로 상호작용하여 메시징 기능을 제공합니다:</p>
<ol>
<li><strong>Phoenix Endpoint</strong>: 클라이언트 요청을 받아 처리하는 웹 서버 엔드포인트입니다.</li>
<li><strong>Ash JSON API</strong>: Ash Framework 기반의 RESTful API를 제공하며, 리소스에 대한 CRUD 작업을 처리합니다.</li>
<li><strong>Ash Resources</strong>:<!-- -->
<ul>
<li><strong>Application</strong>: 메시징 서비스를 사용하는 애플리케이션 정보 관리</li>
<li><strong>User</strong>: 사용자 정보 및 외부 ID 매핑 관리 (ash_archival 확장으로 논리적 삭제 지원)</li>
<li><strong>Subscription</strong>: 사용자의 구독 정보 관리 (ash_cloak 확장으로 토큰 암호화)</li>
<li><strong>Message</strong>: 메시지 내용 및 상태 관리 (ash_state_machine 확장으로 상태 전이 관리)</li>
<li><strong>MessageEvent</strong>: 메시지 이벤트 추적 (ash_paper_trail 확장으로 변경 이력 관리)</li>
<li><strong>SubscriptionEvent</strong>: 구독 상태 변경 추적</li>
<li><strong>MessageQuota</strong>: 앱별 할당량 관리 (ash_money 확장으로 과금 관리, ash_double_entry 확장으로 정확한 사용량 추적)</li>
<li><strong>MessageTemplate</strong>: 재사용 가능한 메시지 템플릿 관리</li>
<li><strong>MessageCampaign</strong>: 대량 메시지 발송 캠페인 관리</li>
</ul>
</li>
<li><strong>서비스 컴포넌트</strong>:<!-- -->
<ul>
<li><strong>Message Service</strong>: 메시지 생성 및 전송 로직 구현</li>
<li><strong>Template Service</strong>: 템플릿 렌더링 및 변수 치환 처리</li>
<li><strong>Campaign Service</strong>: 캠페인 처리 및 대상자 필터링</li>
<li><strong>Billing Service</strong>: 과금 및 할당량 관리 (ash_money 활용)</li>
</ul>
</li>
<li><strong>작업 처리 컴포넌트</strong>:<!-- -->
<ul>
<li><strong>ash_oban 워커</strong>: 비동기 작업 처리 및 스케줄링</li>
<li><strong>분산 GenServer</strong>: 노드 간 상태 공유 및 작업 분배</li>
</ul>
</li>
<li><strong>채널 어댑터</strong>:<!-- -->
<ul>
<li><strong>Push Adapter</strong>: iOS/Android 푸시 알림 처리</li>
<li><strong>Email Adapter</strong>: 이메일 메시지 처리 (지원 예정)</li>
<li><strong>SMS Adapter</strong>: SMS 메시지 처리 (지원 예정)</li>
<li><strong>KakaoTalk Adapter</strong>: 카카오 알림톡 처리 (지원 예정)</li>
<li><strong>InApp Message Adapter</strong>: 인앱 메시지 처리 (지원 예정)</li>
</ul>
</li>
<li><strong>노드 연결</strong>:<!-- -->
<ul>
<li><strong>libcluster</strong>: 자동 노드 발견 및 연결로 분산 클러스터 구성</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="33-데이터-모델-아키텍처">3.3 데이터 모델 아키텍처<a href="#33-데이터-모델-아키텍처" class="hash-link" aria-label="Direct link to 3.3 데이터 모델 아키텍처" title="Direct link to 3.3 데이터 모델 아키텍처">​</a></h3>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="주요-엔티티">주요 엔티티<a href="#주요-엔티티" class="hash-link" aria-label="Direct link to 주요 엔티티" title="Direct link to 주요 엔티티">​</a></h3>
<ol>
<li><strong>Application</strong>: 메시징 서비스를 이용하는 앱 정보 (API 키, 설정 등)</li>
<li><strong>User</strong>: 각 앱의 사용자 정보. <code>external_id</code>를 통해 앱 내에서 사용자 식별 (이메일, 이름 등 저장하지 않음)</li>
<li><strong>Subscription</strong>: 사용자의 구독 정보 (푸시 알림, 이메일, SMS, 카카오톡 등)</li>
<li><strong>MessageTemplate</strong>: 재사용 가능한 메시지 형식 템플릿 정의</li>
<li><strong>MessageCampaign</strong>: 대량 메시지 발송을 위한 캠페인 정의</li>
<li><strong>Message</strong>: 개별 사용자의 구독 채널에 전송된 메시지와 상태 정보</li>
<li><strong>MessageEvent</strong>: 메시지 상태 변경 이벤트 기록</li>
<li><strong>SubscriptionEvent</strong>: 구독/구독취소 이벤트 기록</li>
<li><strong>MessageQuota</strong>: 앱별 메시지 할당량 및 사용량 관리</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="주요-데이터-모델-특징">주요 데이터 모델 특징<a href="#주요-데이터-모델-특징" class="hash-link" aria-label="Direct link to 주요 데이터 모델 특징" title="Direct link to 주요 데이터 모델 특징">​</a></h3>
<ol>
<li><strong>복합 유니크 제약조건</strong>: User 테이블에서 <code>(external_id, application_id)</code> 조합은 유니크해야 합니다. 이를 통해 한 앱 내에서 사용자 식별자의 유일성을 보장합니다.</li>
<li><strong>Subscription 메타데이터</strong>: 구독 채널에 대한 상세 정보 저장<!-- -->
<ul>
<li><code>type</code>: 구독 채널 유형 (예: <code>iOSPush</code>, <code>AndroidPush</code>, <code>Email</code>, <code>SMS</code>, <code>KakaoTalk</code>, <code>InAppMessage</code>)</li>
<li><code>token</code>: 채널별 식별자 (푸시 토큰, 이메일 주소, 전화번호 등)</li>
<li>디바이스 관련 정보 (푸시 알림 채널인 경우):<!-- -->
<ul>
<li><code>device_model</code>, <code>device_os</code>: 디바이스 하드웨어 및 OS 정보</li>
<li><code>device_language</code>: 디바이스 설정 언어</li>
<li><code>app_version</code>, <code>sdk_version</code>: 앱 및 SDK 버전 관리</li>
</ul>
</li>
<li><code>country_code</code>: 지역별 분석 및 규제 준수</li>
<li><code>test_type</code>: 테스트 환경 설정 (0: Production, 1: Development, 2: Ad-Hoc)</li>
<li><code>tags</code>: 유연한 태그 데이터 저장(JSON)</li>
</ul>
</li>
<li><strong>구독 상태 코드 체계</strong>:</li>
</ol>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="기본-구독-상태">기본 구독 상태<a href="#기본-구독-상태" class="hash-link" aria-label="Direct link to 기본 구독 상태" title="Direct link to 기본 구독 상태">​</a></h3>
<table><thead><tr><th>코드</th><th>정의</th><th>설명</th></tr></thead><tbody><tr><td>1 이상</td><td>구독됨</td><td>해당 채널에서 메시지를 수신할 수 있는 상태. 푸시 알림의 경우 유효한 토큰이 필요함.</td></tr><tr><td>0, -99</td><td>구독된 적 없음</td><td>초기 상태. 해당 채널에 아직 구독되지 않음.</td></tr><tr><td>-2</td><td>구독 취소됨</td><td>사용자가 직접 구독을 취소한 상태. enabled 속성을 false로 설정할 때 권장되는 값.</td></tr><tr><td>-31</td><td>API를 통해 비활성화됨</td><td>REST API를 통해 관리자나 시스템에 의해 비활성화된 경우.</td></tr><tr><td>-98</td><td>이중 확인 대기 중</td><td>SMS/이메일에서 더블 옵트인을 기다리는 상태.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="푸시-알림-관련-오류-코드">푸시 알림 관련 오류 코드<a href="#푸시-알림-관련-오류-코드" class="hash-link" aria-label="Direct link to 푸시 알림 관련 오류 코드" title="Direct link to 푸시 알림 관련 오류 코드">​</a></h3>
<table><thead><tr><th>코드</th><th>정의</th><th>설명</th></tr></thead><tbody><tr><td>-3, -5</td><td>Android 지원 라이브러리 오류</td><td>앱의 Android 지원 라이브러리 추가 또는 업데이트 필요</td></tr><tr><td>-4, -8, -11, -12</td><td>Android Google Play 서비스 오류</td><td>Google Play 서비스 라이브러리 업그레이드 필요</td></tr><tr><td>-6</td><td>Android 잘못된 프로젝트 번호</td><td>FCMv1 Sender ID가 토큰 원본과 일치하지 않음</td></tr><tr><td>-7, -9</td><td>Android 구버전 Google Play 서비스</td><td>기기의 Google Play 서비스 앱 업데이트 필요</td></tr><tr><td>-10</td><td>구독되지 않음</td><td>앱 제거 또는 기기 설정에서 구독 취소됨, 웹 푸시 차단됨</td></tr><tr><td>-13</td><td>iOS 푸시 기능 누락</td><td>필요한 SDK 설정 단계가 누락됨</td></tr><tr><td>-14, -16, -17</td><td>iOS APNS 오류</td><td>기기가 APNS 연결에 문제 있음</td></tr><tr><td>-15</td><td>iOS 시뮬레이터 오류</td><td>iOS 16.4+ 시뮬레이터 필요</td></tr><tr><td>-18</td><td>권한 요청 안됨</td><td>구독 권한 요청이 표시된 적 없음</td></tr><tr><td>-19</td><td>권한 요청 무응답</td><td>구독 권한 요청이 표시되었으나 응답하지 않음</td></tr><tr><td>-20, -21</td><td>웹 레코드 임시 상태</td><td>웹 푸시 권한 철회됨</td></tr><tr><td>-22</td><td>수동 구독 취소</td><td>사용자가 권한을 철회함</td></tr><tr><td>-23, -24</td><td>웹 서비스 워커 오류</td><td>웹 푸시 관련 오류</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="이메일-관련-오류-코드-지원-예정">이메일 관련 오류 코드 (지원 예정)<a href="#이메일-관련-오류-코드-지원-예정" class="hash-link" aria-label="Direct link to 이메일 관련 오류 코드 (지원 예정)" title="Direct link to 이메일 관련 오류 코드 (지원 예정)">​</a></h3>
<table><thead><tr><th>코드</th><th>정의</th><th>설명</th></tr></thead><tbody><tr><td>-40</td><td>유효하지 않은 이메일</td><td>이메일 형식이 올바르지 않음</td></tr><tr><td>-41</td><td>이메일 전송 실패</td><td>일반적인 이메일 전송 오류</td></tr><tr><td>-42</td><td>하드 바운스</td><td>영구적인 전송 실패 (존재하지 않는 주소 등)</td></tr><tr><td>-43</td><td>소프트 바운스</td><td>일시적인 전송 실패 (사서함 용량 초과 등)</td></tr><tr><td>-44</td><td>스팸으로 신고됨</td><td>사용자가 스팸으로 신고함</td></tr><tr><td>-45</td><td>수신 거부</td><td>이메일 내 수신 거부 링크를 통해 구독 취소</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="sms-관련-오류-코드-지원-예정">SMS 관련 오류 코드 (지원 예정)<a href="#sms-관련-오류-코드-지원-예정" class="hash-link" aria-label="Direct link to SMS 관련 오류 코드 (지원 예정)" title="Direct link to SMS 관련 오류 코드 (지원 예정)">​</a></h3>
<table><thead><tr><th>코드</th><th>정의</th><th>설명</th></tr></thead><tbody><tr><td>-50</td><td>유효하지 않은 전화번호</td><td>전화번호 형식이 올바르지 않음</td></tr><tr><td>-51</td><td>SMS 전송 실패</td><td>일반적인 SMS 전송 오류</td></tr><tr><td>-52</td><td>번호 없음</td><td>존재하지 않는 전화번호</td></tr><tr><td>-53</td><td>네트워크 오류</td><td>통신사 네트워크 오류</td></tr><tr><td>-54</td><td>차단됨</td><td>사용자가 수신을 차단함</td></tr><tr><td>-55</td><td>발신 번호 제한</td><td>발신 번호에 대한 제한</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="카카오-알림톡-관련-오류-코드-지원-예정">카카오 알림톡 관련 오류 코드 (지원 예정)<a href="#카카오-알림톡-관련-오류-코드-지원-예정" class="hash-link" aria-label="Direct link to 카카오 알림톡 관련 오류 코드 (지원 예정)" title="Direct link to 카카오 알림톡 관련 오류 코드 (지원 예정)">​</a></h3>
<table><thead><tr><th>코드</th><th>정의</th><th>설명</th></tr></thead><tbody><tr><td>-60</td><td>카카오톡 미사용자</td><td>카카오톡을 사용하지 않는 사용자</td></tr><tr><td>-61</td><td>알림톡 차단</td><td>사용자가 알림톡 수신을 차단함</td></tr><tr><td>-62</td><td>친구 추가 안됨</td><td>비즈니스 계정 친구 추가가 안된 상태</td></tr><tr><td>-63</td><td>템플릿 미승인</td><td>알림톡 템플릿이 승인되지 않음</td></tr><tr><td>-64</td><td>발송 한도 초과</td><td>일일 발송 한도 초과</td></tr><tr><td>-65</td><td>채널 오류</td><td>카카오 비즈니스 채널 오류</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="인앱-메시지-관련-오류-코드-지원-예정">인앱 메시지 관련 오류 코드 (지원 예정)<a href="#인앱-메시지-관련-오류-코드-지원-예정" class="hash-link" aria-label="Direct link to 인앱 메시지 관련 오류 코드 (지원 예정)" title="Direct link to 인앱 메시지 관련 오류 코드 (지원 예정)">​</a></h3>
<table><thead><tr><th>코드</th><th>정의</th><th>설명</th></tr></thead><tbody><tr><td>-70</td><td>앱 버전 불일치</td><td>지원되지 않는 앱 버전</td></tr><tr><td>-71</td><td>사용자 설정에 의한 비활성화</td><td>사용자가 앱 설정에서 인앱 메시지를 비활성화함</td></tr><tr><td>-72</td><td>표시 조건 불일치</td><td>표시 조건(트리거)에 부합하지 않음</td></tr><tr><td>-73</td><td>기기 저장공간 부족</td><td>인앱 메시지 에셋을 저장할 공간 부족</td></tr><tr><td>-74</td><td>SDK 초기화 실패</td><td>인앱 메시지 SDK 초기화 오류</td></tr></tbody></table>
<ol>
<li><strong>채널별 메시지 형식</strong>: 각 채널 유형에 따라 메시지 형식과 내용이 달라질 수 있음<!-- -->
<ul>
<li>푸시 알림: 제목, 본문, 액션 데이터</li>
<li>이메일: 제목, HTML 본문, 첨부파일</li>
<li>SMS: 단문 메시지</li>
<li>카카오톡: 알림톡 템플릿 ID 및 변수</li>
<li>인앱 메시지: 제목, 본문, 레이아웃 타입, 액션, 표시 규칙</li>
</ul>
</li>
<li><strong>템플릿 기반 메시지</strong>: 템플릿은 고정된 구조에 변수 플레이스홀더를 포함<!-- -->
<ul>
<li><code>title_template</code>, <code>body_template</code>: 제목 및 본문에 <code>{{variable}}</code> 형태의 변수 포함</li>
<li>예: &quot;안녕하세요 <code>{{user_name}}</code>님, <code>{{event_name}}</code> 이벤트가 시작됩니다&quot;</li>
<li>채널별 템플릿 지원: 이메일용 HTML 템플릿, 카카오톡용 알림톡 템플릿 등</li>
</ul>
</li>
<li><strong>캠페인-메시지 관계</strong>: 모든 메시지는 개별 발송이거나 캠페인의 일부로 생성됨<!-- -->
<ul>
<li>개별 메시지: <code>campaign_id</code>가 null</li>
<li>캠페인 메시지: 동일한 <code>campaign_id</code>를 공유하는 다수의 메시지 인스턴스</li>
</ul>
</li>
<li><strong>메시지 테이블 공유</strong>: 모든 채널(푸시, 이메일, SMS, 카카오 알림톡, 인앱 메시지)의 메시지는 동일한 <code>MESSAGE</code> 테이블을 사용하며, <code>channel_type</code> 필드로 구분</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="subscription-리소스-예시">Subscription 리소스 예시<a href="#subscription-리소스-예시" class="hash-link" aria-label="Direct link to Subscription 리소스 예시" title="Direct link to Subscription 리소스 예시">​</a></h3>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Subscription</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token module class-name">Ash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resource</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">data_layer:</span><span class="token plain"> </span><span class="token module class-name">Ash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">DataLayer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Postgres</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">extensions:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token module class-name">AshArchival</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resource</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token module class-name">AshCloak</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resource</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  attributes </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uuid_primary_key </span><span class="token atom symbol" style="color:#36acaa">:id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:token</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">sensitive?:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:type</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:atom</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      constraints </span><span class="token punctuation" style="color:#393A34">[</span><span class="token attr-name" style="color:#00a4db">one_of:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token atom symbol" style="color:#36acaa">:iOSPush</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:AndroidPush</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:Email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:SMS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:KakaoTalk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:InAppMessage</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:user_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:uuid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:application_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:uuid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 디바이스 메타데이터 (푸시 알림 구독인 경우)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:device_model</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:device_os</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:device_language</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:app_version</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:sdk_version</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:country_code</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:test_type</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:integer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">default:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:tags</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:map</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">default:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 구독 상태</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:subscription_status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:integer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">default:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:subscribed_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:utc_datetime</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:unsubscribed_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:utc_datetime</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 통계 지표</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:last_active_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:utc_datetime</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:total_messages_received</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:integer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">default:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:total_messages_converted</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:integer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">default:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  encrypted_attributes </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:token</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  archival </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    archive_attribute </span><span class="token atom symbol" style="color:#36acaa">:is_archived</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    archive_timestamp_attribute </span><span class="token atom symbol" style="color:#36acaa">:archived_at</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 구독 상태 코드 관련 함수</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  calculations </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    calculate </span><span class="token atom symbol" style="color:#36acaa">:is_push_channel</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:boolean</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">expr:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">expr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">type </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token atom symbol" style="color:#36acaa">:iOSPush</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:AndroidPush</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    calculate </span><span class="token atom symbol" style="color:#36acaa">:is_messaging_channel</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:boolean</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">expr:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">expr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">type </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token atom symbol" style="color:#36acaa">:Email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:SMS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:KakaoTalk</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    calculate </span><span class="token atom symbol" style="color:#36acaa">:is_in_app_channel</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:boolean</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">expr:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">expr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">type </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:InAppMessage</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    calculate </span><span class="token atom symbol" style="color:#36acaa">:is_subscribed</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:boolean</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">expr:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">expr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">subscription_status </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    calculate </span><span class="token atom symbol" style="color:#36acaa">:is_unsubscribed</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:boolean</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">expr:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">expr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">subscription_status </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> subscription_status </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">31</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    calculate </span><span class="token atom symbol" style="color:#36acaa">:has_error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:boolean</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">expr:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">expr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">subscription_status </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">and</span><span class="token plain"> subscription_status </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">31</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">and</span><span class="token plain"> subscription_status </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">99</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    calculate </span><span class="token atom symbol" style="color:#36acaa">:error_code_range</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">expr:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">expr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">cond</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        subscription_status </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">24</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">and</span><span class="token plain"> subscription_status </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;push_error&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        subscription_status </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">49</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">and</span><span class="token plain"> subscription_status </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">40</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;email_error&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        subscription_status </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">59</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">and</span><span class="token plain"> subscription_status </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">50</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sms_error&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        subscription_status </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">69</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">and</span><span class="token plain"> subscription_status </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">60</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;kakao_error&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        subscription_status </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">79</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">and</span><span class="token plain"> subscription_status </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">70</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;in_app_error&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;other&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  relationships </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    belongs_to </span><span class="token atom symbol" style="color:#36acaa">:user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">User</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    belongs_to </span><span class="token atom symbol" style="color:#36acaa">:application</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Application</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    has_many </span><span class="token atom symbol" style="color:#36acaa">:messages</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">destination_field:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:subscription_id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    has_many </span><span class="token atom symbol" style="color:#36acaa">:subscription_events</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">SubscriptionEvent</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">destination_field:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:subscription_id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... 추가 액션 및 기타 설정 ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="message-리소스-예시">Message 리소스 예시<a href="#message-리소스-예시" class="hash-link" aria-label="Direct link to Message 리소스 예시" title="Direct link to Message 리소스 예시">​</a></h3>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Message</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token module class-name">Ash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resource</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">data_layer:</span><span class="token plain"> </span><span class="token module class-name">Ash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">DataLayer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Postgres</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">extensions:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token module class-name">AshStateMachine</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resource</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  attributes </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uuid_primary_key </span><span class="token atom symbol" style="color:#36acaa">:id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:title</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:body</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:map</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">default:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:user_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:uuid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:subscription_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:uuid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:application_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:uuid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:campaign_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:uuid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">allow_nil?:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:atom</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      constraints </span><span class="token punctuation" style="color:#393A34">[</span><span class="token attr-name" style="color:#00a4db">one_of:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token atom symbol" style="color:#36acaa">:pending</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:successful</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:failed</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:errored</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:received</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:converted</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      default </span><span class="token atom symbol" style="color:#36acaa">:pending</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:channel_type</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:atom</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      constraints </span><span class="token punctuation" style="color:#393A34">[</span><span class="token attr-name" style="color:#00a4db">one_of:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token atom symbol" style="color:#36acaa">:push</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:sms</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:kakao_talk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:in_app</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">timestamps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:sent_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:utc_datetime</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:received_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:utc_datetime</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:converted_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:utc_datetime</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:failed_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:utc_datetime</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:error_reason</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:error_details</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:map</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">default:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:version_history</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:map</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">default:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  state_machine </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    field </span><span class="token atom symbol" style="color:#36acaa">:status</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    initial_states </span><span class="token punctuation" style="color:#393A34">[</span><span class="token atom symbol" style="color:#36acaa">:pending</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    transitions </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      transition </span><span class="token atom symbol" style="color:#36acaa">:send</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">from:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token atom symbol" style="color:#36acaa">:pending</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">to:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:successful</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      transition </span><span class="token atom symbol" style="color:#36acaa">:fail</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">from:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token atom symbol" style="color:#36acaa">:pending</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:successful</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">to:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:failed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      transition </span><span class="token atom symbol" style="color:#36acaa">:error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">from:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token atom symbol" style="color:#36acaa">:pending</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">to:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:errored</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      transition </span><span class="token atom symbol" style="color:#36acaa">:retry</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">from:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token atom symbol" style="color:#36acaa">:errored</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">to:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:pending</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      transition </span><span class="token atom symbol" style="color:#36acaa">:receive</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">from:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token atom symbol" style="color:#36acaa">:successful</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">to:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:received</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      transition </span><span class="token atom symbol" style="color:#36acaa">:convert</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">from:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token atom symbol" style="color:#36acaa">:received</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">to:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:converted</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on_transition </span><span class="token atom symbol" style="color:#36acaa">:send</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      set_attribute </span><span class="token atom symbol" style="color:#36acaa">:sent_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token module class-name">DateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">utc_now</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on_transition </span><span class="token atom symbol" style="color:#36acaa">:fail</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      set_attribute </span><span class="token atom symbol" style="color:#36acaa">:failed_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token module class-name">DateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">utc_now</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on_transition </span><span class="token atom symbol" style="color:#36acaa">:receive</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      set_attribute </span><span class="token atom symbol" style="color:#36acaa">:received_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token module class-name">DateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">utc_now</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on_transition </span><span class="token atom symbol" style="color:#36acaa">:convert</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      set_attribute </span><span class="token atom symbol" style="color:#36acaa">:converted_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token module class-name">DateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">utc_now</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  relationships </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    belongs_to </span><span class="token atom symbol" style="color:#36acaa">:user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">User</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    belongs_to </span><span class="token atom symbol" style="color:#36acaa">:subscription</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Subscription</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    belongs_to </span><span class="token atom symbol" style="color:#36acaa">:application</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Application</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    belongs_to </span><span class="token atom symbol" style="color:#36acaa">:campaign</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">MessageCampaign</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">allow_nil?:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    has_many </span><span class="token atom symbol" style="color:#36acaa">:events</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">MessageEvent</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">destination_field:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:message_id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... 액션 및 기타 설정 ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="messagequota-리소스-예시">MessageQuota 리소스 예시<a href="#messagequota-리소스-예시" class="hash-link" aria-label="Direct link to MessageQuota 리소스 예시" title="Direct link to MessageQuota 리소스 예시">​</a></h3>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">MessageQuota</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token module class-name">Ash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resource</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">data_layer:</span><span class="token plain"> </span><span class="token module class-name">Ash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">DataLayer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Postgres</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">extensions:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token module class-name">AshMoney</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resource</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token module class-name">AshDoubleEntry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resource</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  attributes </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uuid_primary_key </span><span class="token atom symbol" style="color:#36acaa">:id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:application_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:uuid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:daily_quota</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:integer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:monthly_quota</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:integer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:daily_used</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:integer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">default:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:monthly_used</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:integer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">default:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:reset_date</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:utc_datetime</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 과금 관련 필드 (ash_money 사용)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:unit_price</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:money</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 메시지당 단가</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:credit_balance</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:money</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">default:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 남은 크레딧</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attribute </span><span class="token atom symbol" style="color:#36acaa">:billing_currency</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">default:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;KRW&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  relationships </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    belongs_to </span><span class="token atom symbol" style="color:#36acaa">:application</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Resources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Application</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ash_double_entry 설정</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  double_entry </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 사용량 계정 정의</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    account </span><span class="token atom symbol" style="color:#36acaa">:daily_usage</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># 일일 사용량 증가 및 감소</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      change_attribute </span><span class="token atom symbol" style="color:#36acaa">:daily_used</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      credit_type </span><span class="token atom symbol" style="color:#36acaa">:increase</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 사용량 증가는 credit 작업</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      debit_type </span><span class="token atom symbol" style="color:#36acaa">:decrease</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># 사용량 감소는 debit 작업</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    account </span><span class="token atom symbol" style="color:#36acaa">:monthly_usage</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># 월간 사용량 증가 및 감소</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      change_attribute </span><span class="token atom symbol" style="color:#36acaa">:monthly_used</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      credit_type </span><span class="token atom symbol" style="color:#36acaa">:increase</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      debit_type </span><span class="token atom symbol" style="color:#36acaa">:decrease</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 크레딧 계정 정의 (ash_money와 통합)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    account </span><span class="token atom symbol" style="color:#36acaa">:credit_balance</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      change_attribute </span><span class="token atom symbol" style="color:#36acaa">:credit_balance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      credit_type </span><span class="token atom symbol" style="color:#36acaa">:increase</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 크레딧 증가</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      debit_type </span><span class="token atom symbol" style="color:#36acaa">:decrease</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># 크레딧 감소 (사용)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... 액션 및 기타 설정 ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="34-sdk-아키텍처">3.4 SDK 아키텍처<a href="#34-sdk-아키텍처" class="hash-link" aria-label="Direct link to 3.4 SDK 아키텍처" title="Direct link to 3.4 SDK 아키텍처">​</a></h3>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="sdk-구현-예시-flutter">SDK 구현 예시 (Flutter)<a href="#sdk-구현-예시-flutter" class="hash-link" aria-label="Direct link to SDK 구현 예시 (Flutter)" title="Direct link to SDK 구현 예시 (Flutter)">​</a></h3>
<div class="language-dart codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-dart codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 메인 SDK 클래스</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">AutomataSignal</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">AutomataSignal</span><span class="token plain"> _instance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">_internal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">factory</span><span class="token plain"> </span><span class="token class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> _instance</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">_internal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> _appId</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  late </span><span class="token class-name">AutomataSignalConfig</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  late </span><span class="token class-name">SubscriptionManager</span><span class="token plain"> _subscriptionManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  late </span><span class="token class-name">UserManager</span><span class="token plain"> _userManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  late </span><span class="token class-name">MessageManager</span><span class="token plain"> _messageManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  late </span><span class="token class-name">InAppMessageManager</span><span class="token plain"> _inAppMessageManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 인앱 메시지 매니저 (지원 예정)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Future</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics keyword" style="color:#00009f">void</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">initialize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> appId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token class-name">AutomataSignalConfig</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _appId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> appId</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> config </span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token class-name">AutomataSignalConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _subscriptionManager </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">SubscriptionManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _userManager </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">UserManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _messageManager </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">MessageManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _inAppMessageManager </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">InAppMessageManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 인앱 메시지 매니저 초기화 (지원 예정)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 푸시 알림 구독 등록 (기본)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">autoRegisterPush</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> _subscriptionManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">registerPushSubscription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// 권한 요청 (설정에 따라)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">autoPromptPermission</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestNotificationPermission</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 인앱 메시지 초기화 (지원 예정)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enableInAppMessages</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> _inAppMessageManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">initialize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 사용자 식별</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Future</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics keyword" style="color:#00009f">void</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">login</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> externalId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> _userManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">identifyUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">externalId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Future</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics keyword" style="color:#00009f">void</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">logout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> _userManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">logoutUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 채널별 구독 등록</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Future</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics operator" style="color:#393A34">?</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">registerEmail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> _subscriptionManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">registerEmailSubscription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Future</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics operator" style="color:#393A34">?</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">registerSMS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> phoneNumber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> _subscriptionManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">registerSMSSubscription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">phoneNumber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Future</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics operator" style="color:#393A34">?</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">registerKakaoTalk</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> phoneNumber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> _subscriptionManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">registerKakaoSubscription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">phoneNumber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 인앱 메시지 관련 메서드 (지원 예정)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Future</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics keyword" style="color:#00009f">void</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetchInAppMessages</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 지원 예정</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> _inAppMessageManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchMessages</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Future</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics keyword" style="color:#00009f">void</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">displayInAppMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> messageId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 지원 예정</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> _inAppMessageManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">displayMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">messageId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Future</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics keyword" style="color:#00009f">void</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">trackInAppMessageAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> messageId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> actionId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 지원 예정</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> _inAppMessageManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">trackAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">messageId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> actionId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 구독 관련 메서드</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Future</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics keyword" style="color:#00009f">void</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">disableChannel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SubscriptionType</span><span class="token plain"> type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> _subscriptionManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">disableSubscription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Future</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics keyword" style="color:#00009f">void</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">enableChannel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SubscriptionType</span><span class="token plain"> type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> _subscriptionManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">enableSubscription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 기타 API 메서드들...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 설정 클래스</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">AutomataSignalConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> bool autoRegisterPush</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> bool autoPromptPermission</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> bool trackMessageEvents</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> defaultLanguage</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> bool foregroundNotificationsEnabled</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> bool enableInAppMessages</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 인앱 메시지 활성화 옵션 (지원 예정)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">AutomataSignalConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">autoRegisterPush </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">autoPromptPermission </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">trackMessageEvents </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">defaultLanguage</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">foregroundNotificationsEnabled </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enableInAppMessages </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 기본적으로 활성화</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 구독 유형 열거형</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token class-name">SubscriptionType</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  iOSPush</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">AndroidPush</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SMS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">KakaoTalk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">InAppMessage</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 인앱 메시지 타입 추가 (지원 예정)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-dart codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-dart codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 앱에서의 사용 예시</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">WidgetsFlutterBinding</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ensureInitialized</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// SDK 초기화</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">initialize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">&#x27;YOUR_APP_ID&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">AutomataSignalConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      autoRegisterPush</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      autoPromptPermission</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      foregroundNotificationsEnabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      enableInAppMessages</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 인앱 메시지 활성화</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">runApp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MyApp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 사용자 로그인 시</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Future</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics keyword" style="color:#00009f">void</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onUserLogin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> userId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">login</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">userId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 로그인 후 인앱 메시지 확인 (지원 예정)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchInAppMessages</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 사용자 로그아웃 시</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Future</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics keyword" style="color:#00009f">void</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onUserLogout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">logout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 다양한 채널 등록 예시</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Future</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics keyword" style="color:#00009f">void</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">registerUserChannels</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">User</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 이메일 채널 등록</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">email </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> emailSubscriptionId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">registerEmail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">email</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">&#x27;Email subscription registered: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">$</span><span class="token string-literal interpolation expression">emailSubscriptionId</span><span class="token string-literal string" style="color:#e3116c">&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// SMS 채널 등록</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">phoneNumber </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> smsSubscriptionId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">registerSMS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">phoneNumber</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">&#x27;SMS subscription registered: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">$</span><span class="token string-literal interpolation expression">smsSubscriptionId</span><span class="token string-literal string" style="color:#e3116c">&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 카카오톡 채널 등록</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">phoneNumber </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> kakaoSubscriptionId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">registerKakaoTalk</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">phoneNumber</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">&#x27;KakaoTalk subscription registered: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">$</span><span class="token string-literal interpolation expression">kakaoSubscriptionId</span><span class="token string-literal string" style="color:#e3116c">&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 인앱 메시지 처리 예시 (지원 예정)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyHomePage</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">StatefulWidget</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token metadata function" style="color:#d73a49">@override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  _MyHomePageState </span><span class="token function" style="color:#d73a49">createState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">_MyHomePageState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> _MyHomePageState </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">State</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">MyHomePage</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> </span><span class="token class-name">WidgetsBindingObserver</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token metadata function" style="color:#d73a49">@override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">initState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">super</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">initState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">WidgetsBinding</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addObserver</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 인앱 메시지 리스너 설정</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setInAppMessageClickHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">messageId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> actionId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// 메시지 클릭 처리</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">&#x27;In-app message clicked: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">$</span><span class="token string-literal interpolation expression">messageId</span><span class="token string-literal string" style="color:#e3116c">, action: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">$</span><span class="token string-literal interpolation expression">actionId</span><span class="token string-literal string" style="color:#e3116c">&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token metadata function" style="color:#d73a49">@override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">didChangeAppLifecycleState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">AppLifecycleState</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token class-name">AppLifecycleState</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">resumed</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// 앱이 포그라운드로 돌아올 때 인앱 메시지 확인</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchInAppMessages</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token metadata function" style="color:#d73a49">@override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">dispose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">WidgetsBinding</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">removeObserver</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">super</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">dispose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="35-메시지-처리-흐름">3.5 메시지 처리 흐름<a href="#35-메시지-처리-흐름" class="hash-link" aria-label="Direct link to 3.5 메시지 처리 흐름" title="Direct link to 3.5 메시지 처리 흐름">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="351-sdk-초기화-및-사용자-식별-흐름">3.5.1 SDK 초기화 및 사용자 식별 흐름<a href="#351-sdk-초기화-및-사용자-식별-흐름" class="hash-link" aria-label="Direct link to 3.5.1 SDK 초기화 및 사용자 식별 흐름" title="Direct link to 3.5.1 SDK 초기화 및 사용자 식별 흐름">​</a></h3>
<!-- -->
<p>모바일 SDK 초기화 및 사용자 식별 과정을 상세하게 설명합니다:</p>
<ol>
<li><strong>SDK 초기화</strong>:<!-- -->
<ul>
<li>앱은 <code>initialize(APP_ID)</code>를 호출하여 Automata SDK를 초기화합니다.</li>
<li>SDK는 디바이스 정보(모델, OS, 언어 등)를 수집하고 API를 통해 서버에 푸시 알림 구독을 등록합니다.</li>
<li>서버는 새로운 Subscription 레코드를 생성하고 구독 ID를 반환합니다.</li>
<li>이 시점에서 구독은 익명 상태로 등록됩니다(특정 사용자와 연결되지 않음).</li>
</ul>
</li>
<li><strong>사용자 로그인</strong>:<!-- -->
<ul>
<li>앱에서 사용자 인증 후, <code>login(&quot;external_id&quot;)</code>를 호출하여 사용자 식별 정보를 제공합니다.</li>
<li><code>external_id</code>는 앱의 고유 사용자 식별자로, 이메일이나 사용자 ID 등이 될 수 있습니다.</li>
<li>서버는 <code>external_id</code>로 기존 User를 검색하거나 새로운 User를 생성합니다.</li>
<li>현재 등록된 구독들이 해당 User와 연결되어 개인화된 메시지를 받을 수 있게 됩니다.</li>
<li>같은 <code>external_id</code>로 여러 구독이 로그인하면, 모든 구독이 동일한 User에 연결됩니다.</li>
</ul>
</li>
<li><strong>추가 채널 등록</strong>:<!-- -->
<ul>
<li>앱에서 <code>registerEmail()</code>, <code>registerSMS()</code>, <code>registerKakaoTalk()</code> 등을 호출하여 추가 채널을 등록합니다.</li>
<li>서버는 해당 채널에 대한 새로운 Subscription 레코드를 생성하고 현재 로그인된 사용자와 연결합니다.</li>
<li>이렇게 하나의 사용자는 여러 채널(푸시, 이메일, SMS, 카카오톡 등)을 통해 메시지를 받을 수 있게 됩니다.</li>
</ul>
</li>
<li><strong>사용자 로그아웃</strong>:<!-- -->
<ul>
<li>앱에서 <code>logout()</code>을 호출하면 구독과 사용자 간의 연결이 해제됩니다.</li>
<li>구독은 익명 상태로 돌아가고, 개인화된 메시지는 중단됩니다.</li>
<li>구독 토큰은 여전히 유효하므로 일반 메시지는 계속 받을 수 있습니다.</li>
</ul>
</li>
</ol>
<p>이 흐름은 OneSignal과 유사한 방식으로 구독 등록 및 사용자 식별을 처리하며, 한 사용자가 여러 채널과 디바이스를 사용하는 시나리오와 여러 사용자가 한 디바이스를 공유하는 시나리오 모두를 지원합니다.</p>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="352-메시지-처리-흐름">3.5.2 메시지 처리 흐름<a href="#352-메시지-처리-흐름" class="hash-link" aria-label="Direct link to 3.5.2 메시지 처리 흐름" title="Direct link to 3.5.2 메시지 처리 흐름">​</a></h3>
<!-- -->
<p>메시지 처리 흐름은 개별 메시지, 템플릿 기반 메시지, 대량 캠페인의 세 가지 주요 경로를 포함합니다. 현재 푸시 알림 채널만 구현되어 있으며 나머지 채널(이메일, SMS, 카카오 알림톡, 인앱 메시지)은 향후 구현될 예정입니다:</p>
<ol>
<li><strong>개별 메시지 발송</strong>:<!-- -->
<ul>
<li>클라이언트 앱이 특정 사용자/구독에 메시지 전송을 요청합니다.</li>
<li>서버는 메시지 데이터를 저장하고 작업 큐에 추가합니다.</li>
</ul>
</li>
<li><strong>템플릿 기반 개별 메시지</strong>:<!-- -->
<ul>
<li>클라이언트가 템플릿 ID와 변수를 제공하여 메시지를 요청합니다.</li>
<li>템플릿 서비스가 템플릿을 조회하고 변수를 치환하여 최종 콘텐츠를 생성합니다.</li>
<li>렌더링된 콘텐츠로 메시지를 생성하고 작업 큐에 추가합니다.</li>
</ul>
</li>
<li><strong>캠페인 메시지</strong>:<!-- -->
<ul>
<li>클라이언트가 대량 발송을 위한 캠페인을 생성합니다.</li>
<li>캠페인 관리자는 캠페인 정보를 저장하고, 템플릿 기반 캠페인인 경우 템플릿 서비스에 렌더링을 요청합니다.</li>
<li>타겟팅 조건에 맞는 사용자/구독을 조회하여 대량의 메시지를 생성합니다.</li>
<li>생성된 메시지를 배치로 작업 큐에 추가합니다.</li>
</ul>
</li>
<li><strong>비동기 처리 및 전송</strong>:<!-- -->
<ul>
<li>작업 큐는 서버 부하에 따라 메시지 전송 작업을 스케줄링합니다.</li>
<li>채널 어댑터가 메시지 유형에 따라 적절한 외부 서비스로 전송 요청을 처리합니다.<!-- -->
<ul>
<li>푸시 알림: 즉시 APNS 또는 FCM으로 전송</li>
<li>이메일/SMS/카카오 알림톡/인앱 메시지: 지원 예정</li>
</ul>
</li>
<li>전송 결과에 따라 메시지 상태가 업데이트되고 이벤트가 기록됩니다.</li>
</ul>
</li>
<li><strong>상태 추적</strong>:<!-- -->
<ul>
<li>클라이언트 SDK는 메시지 수신 및 사용자 상호작용을 서버에 보고합니다.</li>
<li>서버는 메시지 상태를 업데이트하고 분석 데이터를 수집합니다.</li>
</ul>
</li>
</ol>
<p>이 흐름은 개별 메시지부터 대량 캠페인까지 다양한 시나리오를 효율적으로 처리하며, 템플릿을 활용한 개인화와 상태 추적을 통한 상세한 분석을 제공합니다. 향후 이메일, SMS, 카카오 알림톡, 인앱 메시지 채널이 구현되면 이 흐름이 확장될 예정입니다.</p>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="36-채널-어댑터-시스템">3.6 채널 어댑터 시스템<a href="#36-채널-어댑터-시스템" class="hash-link" aria-label="Direct link to 3.6 채널 어댑터 시스템" title="Direct link to 3.6 채널 어댑터 시스템">​</a></h3>
<p>Automata-Signal은 다양한 메시징 채널을 지원하기 위해 모듈화된 어댑터 시스템을 구현합니다. 각 채널 어댑터는 특정 메시징 서비스와의 통합을 담당합니다:</p>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="푸시-알림-어댑터-지원">푸시 알림 어댑터 (지원)<a href="#푸시-알림-어댑터-지원" class="hash-link" aria-label="Direct link to 푸시 알림 어댑터 (지원)" title="Direct link to 푸시 알림 어댑터 (지원)">​</a></h3>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">PushAdapter</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token module class-name">GenServer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">alias</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Base</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># APNS 설정</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attribute variable" style="color:#36acaa">@apns_config</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">cert:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;path/to/cert.pem&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">key:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;path/to/key.pem&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">mode:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:prod</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># :dev 또는 :prod</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># FCM 설정</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attribute variable" style="color:#36acaa">@fcm_config</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">key:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your_server_key&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 구독 유형에 따라 적절한 어댑터 선택</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">subscription:</span><span class="token plain"> subscription</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">type </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom symbol" style="color:#36acaa">:iOSPush</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send_ios_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom symbol" style="color:#36acaa">:AndroidPush</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send_android_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      _ </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:invalid_subscription_type</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... 디바이스 타입별 전송 로직 ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 디바이스의 test_type에 따라 APNS 환경 결정</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">defp</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_apns_config</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">test_type:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">do:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token attribute variable" style="color:#36acaa">@apns_config</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">mode:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:dev</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">defp</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_apns_config</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">test_type:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">do:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token attribute variable" style="color:#36acaa">@apns_config</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">mode:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:dev</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">defp</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_apns_config</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">do:</span><span class="token plain"> </span><span class="token attribute variable" style="color:#36acaa">@apns_config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 오류 코드 매핑</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">defp</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">map_error_to_subscription_code</span><span class="token punctuation" style="color:#393A34">(</span><span class="token atom symbol" style="color:#36acaa">:unregistered</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">do:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... 기타 오류 코드 매핑 ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="이메일-어댑터-지원-예정">이메일 어댑터 (지원 예정)<a href="#이메일-어댑터-지원-예정" class="hash-link" aria-label="Direct link to 이메일 어댑터 (지원 예정)" title="Direct link to 이메일 어댑터 (지원 예정)">​</a></h3>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">EmailAdapter</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token module class-name">GenServer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">alias</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Base</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">subscription:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">type:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:Email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">token:</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 지원 예정:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Swoosh를 사용한 이메일 전송</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:not_implemented_yet</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... 지원 예정 응답 처리 로직 ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="sms-어댑터-지원-예정">SMS 어댑터 (지원 예정)<a href="#sms-어댑터-지원-예정" class="hash-link" aria-label="Direct link to SMS 어댑터 (지원 예정)" title="Direct link to SMS 어댑터 (지원 예정)">​</a></h3>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">SMSAdapter</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token module class-name">GenServer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">alias</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Base</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">subscription:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">type:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:SMS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">token:</span><span class="token plain"> phone_number</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 지원 예정:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># SMS 게이트웨이를 통한 전송</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:not_implemented_yet</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... 지원 예정 응답 처리 로직 ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="카카오톡-어댑터-지원-예정">카카오톡 어댑터 (지원 예정)<a href="#카카오톡-어댑터-지원-예정" class="hash-link" aria-label="Direct link to 카카오톡 어댑터 (지원 예정)" title="Direct link to 카카오톡 어댑터 (지원 예정)">​</a></h3>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">KakaoAdapter</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token module class-name">GenServer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">alias</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Base</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">subscription:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">type:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:KakaoTalk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">token:</span><span class="token plain"> phone_number</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 지원 예정:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 카카오 알림톡 API를 통한 전송</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:not_implemented_yet</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... 지원 예정 응답 처리 로직 ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="인앱-메시지-어댑터-지원-예정">인앱 메시지 어댑터 (지원 예정)<a href="#인앱-메시지-어댑터-지원-예정" class="hash-link" aria-label="Direct link to 인앱 메시지 어댑터 (지원 예정)" title="Direct link to 인앱 메시지 어댑터 (지원 예정)">​</a></h3>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">InAppAdapter</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token module class-name">GenServer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">alias</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">Base</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">subscription:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token attr-name" style="color:#00a4db">type:</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:InAppMessage</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 지원 예정:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># SDK를 통한 인앱 메시지 전달 로직</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom symbol" style="color:#36acaa">:error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom symbol" style="color:#36acaa">:not_implemented_yet</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ... 지원 예정 응답 처리 로직 ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>이 어댑터 시스템의 주요 이점:</p>
<ul>
<li><strong>일관된 인터페이스</strong>: 모든 채널에 동일한 <code>send_message/1</code> 인터페이스 제공</li>
<li><strong>모듈성</strong>: 새로운 채널 추가가 기존 코드에 영향을 주지 않음</li>
<li><strong>단계적 구현</strong>: 푸시 알림부터 시작하여 다른 채널은 향후 단계적으로 구현 가능</li>
<li><strong>채널별 최적화</strong>: 각 채널의 고유한 특성과 기능을 최대한 활용</li>
<li><strong>오류 처리 통합</strong>: 채널별 오류 코드를 표준화된 내부 코드로 변환</li>
<li><strong>채널별 지표 수집</strong>: 각 채널의 성능 및 효율성을 독립적으로 모니터링</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="37-멀티채널-메시징-시스템">3.7 멀티채널 메시징 시스템<a href="#37-멀티채널-메시징-시스템" class="hash-link" aria-label="Direct link to 3.7 멀티채널 메시징 시스템" title="Direct link to 3.7 멀티채널 메시징 시스템">​</a></h3>
<p>Automata-Signal은 다양한 채널을 통해 메시지를 전송할 수 있는 통합 메시징 플랫폼으로 설계되었습니다:</p>
<table><thead><tr><th>채널</th><th>기술</th><th>지원</th><th>장점</th></tr></thead><tbody><tr><td>iOS 푸시</td><td>Pigeon/APNS</td><td>지원</td><td>즉각적인 모바일 알림, 유저 참여 증대</td></tr><tr><td>Android 푸시</td><td>Pigeon/FCM</td><td>지원</td><td>크로스 플랫폼 모바일 알림 지원</td></tr><tr><td>이메일</td><td>Swoosh/SMTP/SES</td><td>지원 예정</td><td>풍부한 콘텐츠 전달, 마케팅 캠페인</td></tr><tr><td>SMS</td><td>다양한 SMS 게이트웨이</td><td>지원 예정</td><td>높은 도달률, 중요 알림에 적합</td></tr><tr><td>카카오 알림톡</td><td>카카오 비즈니스 API</td><td>지원 예정</td><td>한국 시장 타겟팅, 공식 채널 식별</td></tr><tr><td>인앱 메시지</td><td>SDK 내장 컴포넌트</td><td>지원 예정</td><td>앱 내 직접 전달, 높은 참여율</td></tr></tbody></table>
<p>각 채널에 대한 전용 어댑터는 메시지 형식, 전송 프로토콜, 오류 처리 등을 처리하여 일관된 인터페이스를 제공합니다.</p>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="38-배포-아키텍처">3.8 배포 아키텍처<a href="#38-배포-아키텍처" class="hash-link" aria-label="Direct link to 3.8 배포 아키텍처" title="Direct link to 3.8 배포 아키텍처">​</a></h3>
<!-- -->
<p>Automata-Signal은 fly.io 플랫폼을 활용한 글로벌 분산 배포를 구현합니다:</p>
<ul>
<li><strong>다중 리전 배포</strong>: 지역적으로 분산된 여러 데이터 센터에 배포하여 지연 시간 최소화 및 중복성 제공</li>
<li><strong>노드 간 통신</strong>: libcluster를 활용하여 Elixir 노드 간 자동 연결 및 통신 구현</li>
<li><strong>데이터베이스 복제</strong>: 프라이머리 리전에 메인 데이터베이스를 두고 다른 리전에 복제본 유지</li>
<li><strong>근접성 기반 라우팅</strong>: 사용자에게 가장 가까운 리전으로 요청 라우팅</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="4-핵심-기술-사항">4. 핵심 기술 사항<a href="#4-핵심-기술-사항" class="hash-link" aria-label="Direct link to 4. 핵심 기술 사항" title="Direct link to 4. 핵심 기술 사항">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="사용된-기술-스택">사용된 기술 스택<a href="#사용된-기술-스택" class="hash-link" aria-label="Direct link to 사용된 기술 스택" title="Direct link to 사용된 기술 스택">​</a></h3>
<p><strong>백엔드</strong>:</p>
<ul>
<li><strong>프로그래밍 언어</strong>: Elixir - 동시성 처리와 분산 시스템 구축에 최적화된 언어</li>
<li><strong>웹 프레임워크</strong>: Phoenix - 고성능 웹 API 개발용 프레임워크</li>
<li><strong>데이터 모델링</strong>: Ash Framework - 풍부한 도메인 모델링 및 확장 기능 제공</li>
<li><strong>데이터베이스</strong>: PostgreSQL - 트랜잭션 안정성과 확장성이 뛰어난 관계형 DB</li>
<li><strong>작업 큐</strong>: Oban(ash_oban) - 백그라운드 작업 처리 및 스케줄링</li>
<li><strong>푸시 서비스</strong>: Pigeon - iOS와 Android 푸시 통합 라이브러리</li>
<li><strong>분산 시스템</strong>: libcluster와 Erlang/OTP - 노드 발견 및 분산 처리</li>
<li><strong>템플릿 엔진</strong>: EEx 기반 커스텀 템플릿 엔진 - 변수 치환 및 조건부 콘텐츠 지원</li>
</ul>
<p><strong>클라이언트</strong>:</p>
<ul>
<li><strong>모바일 프레임워크</strong>: Flutter - 크로스 플랫폼 모바일 개발</li>
<li><strong>푸시 통합</strong>: firebase_messaging, flutter_local_notifications</li>
<li><strong>SDK 구조</strong>: 모듈화된 SDK - 구독 등록, 사용자 식별, 메시지 처리</li>
</ul>
<p><strong>인프라</strong>:</p>
<ul>
<li><strong>클라우드 플랫폼</strong>: fly.io - 글로벌 엣지 배포 지원</li>
<li><strong>모니터링</strong>: 내장 모니터링 및 로깅 시스템</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="기술적-특징-및-이점">기술적 특징 및 이점<a href="#기술적-특징-및-이점" class="hash-link" aria-label="Direct link to 기술적 특징 및 이점" title="Direct link to 기술적 특징 및 이점">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="ash-framework-확장-모듈-활용">Ash Framework 확장 모듈 활용<a href="#ash-framework-확장-모듈-활용" class="hash-link" aria-label="Direct link to Ash Framework 확장 모듈 활용" title="Direct link to Ash Framework 확장 모듈 활용">​</a></h3>
<table><thead><tr><th>모듈</th><th>용도</th><th>설명</th></tr></thead><tbody><tr><td>ash_state_machine</td><td>메시지 상태 관리</td><td>메시지 라이프사이클을 상태 머신으로 관리</td></tr><tr><td>ash_oban</td><td>비동기 작업 처리</td><td>메시지 전송 작업 큐 관리 및 스케줄링</td></tr><tr><td>ash_paper_trail</td><td>변경 내역 추적</td><td>메시지 상태 변경 기록 및 감사 추적</td></tr><tr><td>ash_archival</td><td>논리적 삭제</td><td>사용자 및 구독 데이터의 소프트 삭제 처리</td></tr><tr><td>ash_cloak</td><td>데이터 암호화</td><td>민감한 사용자 데이터 및 토큰 암호화</td></tr><tr><td>ash_money</td><td>과금 처리</td><td>정확한 통화 변환 및 요금 계산 (향후 유료 과금제 도입 시 활용)</td></tr><tr><td>ash_double_entry</td><td>사용량 추적</td><td>앱별 메시지 할당량 및 사용량 정확한 추적</td></tr><tr><td>ash_csv</td><td>데이터 내보내기</td><td>통계 데이터 및 보고서 CSV 내보내기</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="템플릿-엔진-구현">템플릿 엔진 구현<a href="#템플릿-엔진-구현" class="hash-link" aria-label="Direct link to 템플릿 엔진 구현" title="Direct link to 템플릿 엔진 구현">​</a></h3>
<p>템플릿 엔진은 다음과 같은 기능을 제공합니다:</p>
<div class="language-elixir codeBlockContainer_qNdj theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_enjf"><pre tabindex="0" class="prism-code language-elixir codeBlock_txiP thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_XHAo"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">defmodule</span><span class="token plain"> </span><span class="token module class-name">AutomataSignal</span><span class="token punctuation" style="color:#393A34">.</span><span class="token module class-name">TemplateEngine</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token doc attribute">@doc</span><span class="token doc"> </span><span class="token doc string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc string" style="color:#e3116c">  템플릿에 변수를 적용하여 최종 텍스트를 생성합니다.</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doc string" style="color:#e3116c">  ## 예시</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc string" style="color:#e3116c">    template = &quot;안녕하세요 {{user_name}}님, {{event_name}} 이벤트가 시작됩니다&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc string" style="color:#e3116c">    variables = %{&quot;user_name&quot; =&gt; &quot;홍길동&quot;, &quot;event_name&quot; =&gt; &quot;여름 세일&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc string" style="display:inline-block;color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token doc string" style="color:#e3116c">    render_template(template, variables)</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc string" style="color:#e3116c">    # =&gt; &quot;안녕하세요 홍길동님, 여름 세일 이벤트가 시작됩니다&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc string" style="color:#e3116c">  &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render_template</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">template</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">when</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">is_binary</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">template</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">and</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">is_map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token module class-name">Regex</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token regex" style="color:#36acaa">~r/\{\{([^}]+)\}\}/</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> template</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">fn</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> var_name </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token module class-name">Map</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">variables</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> var_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token doc attribute">@doc</span><span class="token doc"> </span><span class="token doc string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc string" style="color:#e3116c">  템플릿 객체(title_template, body_template, data_template)에</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc string" style="color:#e3116c">  변수를 적용하여 최종 메시지 콘텐츠를 생성합니다.</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc string" style="color:#e3116c">  &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render_message_content</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">template</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">title:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render_template</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">title_template</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">body:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render_template</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">body_template</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token attr-name" style="color:#00a4db">data:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render_data_template</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">template</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data_template</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 중첩된 데이터 구조에 변수 적용</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">defp</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render_data_template</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_template</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">when</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">is_map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_template</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data_template</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">|&gt;</span><span class="token plain"> </span><span class="token module class-name">Enum</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">fn</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">k</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> v</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">k</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render_data_value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">v</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">end</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">|&gt;</span><span class="token plain"> </span><span class="token module class-name">Enum</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">into</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">defp</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render_data_value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">when</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">is_binary</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">render_template</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">defp</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render_data_value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">when</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">is_map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">render_data_template</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">defp</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render_data_value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">when</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">is_list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token module class-name">Enum</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token function" style="color:#d73a49">render_data_value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token argument variable" style="color:#36acaa">&amp;1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">defp</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render_data_value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _variables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#00a4db">do:</span><span class="token plain"> value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_Y8nk"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FM2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_GhTt"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_AhUB"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="메시지-상태-추적-시스템">메시지 상태 추적 시스템<a href="#메시지-상태-추적-시스템" class="hash-link" aria-label="Direct link to 메시지 상태 추적 시스템" title="Direct link to 메시지 상태 추적 시스템">​</a></h3>
<!-- -->
<p>메시지의 전체 라이프사이클을 추적하여 상세한 상태 정보와 분석 데이터를 제공합니다:</p>
<table><thead><tr><th>상태</th><th>정의</th><th>측정 방식</th></tr></thead><tbody><tr><td>successful (발송)</td><td>외부 서비스에 성공적으로 전달</td><td>서비스 응답 확인</td></tr><tr><td>failed (실패)</td><td>유효하지 않은 토큰/구독 취소</td><td>오류 코드 분석</td></tr><tr><td>errored (오류)</td><td>일시적 서비스 장애</td><td>서비스 불가 응답</td></tr><tr><td>received (도달)</td><td>사용자 기기/채널에 도달</td><td>클라이언트 SDK 확인 신호</td></tr><tr><td>converted (열람)</td><td>사용자가 메시지 클릭/확인</td><td>클라이언트 SDK 열람 이벤트</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="5-성능-및-부하-요구사항">5. 성능 및 부하 요구사항<a href="#5-성능-및-부하-요구사항" class="hash-link" aria-label="Direct link to 5. 성능 및 부하 요구사항" title="Direct link to 5. 성능 및 부하 요구사항">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="51-성능-지표">5.1 성능 지표<a href="#51-성능-지표" class="hash-link" aria-label="Direct link to 5.1 성능 지표" title="Direct link to 5.1 성능 지표">​</a></h3>
<table><thead><tr><th>항목</th><th>사양</th><th>비고</th></tr></thead><tbody><tr><td>최대 처리량</td><td>초당 10만 건</td><td>분산 노드 구성 시</td></tr><tr><td>버스트 처리</td><td>10초당 100만 건</td><td>큐 기반 버퍼링으로 처리</td></tr><tr><td>평균 E2E 지연</td><td>500ms 이하</td><td>네트워크 상태 양호 시</td></tr><tr><td>데이터베이스 동시 접속</td><td>최대 50 connections/노드</td><td>커넥션 풀링 적용</td></tr><tr><td>단일 노드 처리량</td><td>초당 5,000-10,000건</td><td>HW 사양에 따라 변동</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="52-부하-테스트-계획">5.2 부하 테스트 계획<a href="#52-부하-테스트-계획" class="hash-link" aria-label="Direct link to 5.2 부하 테스트 계획" title="Direct link to 5.2 부하 테스트 계획">​</a></h3>
<ol>
<li><strong>단일 노드 부하 테스트</strong>:<!-- -->
<ul>
<li>목표: 단일 노드의 최대 처리량 측정</li>
<li>방법: 점진적으로 요청 수를 증가시키며 응답 시간 및 오류율 모니터링</li>
<li>지표: 초당 처리량, 응답 지연 시간, CPU/메모리 사용량</li>
</ul>
</li>
<li><strong>분산 클러스터 부하 테스트</strong>:<!-- -->
<ul>
<li>목표: 전체 시스템의 확장성 검증</li>
<li>방법: 다중 노드 환경에서 대량 메시지 요청 시뮬레이션</li>
<li>지표: 전체 처리량, 노드 간 부하 분산, 데이터베이스 병목 현상</li>
</ul>
</li>
<li><strong>장애 복구 테스트</strong>:<!-- -->
<ul>
<li>목표: 노드 장애 시 복구 능력 검증</li>
<li>방법: 임의 노드 중단 및 복구 시 시스템 동작 테스트</li>
<li>지표: 복구 시간, 메시지 손실률, 서비스 연속성</li>
</ul>
</li>
<li><strong>지속 부하 테스트</strong>:<!-- -->
<ul>
<li>목표: 장시간 운영 시 안정성 검증</li>
<li>방법: 72시간 지속적인 중간 부하 유지</li>
<li>지표: 메모리 누수, 성능 저하, 오류 발생 패턴</li>
</ul>
</li>
<li><strong>앱별 할당량 테스트</strong>:<!-- -->
<ul>
<li>목표: 할당량 제한 및 과금 메커니즘 검증</li>
<li>방법: 여러 앱의 할당량 초과 시나리오 시뮬레이션</li>
<li>지표: 할당량 추적 정확도, 제한 적용 정확성</li>
</ul>
</li>
<li><strong>SDK 성능 테스트</strong>:<!-- -->
<ul>
<li>목표: SDK의 성능 및 안정성 검증</li>
<li>방법: 다양한 디바이스 환경에서 초기화, 로그인, 채널 등록 성능 측정</li>
<li>지표: 배터리 소모, 메모리 사용량, 응답 시간</li>
</ul>
</li>
<li><strong>멀티채널 부하 테스트</strong> (향후):<!-- -->
<ul>
<li>목표: 다양한 채널의 동시 처리 능력 검증</li>
<li>방법: 여러 채널에 대한 혼합 부하 생성</li>
<li>지표: 채널별 처리 속도, 시스템 전체 처리량</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="53-시스템-요구사항">5.3 시스템 요구사항<a href="#53-시스템-요구사항" class="hash-link" aria-label="Direct link to 5.3 시스템 요구사항" title="Direct link to 5.3 시스템 요구사항">​</a></h3>
<table><thead><tr><th>구성 요소</th><th>최소 사양</th><th>권장 사양</th></tr></thead><tbody><tr><td>Elixir 노드</td><td>CPU: 2 vCPU<br>RAM: 2GB<br>DISK: 20GB</td><td>CPU: 4+ vCPU<br>RAM: 4GB+<br>DISK: 40GB+</td></tr><tr><td>PostgreSQL</td><td>CPU: 4 vCPU<br>RAM: 8GB<br>DISK: 100GB SSD</td><td>CPU: 8+ vCPU<br>RAM: 16GB+<br>DISK: 500GB+ SSD</td></tr><tr><td>네트워크</td><td>1Gbps</td><td>10Gbps</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="6-모니터링-및-운영">6. 모니터링 및 운영<a href="#6-모니터링-및-운영" class="hash-link" aria-label="Direct link to 6. 모니터링 및 운영" title="Direct link to 6. 모니터링 및 운영">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="모니터링-전략">모니터링 전략<a href="#모니터링-전략" class="hash-link" aria-label="Direct link to 모니터링 전략" title="Direct link to 모니터링 전략">​</a></h3>
<ol>
<li><strong>시스템 모니터링</strong>:<!-- -->
<ul>
<li>CPU, 메모리, 디스크 I/O, 네트워크 트래픽 등 기본 시스템 지표</li>
<li>노드 상태 및 클러스터 연결 상태</li>
<li>데이터베이스 성능 및 연결 풀 상태</li>
</ul>
</li>
<li><strong>애플리케이션 모니터링</strong>:<!-- -->
<ul>
<li>요청 처리량, 응답 시간, 오류율</li>
<li>채널별 전송 상태 및 성능</li>
<li>작업 큐 길이 및 작업 처리 시간</li>
<li>템플릿 렌더링 성능</li>
<li>캠페인 처리 진행 상황</li>
</ul>
</li>
<li><strong>비즈니스 지표 모니터링</strong>:<!-- -->
<ul>
<li>메시지 상태별 분포 및 변화율</li>
<li>앱별 할당량 사용 현황</li>
<li>구독/구독취소 추이</li>
<li>템플릿 및 캠페인 사용 통계</li>
<li>채널별 성과 분석 및 비교</li>
<li>메시지 전환율(수신→열람) 분석</li>
</ul>
</li>
<li><strong>SDK 성능 모니터링</strong>:<!-- -->
<ul>
<li>초기화 시간</li>
<li>구독 등록 성공률</li>
<li>사용자 식별 성공률</li>
<li>클라이언트 오류 발생률</li>
</ul>
</li>
<li><strong>알림 설정</strong>:<!-- -->
<ul>
<li>시스템 성능 저하 시 알림</li>
<li>오류율 임계값 초과 시 알림</li>
<li>앱별 할당량 소진 임계값 도달 시 알림</li>
<li>캠페인 진행 상황 알림</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="운영-계획">운영 계획<a href="#운영-계획" class="hash-link" aria-label="Direct link to 운영 계획" title="Direct link to 운영 계획">​</a></h3>
<ol>
<li><strong>장애 대응 절차</strong>:<!-- -->
<ul>
<li>단계별 에스컬레이션 프로세스</li>
<li>자동화된 복구 절차</li>
<li>백업 및 복원 계획</li>
</ul>
</li>
<li><strong>성능 최적화</strong>:<!-- -->
<ul>
<li>정기적인 성능 검토 및 병목 지점 식별</li>
<li>데이터베이스 쿼리 최적화</li>
<li>템플릿 렌더링 캐싱 전략</li>
<li>주기적인 리소스 확장 계획 검토</li>
</ul>
</li>
<li><strong>유지보수 계획</strong>:<!-- -->
<ul>
<li>무중단 업데이트 전략</li>
<li>정기적인 데이터베이스 유지보수</li>
<li>보안 패치 및 의존성 업데이트 일정</li>
<li>SDK 버전 관리 및 호환성 전략</li>
</ul>
</li>
<li><strong>백업 전략</strong>:<!-- -->
<ul>
<li>일일 데이터베이스 전체 백업</li>
<li>시간별 증분 백업</li>
<li>다중 리전 백업 저장</li>
</ul>
</li>
<li><strong>채널 관리 전략</strong> (향후):<!-- -->
<ul>
<li>채널별 성능 및 안정성 모니터링</li>
<li>채널 추가 및 삭제 프로세스</li>
<li>채널별 할당량 및 비용 관리</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="7-구현-로드맵">7. 구현 로드맵<a href="#7-구현-로드맵" class="hash-link" aria-label="Direct link to 7. 구현 로드맵" title="Direct link to 7. 구현 로드맵">​</a></h2>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="개발-일정">개발 일정<a href="#개발-일정" class="hash-link" aria-label="Direct link to 개발 일정" title="Direct link to 개발 일정">​</a></h3>
<table><thead><tr><th>단계</th><th>주요 목표</th><th>소요 시간</th><th>내용</th></tr></thead><tbody><tr><td>1. 기본 인프라 구축</td><td>핵심 API 서버, 리소스 설계</td><td>4주</td><td>- Umbrella 프로젝트 구조 설정<br>- Ash 리소스 정의<br>- 데이터베이스 스키마 설계<br>- 앱 관리 모듈 구현</td></tr><tr><td>2. 푸시 알림 채널 구현</td><td>푸시 알림 발송 및 상태 관리</td><td>3주</td><td>- Pigeon 푸시 서비스 통합<br>- 푸시 어댑터 구현<br>- 상태 머신 구현</td></tr><tr><td>3. 분산 처리 시스템</td><td>분산 노드 구성</td><td>3주</td><td>- libcluster 설정<br>- 분산 GenServer 구현<br>- 노드 간 작업 분배</td></tr><tr><td>4. 비동기 작업 처리</td><td>작업 큐 구현</td><td>2주</td><td>- ash_oban 워커 구현<br>- 재시도 전략 설정<br>- 배치 처리 최적화</td></tr><tr><td>5. 템플릿 및 캠페인</td><td>템플릿 기반 메시지 기능</td><td>4주</td><td>- 템플릿 엔진 개발<br>- 변수 처리 로직<br>- 캠페인 관리 시스템<br>- 타겟팅 기능</td></tr><tr><td>6. SDK 개발</td><td>SDK 구현</td><td>4주</td><td>- Flutter SDK 핵심 기능<br>- 구독 등록 기능<br>- 사용자 식별 및 로그인<br>- 메시지 추적 콜백</td></tr><tr><td>7. 할당량 관리</td><td>앱별 사용량 제한 및 과금</td><td>4주</td><td>- 앱별 할당량 모델 구현<br>- 사용량 추적 시스템<br>- 과금 모델 및 보고서</td></tr><tr><td>8. 통계 및 분석 시스템</td><td>데이터 분석 기능</td><td>4주</td><td>- 통계 API 구현<br>- 앱별, 채널별 분석 기능<br>- 대시보드 데이터 제공</td></tr><tr><td>9. 추가 채널 준비</td><td>미래 채널 확장 준비</td><td>2주</td><td>- 채널 어댑터 인터페이스 정의<br>- 이메일/SMS/카카오/인앱 타입 정의</td></tr><tr><td>10. 성능 최적화</td><td>성능 향상</td><td>3주</td><td>- 성능 테스트<br>- 병목 지점 분석<br>- 시스템 튜닝<br>- 글로벌 배포</td></tr><tr><td>11. 미래 확장</td><td>추가 채널 지원</td><td>향후 계획</td><td>- 이메일 채널 지원<br>- SMS 채널 지원<br>- 카카오 알림톡 지원<br>- 인앱 메시지 지원</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_QJwc" id="자원-할당">자원 할당<a href="#자원-할당" class="hash-link" aria-label="Direct link to 자원 할당" title="Direct link to 자원 할당">​</a></h3>
<ol>
<li><strong>개발 팀 구성</strong>:<!-- -->
<ul>
<li>백엔드 개발자 (Elixir) - 3명</li>
<li>프론트엔드 개발자 (Flutter) - 2명</li>
<li>DevOps 엔지니어 - 1명</li>
<li>QA 엔지니어 - 1명</li>
</ul>
</li>
<li><strong>하드웨어 요구사항</strong>:<!-- -->
<ul>
<li>개발 환경: 각 개발자 워크스테이션</li>
<li>테스트 환경: 6-8 노드 클러스터</li>
<li>운영 환경: 최소 12 노드 분산 클러스터 (리전당 4노드)</li>
</ul>
</li>
<li><strong>외부 서비스 및 도구</strong>:<!-- -->
<ul>
<li>fly.io 계정 및 리소스</li>
<li>APNS 및 FCM 개발자 계정</li>
<li>모니터링 및 로깅 도구</li>
<li>CI/CD 파이프라인</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_QJwc" id="8-결론">8. 결론<a href="#8-결론" class="hash-link" aria-label="Direct link to 8. 결론" title="Direct link to 8. 결론">​</a></h2>
<p>Automata-Signal은 Elixir의 분산 처리 능력과 Ash Framework의 강력한 도메인 모델링 기능을 활용하여 구축된 통합 멀티채널 메시징 플랫폼입니다. 초기에는 푸시 알림에 집중하되, 향후 이메일, SMS, 카카오 알림톡, 인앱 메시지 등의 채널을 쉽게 추가할 수 있는 확장 가능한 아키텍처로 설계되었습니다. 초당 10만 건의 메시지를 처리할 수 있는 확장성과 글로벌 분산 배포를 통한 높은 가용성을 제공합니다.</p>
<p>핵심 차별점:</p>
<ul>
<li><strong>멀티채널 통합 아키텍처</strong>: 다양한 채널을 단일 플랫폼에서 통합 관리할 수 있는 확장 가능한 구조</li>
<li><strong>고성능 분산 처리</strong>: Elixir/OTP 기반 경량 프로세스 모델을 통한 높은 동시성 처리</li>
<li><strong>확장 가능한 어댑터 시스템</strong>: 새로운 채널을 쉽게 추가할 수 있는 모듈화된 어댑터 아키텍처</li>
<li><strong>통합 SDK</strong>: OneSignal과 유사한 사용자 경험의 크로스 플랫폼 SDK, 다양한 채널 구독 관리 지원</li>
<li><strong>사용자 식별 시스템</strong>: external_id 기반의 사용자 식별 및 멀티 채널/디바이스 지원</li>
<li><strong>단계적 구현 접근법</strong>: 처음에는 푸시 알림에 집중하고, 향후 단계적으로 추가 채널 지원</li>
<li><strong>강력한 템플릿 기능</strong>: 재사용 가능한 템플릿과 변수 치환을 통한 개인화, 채널별 최적화</li>
<li><strong>대량 캠페인 관리</strong>: 타겟팅 조건 기반의 대규모 메시지 캠페인 관리</li>
<li><strong>정교한 상태 추적</strong>: 메시지의 전체 라이프사이클 추적을 통한 상세한 참여 분석</li>
<li><strong>앱별 사용량 관리</strong>: 앱 단위의 할당량 관리 및 사용량 기반 과금 모델 지원</li>
<li><strong>글로벌 확장성</strong>: fly.io를 활용한 지역 분산 배포로 전 세계 어디서나 낮은 지연 시간 보장</li>
<li><strong>모듈화된 설계</strong>: Umbrella 구조를 통한 명확한 관심사 분리 및 유지보수성 향상</li>
<li><strong>표준화된 구독 상태 코드</strong>: 멀티채널 환경에 최적화된 구독 상태 관리 시스템</li>
</ul>
<p>이 시스템은 엄격한 코드 품질 원칙, TDD 방식, SOLID 원칙을 적용하여 개발되며, 모든 구성 요소는 철저한 테스트 및 문서화를 통해 장기적인 유지보수를 지원합니다. 초기에는 푸시 알림 기능에 집중하되, 미래에 다양한 메시징 채널을 쉽게 추가할 수 있는 유연한 기반을 제공합니다.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/AutomataOOO/automata_docs/tree/main/docs/automata-signal/tech-spec.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Wowa" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_MFKL"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/automata-signal/planning/PLAN-001-requirements"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">[PLAN-001] 요구사항</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/vibe-coding/APP-000-global-rules"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">[APP-000] Global rules</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_G4nv thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-서론" class="table-of-contents__link toc-highlight">1. 서론</a><ul><li><a href="#목적" class="table-of-contents__link toc-highlight">목적</a></li><li><a href="#배경" class="table-of-contents__link toc-highlight">배경</a></li></ul></li><li><a href="#2-제품-개요" class="table-of-contents__link toc-highlight">2. 제품 개요</a><ul><li><a href="#기능적-요구사항" class="table-of-contents__link toc-highlight">기능적 요구사항</a></li><li><a href="#비기능적-요구사항" class="table-of-contents__link toc-highlight">비기능적 요구사항</a></li></ul></li><li><a href="#3-시스템-아키텍처" class="table-of-contents__link toc-highlight">3. 시스템 아키텍처</a><ul><li><a href="#31-전체-아키텍처-개요" class="table-of-contents__link toc-highlight">3.1 전체 아키텍처 개요</a></li><li><a href="#32-elixir-노드-내부-아키텍처" class="table-of-contents__link toc-highlight">3.2 Elixir 노드 내부 아키텍처</a></li><li><a href="#33-데이터-모델-아키텍처" class="table-of-contents__link toc-highlight">3.3 데이터 모델 아키텍처</a></li><li><a href="#주요-엔티티" class="table-of-contents__link toc-highlight">주요 엔티티</a></li><li><a href="#주요-데이터-모델-특징" class="table-of-contents__link toc-highlight">주요 데이터 모델 특징</a></li><li><a href="#기본-구독-상태" class="table-of-contents__link toc-highlight">기본 구독 상태</a></li><li><a href="#푸시-알림-관련-오류-코드" class="table-of-contents__link toc-highlight">푸시 알림 관련 오류 코드</a></li><li><a href="#이메일-관련-오류-코드-지원-예정" class="table-of-contents__link toc-highlight">이메일 관련 오류 코드 (지원 예정)</a></li><li><a href="#sms-관련-오류-코드-지원-예정" class="table-of-contents__link toc-highlight">SMS 관련 오류 코드 (지원 예정)</a></li><li><a href="#카카오-알림톡-관련-오류-코드-지원-예정" class="table-of-contents__link toc-highlight">카카오 알림톡 관련 오류 코드 (지원 예정)</a></li><li><a href="#인앱-메시지-관련-오류-코드-지원-예정" class="table-of-contents__link toc-highlight">인앱 메시지 관련 오류 코드 (지원 예정)</a></li><li><a href="#subscription-리소스-예시" class="table-of-contents__link toc-highlight">Subscription 리소스 예시</a></li><li><a href="#message-리소스-예시" class="table-of-contents__link toc-highlight">Message 리소스 예시</a></li><li><a href="#messagequota-리소스-예시" class="table-of-contents__link toc-highlight">MessageQuota 리소스 예시</a></li><li><a href="#34-sdk-아키텍처" class="table-of-contents__link toc-highlight">3.4 SDK 아키텍처</a></li><li><a href="#sdk-구현-예시-flutter" class="table-of-contents__link toc-highlight">SDK 구현 예시 (Flutter)</a></li><li><a href="#35-메시지-처리-흐름" class="table-of-contents__link toc-highlight">3.5 메시지 처리 흐름</a></li><li><a href="#351-sdk-초기화-및-사용자-식별-흐름" class="table-of-contents__link toc-highlight">3.5.1 SDK 초기화 및 사용자 식별 흐름</a></li><li><a href="#352-메시지-처리-흐름" class="table-of-contents__link toc-highlight">3.5.2 메시지 처리 흐름</a></li><li><a href="#36-채널-어댑터-시스템" class="table-of-contents__link toc-highlight">3.6 채널 어댑터 시스템</a></li><li><a href="#푸시-알림-어댑터-지원" class="table-of-contents__link toc-highlight">푸시 알림 어댑터 (지원)</a></li><li><a href="#이메일-어댑터-지원-예정" class="table-of-contents__link toc-highlight">이메일 어댑터 (지원 예정)</a></li><li><a href="#sms-어댑터-지원-예정" class="table-of-contents__link toc-highlight">SMS 어댑터 (지원 예정)</a></li><li><a href="#카카오톡-어댑터-지원-예정" class="table-of-contents__link toc-highlight">카카오톡 어댑터 (지원 예정)</a></li><li><a href="#인앱-메시지-어댑터-지원-예정" class="table-of-contents__link toc-highlight">인앱 메시지 어댑터 (지원 예정)</a></li><li><a href="#37-멀티채널-메시징-시스템" class="table-of-contents__link toc-highlight">3.7 멀티채널 메시징 시스템</a></li><li><a href="#38-배포-아키텍처" class="table-of-contents__link toc-highlight">3.8 배포 아키텍처</a></li></ul></li><li><a href="#4-핵심-기술-사항" class="table-of-contents__link toc-highlight">4. 핵심 기술 사항</a><ul><li><a href="#사용된-기술-스택" class="table-of-contents__link toc-highlight">사용된 기술 스택</a></li><li><a href="#기술적-특징-및-이점" class="table-of-contents__link toc-highlight">기술적 특징 및 이점</a></li><li><a href="#ash-framework-확장-모듈-활용" class="table-of-contents__link toc-highlight">Ash Framework 확장 모듈 활용</a></li><li><a href="#템플릿-엔진-구현" class="table-of-contents__link toc-highlight">템플릿 엔진 구현</a></li><li><a href="#메시지-상태-추적-시스템" class="table-of-contents__link toc-highlight">메시지 상태 추적 시스템</a></li></ul></li><li><a href="#5-성능-및-부하-요구사항" class="table-of-contents__link toc-highlight">5. 성능 및 부하 요구사항</a><ul><li><a href="#51-성능-지표" class="table-of-contents__link toc-highlight">5.1 성능 지표</a></li><li><a href="#52-부하-테스트-계획" class="table-of-contents__link toc-highlight">5.2 부하 테스트 계획</a></li><li><a href="#53-시스템-요구사항" class="table-of-contents__link toc-highlight">5.3 시스템 요구사항</a></li></ul></li><li><a href="#6-모니터링-및-운영" class="table-of-contents__link toc-highlight">6. 모니터링 및 운영</a><ul><li><a href="#모니터링-전략" class="table-of-contents__link toc-highlight">모니터링 전략</a></li><li><a href="#운영-계획" class="table-of-contents__link toc-highlight">운영 계획</a></li></ul></li><li><a href="#7-구현-로드맵" class="table-of-contents__link toc-highlight">7. 구현 로드맵</a><ul><li><a href="#개발-일정" class="table-of-contents__link toc-highlight">개발 일정</a></li><li><a href="#자원-할당" class="table-of-contents__link toc-highlight">자원 할당</a></li></ul></li><li><a href="#8-결론" class="table-of-contents__link toc-highlight">8. 결론</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Automata, Inc.</div></div></div></footer></div>
</body>
</html>